/*
 * Foundation Responsive Library
 * http://foundation.zurb.com
 * Copyright 2013, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/
/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 1.0.1
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */
function FastClick(t,e){"use strict";function i(t,e){return function(){return t.apply(e,arguments)}}var n;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=t,this.tapDelay=e.tapDelay||200,!FastClick.notNeeded(t)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,r=0,a=o.length;a>r;r++)s[o[r]]=i(s[o[r]],s);deviceIsAndroid&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,i.hijacked||i,n):o.call(t,e,i,n)},t.addEventListener=function(e,i,n){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):o.call(t,e,i,n)}),"function"==typeof t.onclick&&(n=t.onclick,t.addEventListener("click",function(t){n(t)},!1),t.onclick=null)}}var libFuncName=null;if("undefined"==typeof jQuery&&"undefined"==typeof Zepto&&"function"==typeof $)libFuncName=$;else if("function"==typeof jQuery)libFuncName=jQuery;else{if("function"!=typeof Zepto)throw new TypeError;libFuncName=Zepto}!function(t,e,i){"use strict";/*
    matchMedia() polyfill - Test a CSS media 
    type/query in JS. Authors & copyright (c) 2012: 
    Scott Jehl, Paul Irish, Nicholas Zakas. 
    Dual MIT/BSD license

    https://github.com/paulirish/matchMedia.js
  */
e.matchMedia=e.matchMedia||function(t){var e,i=t.documentElement,n=i.firstElementChild||i.firstChild,o=t.createElement("body"),s=t.createElement("div");return s.id="mq-test-1",s.style.cssText="position:absolute;top:-100em",o.style.background="none",o.appendChild(s),function(t){return s.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',i.insertBefore(o,n),e=42===s.offsetWidth,i.removeChild(o),{matches:e,media:t}}}(i),Array.prototype.filter||(Array.prototype.filter=function(t){if(null==this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"==typeof t){for(var n=[],o=arguments[1],s=0;i>s;s++)if(s in e){var r=e[s];t&&t.call(o,r,s,e)&&n.push(r)}return n}}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},o=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null==this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!=n?n=0:0!=n&&1/0!=n&&n!=-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var o=n>=0?n:Math.max(i-Math.abs(n),0);i>o;o++)if(o in e&&e[o]===t)return o;return-1}),t.fn.stop=t.fn.stop||function(){return this},e.Foundation={name:"Foundation",version:"4.2.3",cache:{},init:function(e,i,n,o,s,r){var a,l=[e,n,o,s],c=[],r=r||!1;if(r&&(this.nc=r),this.rtl=/rtl/i.test(t("html").attr("dir")),this.scope=e||this.scope,i&&"string"==typeof i&&!/reflow/i.test(i)){if(/off/i.test(i))return this.off();if(a=i.split(" "),a.length>0)for(var h=a.length-1;h>=0;h--)c.push(this.init_lib(a[h],l))}else{/reflow/i.test(i)&&(l[1]="reflow");for(var u in this.libs)c.push(this.init_lib(u,l))}return"function"==typeof i&&l.unshift(i),this.response_obj(c,l)},response_obj:function(t,e){for(var i=0,n=e.length;n>i;i++)if("function"==typeof e[i])return e[i]({errors:t.filter(function(t){return"string"==typeof t?t:void 0})});return t},init_lib:function(t,e){return this.trap(function(){return this.libs.hasOwnProperty(t)?(this.patch(this.libs[t]),this.libs[t].init.apply(this.libs[t],e)):function(){}}.bind(this),t)},trap:function(t,e){if(!this.nc)try{return t()}catch(i){return this.error({name:e,message:"could not be initialized",more:i.name+" "+i.message})}return t()},patch:function(t){this.fix_outer(t),t.scope=this.scope,t.rtl=this.rtl},inherit:function(t,e){for(var i=e.split(" "),n=i.length-1;n>=0;n--)this.lib_methods.hasOwnProperty(i[n])&&(this.libs[t.name][i[n]]=this.lib_methods[i[n]])},random_str:function(t){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");t||(t=Math.floor(Math.random()*e.length));for(var i="",n=0;t>n;n++)i+=e[Math.floor(Math.random()*e.length)];return i},libs:{},lib_methods:{set_data:function(t,e){var i=[this.name,+new Date,Foundation.random_str(5)].join("-");return Foundation.cache[i]=e,t.attr("data-"+this.name+"-id",i),e},get_data:function(t){return Foundation.cache[t.attr("data-"+this.name+"-id")]},remove_data:function(e){e?(delete Foundation.cache[e.attr("data-"+this.name+"-id")],e.attr("data-"+this.name+"-id","")):t("[data-"+this.name+"-id]").each(function(){delete Foundation.cache[t(this).attr("data-"+this.name+"-id")],t(this).attr("data-"+this.name+"-id","")})},throttle:function(t,e){var i=null;return function(){var n=this,o=arguments;clearTimeout(i),i=setTimeout(function(){t.apply(n,o)},e)}},data_options:function(e){function i(t){return!isNaN(t-0)&&null!==t&&""!==t&&t!==!1&&t!==!0}function n(e){return"string"==typeof e?t.trim(e):e}var o,s,r={},a=(e.attr("data-options")||":").split(";"),l=a.length;for(o=l-1;o>=0;o--)s=a[o].split(":"),/true/i.test(s[1])&&(s[1]=!0),/false/i.test(s[1])&&(s[1]=!1),i(s[1])&&(s[1]=parseInt(s[1],10)),2===s.length&&s[0].length>0&&(r[n(s[0])]=n(s[1]));return r},delay:function(t,e){return setTimeout(t,e)},scrollTo:function(i,n,o){if(!(0>o)){var s=n-t(e).scrollTop(),r=s/o*10;this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(r,10))||(e.scrollTo(0,t(e).scrollTop()+r),this.scrollTo(i,n,o-10))}.bind(this),10)}},scrollLeft:function(t){return t.length?"scrollLeft"in t[0]?t[0].scrollLeft:t[0].pageXOffset:void 0},empty:function(t){if(t.length&&t.length>0)return!1;if(t.length&&0===t.length)return!0;for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0}},fix_outer:function(t){t.outerHeight=function(t,e){return"function"==typeof Zepto?t.height():"undefined"!=typeof e?t.outerHeight(e):t.outerHeight()},t.outerWidth=function(t){return"function"==typeof Zepto?t.width():"undefined"!=typeof bool?t.outerWidth(bool):t.outerWidth()}},error:function(t){return t.name+" "+t.message+"; "+t.more},off:function(){return t(this.scope).off(".fndtn"),t(e).off(".fndtn"),!0},zj:function(){return"undefined"!=typeof Zepto?Zepto:jQuery}()},t.fn.foundation=function(){var t=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(t)),this})}}(libFuncName,this,this.document),function(t){"use strict";Foundation.libs.alerts={name:"alerts",version:"4.2.2",settings:{speed:300,callback:function(){}},init:function(e,i,n){return this.scope=e||this.scope,"object"==typeof i&&t.extend(!0,this.settings,i),"string"!=typeof i?(this.settings.init||this.events(),this.settings.init):this[i].call(this,n)},events:function(){var e=this;t(this.scope).on("click.fndtn.alerts","[data-alert] a.close",function(i){i.preventDefault(),t(this).closest("[data-alert]").fadeOut(e.speed,function(){t(this).remove(),e.settings.callback()})}),this.settings.init=!0},off:function(){t(this.scope).off(".fndtn.alerts")},reflow:function(){}}}(Foundation.zj,this,this.document),function(t,e,i,n){"use strict";Foundation.libs.clearing={name:"clearing",version:"4.2.2",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><img src="//:0"><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close",init:!1,locked:!1},init:function(e,i,n){var o=this;return Foundation.inherit(this,"set_data get_data remove_data throttle data_options"),"object"==typeof i&&(n=t.extend(!0,this.settings,i)),"string"!=typeof i?(t(this.scope).find("ul[data-clearing]").each(function(){var e=t(this),i=i||{},n=e.find("li"),s=o.get_data(e);!s&&n.length>0&&(i.$parent=e.parent(),o.set_data(e,t.extend({},o.settings,i,o.data_options(e))),o.assemble(e.find("li")),o.settings.init||o.events().swipe_events())}),this.settings.init):this[i].call(this,n)},events:function(){var i=this;return t(this.scope).on("click.fndtn.clearing","ul[data-clearing] li",function(e,n,o){var n=n||t(this),o=o||n,s=n.next("li"),r=i.get_data(n.parent()),a=t(e.target);e.preventDefault(),r||i.init(),o.hasClass("visible")&&n[0]===o[0]&&s.length>0&&i.is_open(n)&&(o=s,a=o.find("img")),i.open(a,n,o),i.update_paddles(o)}).on("click.fndtn.clearing",".clearing-main-next",function(t){this.nav(t,"next")}.bind(this)).on("click.fndtn.clearing",".clearing-main-prev",function(t){this.nav(t,"prev")}.bind(this)).on("click.fndtn.clearing",this.settings.close_selectors,function(t){Foundation.libs.clearing.close(t,this)}).on("keydown.fndtn.clearing",function(t){this.keydown(t)}.bind(this)),t(e).on("resize.fndtn.clearing",function(){this.resize()}.bind(this)),this.settings.init=!0,this},swipe_events:function(){var e=this;t(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(e){e.touches||(e=e.originalEvent);var i={start_page_x:e.touches[0].pageX,start_page_y:e.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:n};t(this).data("swipe-transition",i),e.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(i){if(i.touches||(i=i.originalEvent),!(i.touches.length>1||i.scale&&1!==i.scale)){var n=t(this).data("swipe-transition");if("undefined"==typeof n&&(n={}),n.delta_x=i.touches[0].pageX-n.start_page_x,"undefined"==typeof n.is_scrolling&&(n.is_scrolling=!!(n.is_scrolling||Math.abs(n.delta_x)<Math.abs(i.touches[0].pageY-n.start_page_y))),!n.is_scrolling&&!n.active){i.preventDefault();var o=n.delta_x<0?"next":"prev";n.active=!0,e.nav(i,o)}}}).on("touchend.fndtn.clearing",".visible-img",function(e){t(this).data("swipe-transition",{}),e.stopPropagation()})},assemble:function(e){var i=e.parent();i.after('<div id="foundationClearingHolder"></div>');var n=t("#foundationClearingHolder"),o=this.get_data(i),s=i.detach(),r={grid:'<div class="carousel">'+this.outerHTML(s[0])+"</div>",viewing:o.templates.viewing},a='<div class="clearing-assembled"><div>'+r.viewing+r.grid+"</div></div>";return n.after(a).remove()},open:function(t,e,i){var n=i.closest(".clearing-assembled"),o=n.find("div").first(),s=o.find(".visible-img"),r=s.find("img").not(t);this.locked()||(r.attr("src",this.load(t)).css("visibility","hidden"),this.loaded(r,function(){r.css("visibility","visible"),n.addClass("clearing-blackout"),o.addClass("clearing-container"),s.show(),this.fix_height(i).caption(s.find(".clearing-caption"),t).center(r).shift(e,i,function(){i.siblings().removeClass("visible"),i.addClass("visible")})}.bind(this)))},close:function(e,i){e.preventDefault();var n,o,s=function(t){return/blackout/.test(t.selector)?t:t.closest(".clearing-blackout")}(t(i));return i===e.target&&s&&(n=s.find("div").first(),o=n.find(".visible-img"),this.settings.prev_index=0,s.find("ul[data-clearing]").attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),n.removeClass("clearing-container"),o.hide()),!1},is_open:function(t){return t.parent().attr("style").length>0},keydown:function(e){var i=t(".clearing-blackout").find("ul[data-clearing]");39===e.which&&this.go(i,"next"),37===e.which&&this.go(i,"prev"),27===e.which&&t("a.clearing-close").trigger("click")},nav:function(e,i){var n=t(".clearing-blackout").find("ul[data-clearing]");e.preventDefault(),this.go(n,i)},resize:function(){var e=t(".clearing-blackout .visible-img").find("img");e.length&&this.center(e)},fix_height:function(e){var i=e.parent().children(),n=this;return i.each(function(){var e=t(this),i=e.find("img");e.height()>n.outerHeight(i)&&e.addClass("fix-height")}).closest("ul").width(100*i.length+"%"),this},update_paddles:function(t){var e=t.closest(".carousel").siblings(".visible-img");t.next().length>0?e.find(".clearing-main-next").removeClass("disabled"):e.find(".clearing-main-next").addClass("disabled"),t.prev().length>0?e.find(".clearing-main-prev").removeClass("disabled"):e.find(".clearing-main-prev").addClass("disabled")},center:function(t){return t.css(this.rtl?{marginRight:-(this.outerWidth(t)/2),marginTop:-(this.outerHeight(t)/2)}:{marginLeft:-(this.outerWidth(t)/2),marginTop:-(this.outerHeight(t)/2)}),this},load:function(t){if("A"===t[0].nodeName)var e=t.attr("href");else var e=t.parent().attr("href");return this.preload(t),e?e:t.attr("src")},preload:function(t){this.img(t.closest("li").next()).img(t.closest("li").prev())},loaded:function(t,e){function i(){e()}function n(){if(this.one("load",i),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var t=this.attr("src"),e=t.match(/\?/)?"&":"?";e+="random="+(new Date).getTime(),this.attr("src",t+e)}}return t.attr("src")?void(t[0].complete||4===t[0].readyState?i():n.call(t)):void i()},img:function(t){if(t.length){var e=new Image,i=t.find("a");e.src=i.length?i.attr("href"):t.find("img").attr("src")}return this},caption:function(t,e){var i=e.data("caption");return i?t.html(i).show():t.text("").hide(),this},go:function(t,e){var i=t.find(".visible"),n=i[e]();n.length&&n.find("img").trigger("click",[i,n])},shift:function(t,e,i){var n,o=e.parent(),s=this.settings.prev_index||e.index(),r=this.direction(o,t,e),a=parseInt(o.css("left"),10),l=this.outerWidth(e);e.index()===s||/skip/.test(r)?/skip/.test(r)&&(n=e.index()-this.settings.up_count,this.lock(),n>0?o.animate({left:-(n*l)},300,this.unlock()):o.animate({left:0},300,this.unlock())):/left/.test(r)?(this.lock(),o.animate({left:a+l},300,this.unlock())):/right/.test(r)&&(this.lock(),o.animate({left:a-l},300,this.unlock())),i()},direction:function(e,i,n){var o,s=e.find("li"),r=this.outerWidth(s)+this.outerWidth(s)/4,a=Math.floor(this.outerWidth(t(".clearing-container"))/r)-1,l=s.index(n);return this.settings.up_count=a,o=this.adjacent(this.settings.prev_index,l)?l>a&&l>this.settings.prev_index?"right":l>a-1&&l<=this.settings.prev_index?"left":!1:"skip",this.settings.prev_index=l,o},adjacent:function(t,e){for(var i=e+1;i>=e-1;i--)if(i===t)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},outerHTML:function(t){return t.outerHTML||(new XMLSerializer).serializeToString(t)},off:function(){t(this.scope).off(".fndtn.clearing"),t(e).off(".fndtn.clearing"),this.remove_data(),this.settings.init=!1},reflow:function(){this.init()}}}(Foundation.zj,this,this.document),/*!
 * jQuery Cookie Plugin v1.3
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 *
 * Modified to work with Zepto.js by ZURB
 */
function(t,e,i){function n(t){return t}function o(t){return decodeURIComponent(t.replace(s," "))}var s=/\+/g,r=t.cookie=function(s,a,l){if(a!==i){if(l=t.extend({},r.defaults,l),null===a&&(l.expires=-1),"number"==typeof l.expires){var c=l.expires,h=l.expires=new Date;h.setDate(h.getDate()+c)}return a=r.json?JSON.stringify(a):String(a),e.cookie=[encodeURIComponent(s),"=",r.raw?a:encodeURIComponent(a),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var u=r.raw?n:o,d=e.cookie.split("; "),p=0,f=d.length;f>p;p++){var m=d[p].split("=");if(u(m.shift())===s){var g=u(m.join("="));return r.json?JSON.parse(g):g}}return null};r.defaults={},t.removeCookie=function(e,i){return null!==t.cookie(e)?(t.cookie(e,null,i),!0):!1}}(Foundation.zj,document),function(t,e){"use strict";Foundation.libs.dropdown={name:"dropdown",version:"4.2.0",settings:{activeClass:"open",is_hover:!1,opened:function(){},closed:function(){}},init:function(e,i,n){return this.scope=e||this.scope,Foundation.inherit(this,"throttle scrollLeft data_options"),"object"==typeof i&&t.extend(!0,this.settings,i),"string"!=typeof i?(this.settings.init||this.events(),this.settings.init):this[i].call(this,n)},events:function(){var i=this;t(this.scope).on("click.fndtn.dropdown","[data-dropdown]",function(e){var n=t.extend({},i.settings,i.data_options(t(this)));e.preventDefault(),n.is_hover||i.toggle(t(this))}).on("mouseenter","[data-dropdown]",function(){var e=t.extend({},i.settings,i.data_options(t(this)));e.is_hover&&i.toggle(t(this))}).on("mouseleave","[data-dropdown-content]",function(){var e=t('[data-dropdown="'+t(this).attr("id")+'"]'),n=t.extend({},i.settings,i.data_options(e));n.is_hover&&i.close.call(i,t(this))}).on("opened.fndtn.dropdown","[data-dropdown-content]",this.settings.opened).on("closed.fndtn.dropdown","[data-dropdown-content]",this.settings.closed),t("body").on("click.fndtn.dropdown",function(e){var n=t(e.target).closest("[data-dropdown-content]");if(!t(e.target).data("dropdown"))return n.length>0&&(t(e.target).is("[data-dropdown-content]")||t.contains(n.first()[0],e.target))?void e.stopPropagation():void i.close.call(i,t("[data-dropdown-content]"))}),t(e).on("resize.fndtn.dropdown",i.throttle(function(){i.resize.call(i)},50)).trigger("resize"),this.settings.init=!0},close:function(e){var i=this;e.each(function(){t(this).hasClass(i.settings.activeClass)&&(t(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(i.settings.activeClass),t(this).trigger("closed"))})},open:function(t,e){this.css(t.addClass(this.settings.activeClass),e),t.trigger("opened")},toggle:function(e){var i=t("#"+e.data("dropdown"));this.close.call(this,t("[data-dropdown-content]").not(i)),i.hasClass(this.settings.activeClass)?this.close.call(this,i):(this.close.call(this,t("[data-dropdown-content]")),this.open.call(this,i,e))},resize:function(){var e=t("[data-dropdown-content].open"),i=t("[data-dropdown='"+e.attr("id")+"']");e.length&&i.length&&this.css(e,i)},css:function(i,n){var o=i.offsetParent();if(o.length>0&&/body/i.test(i.offsetParent()[0].nodeName)){var s=n.offset();s.top-=i.offsetParent().offset().top,s.left-=i.offsetParent().offset().left}else var s=n.position();if(this.small())i.css({position:"absolute",width:"95%",left:"2.5%","max-width":"none",top:s.top+this.outerHeight(n)});else{if(!Foundation.rtl&&t(e).width()>this.outerWidth(i)+n.offset().left){var r=s.left;i.hasClass("right")&&i.removeClass("right")}else{i.hasClass("right")||i.addClass("right");var r=s.left-(this.outerWidth(i)-this.outerWidth(n))}i.attr("style","").css({position:"absolute",top:s.top+this.outerHeight(n),left:r})}return i},small:function(){return t(e).width()<768||t("html").hasClass("lt-ie9")},off:function(){t(this.scope).off(".fndtn.dropdown"),t("html, body").off(".fndtn.dropdown"),t(e).off(".fndtn.dropdown"),t("[data-dropdown-content]").off(".fndtn.dropdown"),this.settings.init=!1},reflow:function(){}}}(Foundation.zj,this,this.document),function(t,e,i,n){"use strict";Foundation.libs.forms={name:"forms",version:"4.2.3",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(e,i,n){return"object"==typeof i&&t.extend(!0,this.settings,i),"string"!=typeof i?(this.settings.init||this.events(),this.assemble(),this.settings.init):this[i].call(this,n)},assemble:function(){t('form.custom input[type="radio"]',t(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(this.append_custom_markup),t('form.custom input[type="checkbox"]',t(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(this.append_custom_markup),t("form.custom select",t(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var n=this;t(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(e){e.preventDefault(),e.stopPropagation(),n.toggle_checkbox(t(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(e){e.preventDefault(),e.stopPropagation(),n.toggle_radio(t(this))}).on("change.fndtn.forms","form.custom select",function(e,i){t(this).is('[data-customforms="disabled"]')||n.refresh_custom_select(t(this),i)}).on("click.fndtn.forms","form.custom label",function(e){if(t(e.target).is("label")){var i,o,s=t("#"+n.escape(t(this).attr("for"))).not('[data-customforms="disabled"]');0!==s.length&&("checkbox"===s.attr("type")?(e.preventDefault(),i=t(this).find("span.custom.checkbox"),0===i.length&&(i=s.add(this).siblings("span.custom.checkbox").first()),n.toggle_checkbox(i)):"radio"===s.attr("type")&&(e.preventDefault(),o=t(this).find("span.custom.radio"),0===o.length&&(o=s.add(this).siblings("span.custom.radio").first()),n.toggle_radio(o)))}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return!1}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(e){var i=t(this),s=i.closest("div.custom.dropdown"),r=o(s,"select");return s.hasClass("open")||t(n.scope).trigger("click"),e.preventDefault(),!1===r.is(":disabled")?(s.toggleClass("open"),s.hasClass("open")?t(n.scope).on("click.fndtn.forms.customdropdown",function(){s.removeClass("open"),t(n.scope).off(".fndtn.forms.customdropdown")}):t(n.scope).on(".fndtn.forms.customdropdown"),!1):void 0}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(e){var i=t(this),n=i.closest("div.custom.dropdown"),s=o(n,"select"),r=0;if(e.preventDefault(),e.stopPropagation(),!t(this).hasClass("disabled")){t("div.dropdown").not(n).removeClass("open");var a=i.closest("ul").find("li.selected");a.removeClass("selected"),i.addClass("selected"),n.removeClass("open").find("a.current").text(i.text()),i.closest("ul").find("li").each(function(t){i[0]===this&&(r=t)}),s[0].selectedIndex=r,s.data("prevalue",a.html()),s.trigger("change")}}),t(e).on("keydown",function(e){var n=(i.activeElement,Foundation.libs.forms),o=t(".custom.dropdown.open");if(o.length>0){if(e.preventDefault(),13===e.which&&o.find("li.selected").trigger("click"),27===e.which&&o.removeClass("open"),e.which>=65&&e.which<=90){var s=n.go_to(o,e.which),r=o.find("li.selected");s&&(r.removeClass("selected"),n.scrollTo(s.addClass("selected"),300))}if(38===e.which){var r=o.find("li.selected"),a=r.prev(":not(.disabled)");a.length>0&&(a.parent()[0].scrollTop=a.parent().scrollTop()-n.outerHeight(a),r.removeClass("selected"),a.addClass("selected"))}else if(40===e.which){var r=o.find("li.selected"),s=r.next(":not(.disabled)");s.length>0&&(s.parent()[0].scrollTop=s.parent().scrollTop()+n.outerHeight(s),r.removeClass("selected"),s.addClass("selected"))}}}),this.settings.init=!0},go_to:function(t,e){var i=t.find("li"),n=i.length;if(n>0)for(var o=0;n>o;o++){var s=i.eq(o).text().charAt(0).toLowerCase();if(s===String.fromCharCode(e).toLowerCase())return i.eq(o)}},scrollTo:function(t,e){if(!(0>e)){var i=t.parent(),n=this.outerHeight(t),o=n*t.index()-i.scrollTop(),s=o/e*10;this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(s,10))||(i[0].scrollTop=i.scrollTop()+s,this.scrollTo(t,e-10))}.bind(this),10)}},append_custom_markup:function(e,i){var n=t(i),o=n.attr("type"),s=n.next("span.custom."+o);n.parent().hasClass("switch")||n.addClass("hidden-field"),0===s.length&&(s=t('<span class="custom '+o+'"></span>').insertAfter(n)),s.toggleClass("checked",n.is(":checked")),s.toggleClass("disabled",n.is(":disabled"))},append_custom_select:function(e,i){var n,o=Foundation.libs.forms,s=t(i),r=s.next("div.custom.dropdown"),a=r.find("ul"),l=(r.find(".current"),r.find(".selector")),c=s.find("option"),h=c.filter(":selected"),u=s.attr("class")?s.attr("class").split(" "):[],d=0,p="",f=!1;if(0===r.length){var m=s.hasClass("small")?"small":s.hasClass("medium")?"medium":s.hasClass("large")?"large":s.hasClass("expand")?"expand":"";r=t('<div class="'+["custom","dropdown",m].concat(u).filter(function(t,e,i){return""===t?!1:i.indexOf(t)===e}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>'),l=r.find(".selector"),a=r.find("ul"),p=c.map(function(){var e=t(this).attr("class")?t(this).attr("class"):"";return"<li class='"+e+"'>"+t(this).html()+"</li>"}).get().join(""),a.append(p),f=r.prepend('<a href="#" class="current">'+h.html()+"</a>").find(".current"),s.after(r).addClass("hidden-field")}else p=c.map(function(){return"<li>"+t(this).html()+"</li>"}).get().join(""),a.html("").append(p);if(o.assign_id(s,r),r.toggleClass("disabled",s.is(":disabled")),n=a.find("li"),o.cache[r.data("id")]=n.length,c.each(function(e){this.selected&&(n.eq(e).addClass("selected"),f&&f.html(t(this).html())),t(this).is(":disabled")&&n.eq(e).addClass("disabled")}),!r.is(".small, .medium, .large, .expand")){r.addClass("open");var o=Foundation.libs.forms;o.hidden_fix.adjust(a),d=o.outerWidth(n)>d?o.outerWidth(n):d,Foundation.libs.forms.hidden_fix.reset(),r.removeClass("open")}},assign_id:function(t,e){var i=[+new Date,Foundation.random_str(5)].join("-");t.attr("data-id",i),e.attr("data-id",i)},refresh_custom_select:function(e,i){var n=this,o=0,s=e.next(),r=e.find("option"),a=s.find("li");(a.length!==this.cache[s.data("id")]||i)&&(s.find("ul").html(""),r.each(function(){var e=t("<li>"+t(this).html()+"</li>");s.find("ul").append(e)}),r.each(function(e){this.selected&&(s.find("li").eq(e).addClass("selected"),s.find(".current").html(t(this).html())),t(this).is(":disabled")&&s.find("li").eq(e).addClass("disabled")}),s.removeAttr("style").find("ul").removeAttr("style"),s.find("li").each(function(){s.addClass("open"),n.outerWidth(t(this))>o&&(o=n.outerWidth(t(this))),s.removeClass("open")}),a=s.find("li"),this.cache[s.data("id")]=a.length)},toggle_checkbox:function(t){var e=t.prev(),i=e[0];!1===e.is(":disabled")&&(i.checked=i.checked?!1:!0,t.toggleClass("checked"),e.trigger("change"))},toggle_radio:function(t){var e=t.prev(),i=e.closest("form.custom"),n=e[0];!1===e.is(":disabled")&&(i.find('input[type="radio"][name="'+this.escape(e.attr("name"))+'"]').next().not(t).removeClass("checked"),t.hasClass("checked")||t.toggleClass("checked"),n.checked=t.hasClass("checked"),e.trigger("change"))},escape:function(t){return t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},hidden_fix:{tmp:[],hidden:null,adjust:function(e){var i=this;i.hidden=e.parents(),i.hidden=i.hidden.add(e).filter(":hidden"),i.hidden.each(function(){var e=t(this);i.tmp.push(e.attr("style")),e.css({visibility:"hidden",display:"block"})})},reset:function(){var e=this;e.hidden.each(function(i){var o=t(this),s=e.tmp[i];s===n?o.removeAttr("style"):o.attr("style",s)}),e.tmp=[],e.hidden=null}},off:function(){t(this.scope).off(".fndtn.forms")},reflow:function(){}};var o=function(e,i){for(var e=e.prev();e.length;){if(e.is(i))return e;e=e.prev()}return t()}}(Foundation.zj,this,this.document),function(t,e,i,n){"use strict";Foundation.libs.joyride={name:"joyride",version:"4.2.2",defaults:{expose:!1,modal:!1,tipLocation:"bottom",nubPosition:"auto",scrollSpeed:300,timer:0,startTimerOnClick:!0,startOffset:0,nextButton:!0,tipAnimation:"fade",pauseAfter:[],exposed:[],tipAnimationFadeSpeed:300,cookieMonster:!1,cookieName:"joyride",cookieDomain:!1,cookieExpires:365,tipContainer:"body",postRideCallback:function(){},postStepCallback:function(){},preStepCallback:function(){},preRideCallback:function(){},postExposeCallback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',exposeCover:'<div class="joyride-expose-cover"></div>'},exposeAddClass:""},settings:{},init:function(e,i,n){return this.scope=e||this.scope,Foundation.inherit(this,"throttle data_options scrollTo scrollLeft delay"),"object"==typeof i?t.extend(!0,this.settings,this.defaults,i):t.extend(!0,this.settings,this.defaults,n),"string"!=typeof i?(this.settings.init||this.events(),this.settings.init):this[i].call(this,n)},events:function(){var i=this;t(this.scope).on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(t){t.preventDefault(),this.settings.$li.next().length<1?this.end():this.settings.timer>0?(clearTimeout(this.settings.automate),this.hide(),this.show(),this.startTimer()):(this.hide(),this.show())}.bind(this)).on("click.joyride",".joyride-close-tip",function(t){t.preventDefault(),this.end()}.bind(this)),t(e).on("resize.fndtn.joyride",i.throttle(function(){if(t("[data-joyride]").length>0&&i.settings.$next_tip){if(i.settings.exposed.length>0){var e=t(i.settings.exposed);e.each(function(){var e=t(this);i.un_expose(e),i.expose(e)})}i.is_phone()?i.pos_phone():i.pos_default(!1,!0)}},100)),this.settings.init=!0},start:function(){var e=this,i=t(this.scope).find("[data-joyride]"),n=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],o=n.length;this.settings.init||this.init(),this.settings.$content_el=i,this.settings.$body=t(this.settings.tipContainer),this.settings.body_offset=t(this.settings.tipContainer).position(),this.settings.$tip_content=this.settings.$content_el.find("> li"),this.settings.paused=!1,this.settings.attempts=0,this.settings.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},"function"!=typeof t.cookie&&(this.settings.cookieMonster=!1),(!this.settings.cookieMonster||this.settings.cookieMonster&&null===t.cookie(this.settings.cookieName))&&(this.settings.$tip_content.each(function(i){var s=t(this);t.extend(!0,e.settings,e.data_options(s));for(var r=o-1;r>=0;r--)e.settings[n[r]]=parseInt(e.settings[n[r]],10);e.create({$li:s,index:i})}),!this.settings.startTimerOnClick&&this.settings.timer>0?(this.show("init"),this.startTimer()):this.show("init"))},resume:function(){this.set_li(),this.show()},tip_template:function(e){var i,n;return e.tip_class=e.tip_class||"",i=t(this.settings.template.tip).addClass(e.tip_class),n=t.trim(t(e.li).html())+this.button_text(e.button_text)+this.settings.template.link+this.timer_instance(e.index),i.append(t(this.settings.template.wrapper)),i.first().attr("data-index",e.index),t(".joyride-content-wrapper",i).append(n),i[0]},timer_instance:function(e){var i;return i=0===e&&this.settings.startTimerOnClick&&this.settings.timer>0||0===this.settings.timer?"":this.outerHTML(t(this.settings.template.timer)[0])},button_text:function(e){return this.settings.nextButton?(e=t.trim(e)||"Next",e=this.outerHTML(t(this.settings.template.button).append(e)[0])):e="",e},create:function(e){var i=e.$li.attr("data-button")||e.$li.attr("data-text"),n=e.$li.attr("class"),o=t(this.tip_template({tip_class:n,index:e.index,button_text:i,li:e.$li}));t(this.settings.tipContainer).append(o)},show:function(e){var i=null;this.settings.$li===n||-1===t.inArray(this.settings.$li.index(),this.settings.pauseAfter)?(this.settings.paused?this.settings.paused=!1:this.set_li(e),this.settings.attempts=0,this.settings.$li.length&&this.settings.$target.length>0?(e&&(this.settings.preRideCallback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.show_modal()),this.settings.preStepCallback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.settings.expose&&this.expose(),this.settings.tipSettings=t.extend(this.settings,this.data_options(this.settings.$li)),this.settings.timer=parseInt(this.settings.timer,10),this.settings.tipSettings.tipLocationPattern=this.settings.tipLocationPatterns[this.settings.tipSettings.tipLocation],/body/i.test(this.settings.$target.selector)||this.scroll_to(),this.is_phone()?this.pos_phone(!0):this.pos_default(!0),i=this.settings.$next_tip.find(".joyride-timer-indicator"),/pop/i.test(this.settings.tipAnimation)?(i.width(0),this.settings.timer>0?(this.settings.$next_tip.show(),this.delay(function(){i.animate({width:i.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)):this.settings.$next_tip.show()):/fade/i.test(this.settings.tipAnimation)&&(i.width(0),this.settings.timer>0?(this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed).show(),this.delay(function(){i.animate({width:i.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)):this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed)),this.settings.$current_tip=this.settings.$next_tip):this.settings.$li&&this.settings.$target.length<1?this.show():this.end()):this.settings.paused=!0},is_phone:function(){return Modernizr?Modernizr.mq("only screen and (max-width: 767px)")||t(".lt-ie9").length>0:this.settings.$window.width()<767},hide:function(){this.settings.modal&&this.settings.expose&&this.un_expose(),this.settings.modal||t(".joyride-modal-bg").hide(),this.settings.$current_tip.hide(),this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip)},set_li:function(t){t?(this.settings.$li=this.settings.$tip_content.eq(this.settings.startOffset),this.set_next_tip(),this.settings.$current_tip=this.settings.$next_tip):(this.settings.$li=this.settings.$li.next(),this.set_next_tip()),this.set_target()},set_next_tip:function(){this.settings.$next_tip=t(".joyride-tip-guide[data-index='"+this.settings.$li.index()+"']"),this.settings.$next_tip.data("closed","")},set_target:function(){var e=this.settings.$li.attr("data-class"),n=this.settings.$li.attr("data-id"),o=function(){return n?t(i.getElementById(n)):e?t("."+e).first():t("body")};this.settings.$target=o()},scroll_to:function(){var i,n;i=t(e).height()/2,n=Math.ceil(this.settings.$target.offset().top-i+this.outerHeight(this.settings.$next_tip)),n>0&&this.scrollTo(t("html, body"),n,this.settings.scrollSpeed)},paused:function(){return-1===t.inArray(this.settings.$li.index()+1,this.settings.pauseAfter)},restart:function(){this.hide(),this.settings.$li=n,this.show("init")},pos_default:function(i,n){var o=(Math.ceil(t(e).height()/2),this.settings.$next_tip.offset(),this.settings.$next_tip.find(".joyride-nub")),s=Math.ceil(this.outerWidth(o)/2),r=Math.ceil(this.outerHeight(o)/2),a=i||!1;if(a&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),"undefined"==typeof n&&(n=!1),/body/i.test(this.settings.$target.selector))this.settings.$li.length&&this.pos_modal(o);else{if(this.bottom()){var l=this.settings.$target.offset().left;Foundation.rtl&&(l=this.settings.$target.offset().width-this.settings.$next_tip.width()+l),this.settings.$next_tip.css({top:this.settings.$target.offset().top+r+this.outerHeight(this.settings.$target),left:l}),this.nub_position(o,this.settings.tipSettings.nubPosition,"top")}else if(this.top()){var l=this.settings.$target.offset().left;Foundation.rtl&&(l=this.settings.$target.offset().width-this.settings.$next_tip.width()+l),this.settings.$next_tip.css({top:this.settings.$target.offset().top-this.outerHeight(this.settings.$next_tip)-r,left:l}),this.nub_position(o,this.settings.tipSettings.nubPosition,"bottom")}else this.right()?(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.outerWidth(this.settings.$target)+this.settings.$target.offset().left+s}),this.nub_position(o,this.settings.tipSettings.nubPosition,"left")):this.left()&&(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.settings.$target.offset().left-this.outerWidth(this.settings.$next_tip)-s}),this.nub_position(o,this.settings.tipSettings.nubPosition,"right"));!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tipSettings.tipLocationPattern.length&&(o.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),this.settings.tipSettings.tipLocation=this.settings.tipSettings.tipLocationPattern[this.settings.attempts],this.settings.attempts++,this.pos_default())}a&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_phone:function(e){var i=this.outerHeight(this.settings.$next_tip),n=(this.settings.$next_tip.offset(),this.outerHeight(this.settings.$target)),o=t(".joyride-nub",this.settings.$next_tip),s=Math.ceil(this.outerHeight(o)/2),r=e||!1;o.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),r&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(o):this.top()?(this.settings.$next_tip.offset({top:this.settings.$target.offset().top-i-s}),o.addClass("bottom")):(this.settings.$next_tip.offset({top:this.settings.$target.offset().top+n+s}),o.addClass("top")),r&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_modal:function(t){this.center(),t.hide(),this.show_modal()},show_modal:function(){if(!this.settings.$next_tip.data("closed")){var e=t(".joyride-modal-bg");e.length<1&&t("body").append(this.settings.template.modal).show(),/pop/i.test(this.settings.tipAnimation)?e.show():e.fadeIn(this.settings.tipAnimationFadeSpeed)}},expose:function(){var i,n,o,s,r,a="expose-"+Math.floor(1e4*Math.random());if(arguments.length>0&&arguments[0]instanceof t)o=arguments[0];else{if(!this.settings.$target||/body/i.test(this.settings.$target.selector))return!1;o=this.settings.$target}return o.length<1?(e.console&&console.error("element not valid",o),!1):(i=t(this.settings.template.expose),this.settings.$body.append(i),i.css({top:o.offset().top,left:o.offset().left,width:this.outerWidth(o,!0),height:this.outerHeight(o,!0)}),n=t(this.settings.template.exposeCover),s={zIndex:o.css("z-index"),position:o.css("position")},r=null==o.attr("class")?"":o.attr("class"),o.css("z-index",parseInt(i.css("z-index"))+1),"static"==s.position&&o.css("position","relative"),o.data("expose-css",s),o.data("orig-class",r),o.attr("class",r+" "+this.settings.exposeAddClass),n.css({top:o.offset().top,left:o.offset().left,width:this.outerWidth(o,!0),height:this.outerHeight(o,!0)}),this.settings.$body.append(n),i.addClass(a),n.addClass(a),o.data("expose",a),this.settings.postExposeCallback(this.settings.$li.index(),this.settings.$next_tip,o),void this.add_exposed(o))},un_expose:function(){var i,n,o,s,r,a=!1;if(arguments.length>0&&arguments[0]instanceof t)n=arguments[0];else{if(!this.settings.$target||/body/i.test(this.settings.$target.selector))return!1;n=this.settings.$target}return n.length<1?(e.console&&console.error("element not valid",n),!1):(i=n.data("expose"),o=t("."+i),arguments.length>1&&(a=arguments[1]),a===!0?t(".joyride-expose-wrapper,.joyride-expose-cover").remove():o.remove(),s=n.data("expose-css"),"auto"==s.zIndex?n.css("z-index",""):n.css("z-index",s.zIndex),s.position!=n.css("position")&&("static"==s.position?n.css("position",""):n.css("position",s.position)),r=n.data("orig-class"),n.attr("class",r),n.removeData("orig-classes"),n.removeData("expose"),n.removeData("expose-z-index"),void this.remove_exposed(n))},add_exposed:function(e){this.settings.exposed=this.settings.exposed||[],e instanceof t||"object"==typeof e?this.settings.exposed.push(e[0]):"string"==typeof e&&this.settings.exposed.push(e)},remove_exposed:function(e){var i,n;e instanceof t?i=e[0]:"string"==typeof e&&(i=e),this.settings.exposed=this.settings.exposed||[],n=this.settings.exposed.length;for(var o=0;n>o;o++)if(this.settings.exposed[o]==i)return void this.settings.exposed.splice(o,1)},center:function(){var i=t(e);return this.settings.$next_tip.css({top:(i.height()-this.outerHeight(this.settings.$next_tip))/2+i.scrollTop(),left:(i.width()-this.outerWidth(this.settings.$next_tip))/2+this.scrollLeft(i)}),!0},bottom:function(){return/bottom/i.test(this.settings.tipSettings.tipLocation)},top:function(){return/top/i.test(this.settings.tipSettings.tipLocation)},right:function(){return/right/i.test(this.settings.tipSettings.tipLocation)},left:function(){return/left/i.test(this.settings.tipSettings.tipLocation)},corners:function(i){var n=t(e),o=n.height()/2,s=Math.ceil(this.settings.$target.offset().top-o+this.settings.$next_tip.outerHeight()),r=n.width()+this.scrollLeft(n),a=n.height()+s,l=n.height()+n.scrollTop(),c=n.scrollTop();return c>s&&(c=0>s?0:s),a>l&&(l=a),[i.offset().top<c,r<i.offset().left+i.outerWidth(),l<i.offset().top+i.outerHeight(),this.scrollLeft(n)>i.offset().left]},visible:function(t){for(var e=t.length;e--;)if(t[e])return!1;return!0},nub_position:function(t,e,i){t.addClass("auto"===e?i:e)},startTimer:function(){this.settings.$li.length?this.settings.automate=setTimeout(function(){this.hide(),this.show(),this.startTimer()}.bind(this),this.settings.timer):clearTimeout(this.settings.automate)},end:function(){this.settings.cookieMonster&&t.cookie(this.settings.cookieName,"ridden",{expires:this.settings.cookieExpires,domain:this.settings.cookieDomain}),this.settings.timer>0&&clearTimeout(this.settings.automate),this.settings.modal&&this.settings.expose&&this.un_expose(),this.settings.$next_tip.data("closed",!0),t(".joyride-modal-bg").hide(),this.settings.$current_tip.hide(),this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip),this.settings.postRideCallback(this.settings.$li.index(),this.settings.$current_tip),t(".joyride-tip-guide").remove()},outerHTML:function(t){return t.outerHTML||(new XMLSerializer).serializeToString(t)},off:function(){t(this.scope).off(".joyride"),t(e).off(".joyride"),t(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),t(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(this.settings.automate),this.settings={}},reflow:function(){}}}(Foundation.zj,this,this.document),function(t,e){"use strict";Foundation.libs.magellan={name:"magellan",version:"4.2.2",settings:{activeClass:"active"},init:function(e,i,n){return this.scope=e||this.scope,Foundation.inherit(this,"data_options"),"object"==typeof i&&t.extend(!0,this.settings,i),"string"!=typeof i?(this.settings.init||(this.fixed_magellan=t("[data-magellan-expedition]"),this.set_threshold(),this.last_destination=t("[data-magellan-destination]").last(),this.events()),this.settings.init):this[i].call(this,n)},events:function(){var i=this;t(this.scope).on("arrival.fndtn.magellan","[data-magellan-arrival]",function(){var e=t(this),n=e.closest("[data-magellan-expedition]"),o=n.attr("data-magellan-active-class")||i.settings.activeClass;e.closest("[data-magellan-expedition]").find("[data-magellan-arrival]").not(e).removeClass(o),e.addClass(o)}),this.fixed_magellan.on("update-position.fndtn.magellan",function(){t(this)}).trigger("update-position"),t(e).on("resize.fndtn.magellan",function(){this.fixed_magellan.trigger("update-position")}.bind(this)).on("scroll.fndtn.magellan",function(){var n=t(e).scrollTop();i.fixed_magellan.each(function(){var e=t(this);"undefined"==typeof e.data("magellan-top-offset")&&e.data("magellan-top-offset",e.offset().top),"undefined"==typeof e.data("magellan-fixed-position")&&e.data("magellan-fixed-position",!1);var o=n+i.settings.threshold>e.data("magellan-top-offset"),s=e.attr("data-magellan-top-offset");e.data("magellan-fixed-position")!=o&&(e.data("magellan-fixed-position",o),o?(e.addClass("fixed"),e.css({position:"fixed",top:0})):(e.removeClass("fixed"),e.css({position:"",top:""})),o&&"undefined"!=typeof s&&0!=s&&e.css({position:"fixed",top:s+"px"}))})}),this.last_destination.length>0&&t(e).on("scroll.fndtn.magellan",function(){var n=t(e).scrollTop(),o=n+t(e).height(),s=Math.ceil(i.last_destination.offset().top);t("[data-magellan-destination]").each(function(){var e=t(this),r=e.attr("data-magellan-destination"),a=e.offset().top-n;a<=i.settings.threshold&&t("[data-magellan-arrival='"+r+"']").trigger("arrival"),o>=t(i.scope).height()&&s>n&&o>s&&t("[data-magellan-arrival]").last().trigger("arrival")})}),this.settings.init=!0},set_threshold:function(){this.settings.threshold||(this.settings.threshold=this.fixed_magellan.length>0?this.outerHeight(this.fixed_magellan,!0):0)},off:function(){t(this.scope).off(".fndtn.magellan")},reflow:function(){}}}(Foundation.zj,this,this.document),function(t,e,i,n){"use strict";Foundation.libs=Foundation.libs||{},Foundation.libs.orbit={name:"orbit",version:"4.2.0",settings:{timer_speed:1e4,pause_on_hover:!0,resume_on_mouseout:!1,animation_speed:500,bullets:!0,stack_on_small:!0,navigation_arrows:!0,slide_number:!0,container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning"},init:function(e,i){var n=this;if(Foundation.inherit(n,"data_options"),"object"==typeof i&&t.extend(!0,n.settings,i),t(e).is("[data-orbit]")){var o=t.extend(!0,{},n);o._init(idx,el)}t("[data-orbit]",e).each(function(e,i){var o=t.extend(!0,{},n);o._init(e,i)})},_container_html:function(){var t=this;return'<div class="'+t.settings.container_class+'"></div>'},_bullets_container_html:function(e){var i=this,n=t('<ol class="'+i.settings.bullets_container_class+'"></ol>');return e.each(function(e){var o=t('<li data-orbit-slide-number="'+(e+1)+'" class=""></li>');0===e&&o.addClass(i.settings.bullets_active_class),n.append(o)}),n},_slide_number_html:function(e,i){var n=this,o=t('<div class="'+n.settings.slide_number_class+'"></div>');return o.append("<span>"+e+"</span> of <span>"+i+"</span>"),o},_timer_html:function(){var t=this;return"number"==typeof t.settings.timer_speed&&t.settings.timer_speed>0?'<div class="'+t.settings.timer_container_class+'"><span></span><div class="'+t.settings.timer_progress_class+'"></div></div>':""},_next_html:function(){var t=this;return'<a href="#" class="'+t.settings.next_class+'">Next <span></span></a>'},_prev_html:function(){var t=this;return'<a href="#" class="'+t.settings.prev_class+'">Prev <span></span></a>'},_init:function(e,i){var n=this,o=t(i),s=o.wrap(n._container_html()).parent(),r=o.children();t.extend(!0,n.settings,n.data_options(o)),n.settings.navigation_arrows&&(s.append(n._prev_html()),s.append(n._next_html())),o.addClass(n.settings.slides_container_class),n.settings.stack_on_small&&s.addClass(n.settings.stack_on_small_class),n.settings.slide_number&&s.append(n._slide_number_html(1,r.length)),s.append(n._timer_html()),n.settings.bullets&&s.after(n._bullets_container_html(r)),o.append(r.first().clone().attr("data-orbit-slide","")),o.prepend(r.last().clone().attr("data-orbit-slide","")),o.css(Foundation.rtl?"marginRight":"marginLeft","-100%"),r.first().addClass(n.settings.active_slide_class),n._init_events(o),n._init_dimensions(o),n._start_timer(o)},_init_events:function(o){var s=this,r=o.parent();t(e).on("load.fndtn.orbit",function(){o.height(""),o.height(o.height(r.height())),o.trigger("orbit:ready")}).on("resize.fndtn.orbit",function(){o.height(""),o.height(o.height(r.height()))}),t(i).on("click.fndtn.orbit","[data-orbit-link]",function(e){e.preventDefault();var i=t(e.currentTarget).attr("data-orbit-link"),n=o.find("[data-orbit-slide="+i+"]").first();1===n.length&&(s._reset_timer(o,!0),s._goto(o,n.index(),function(){}))}),r.siblings("."+s.settings.bullets_container_class).on("click.fndtn.orbit","[data-orbit-slide-number]",function(e){e.preventDefault(),s._reset_timer(o,!0),s._goto(o,t(e.currentTarget).data("orbit-slide-number"),function(){})
}),r.on("mouseenter.fndtn.orbit",function(){s.settings.pause_on_hover&&s._stop_timer(o)}).on("mouseleave.fndtn.orbit",function(){s.settings.resume_on_mouseout&&s._start_timer(o)}).on("orbit:after-slide-change.fndtn.orbit",function(t,e){var i=r.find("."+s.settings.slide_number_class);1===i.length&&i.replaceWith(s._slide_number_html(e.slide_number,e.total_slides))}).on("orbit:next-slide.fndtn.orbit click.fndtn.orbit","."+s.settings.next_class.split(" ").join("."),function(t){t.preventDefault(),s._reset_timer(o,!0),s._goto(o,"next",function(){})}).on("orbit:prev-slide.fndtn.orbit click.fndtn.orbit","."+s.settings.prev_class.split(" ").join("."),function(t){t.preventDefault(),s._reset_timer(o,!0),s._goto(o,"prev",function(){})}).on("orbit:toggle-play-pause.fndtn.orbit click.fndtn.orbit touchstart.fndtn.orbit","."+s.settings.timer_container_class,function(e){e.preventDefault();var i=t(e.currentTarget).toggleClass(s.settings.timer_paused_class),n=i.closest("."+s.settings.container_class).find("."+s.settings.slides_container_class);i.hasClass(s.settings.timer_paused_class)?s._stop_timer(n):s._start_timer(n)}).on("touchstart.fndtn.orbit",function(t){t.touches||(t=t.originalEvent);var e={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:n};r.data("swipe-transition",e),t.stopPropagation()}).on("touchmove.fndtn.orbit",function(t){if(t.touches||(t=t.originalEvent),!(t.touches.length>1||t.scale&&1!==t.scale)){var e=r.data("swipe-transition");if("undefined"==typeof e&&(e={}),e.delta_x=t.touches[0].pageX-e.start_page_x,"undefined"==typeof e.is_scrolling&&(e.is_scrolling=!!(e.is_scrolling||Math.abs(e.delta_x)<Math.abs(t.touches[0].pageY-e.start_page_y))),!e.is_scrolling&&!e.active){t.preventDefault(),s._stop_timer(o);var i=e.delta_x<0?"next":"prev";e.active=!0,s._goto(o,i,function(){})}}}).on("touchend.fndtn.orbit",function(t){r.data("swipe-transition",{}),t.stopPropagation()})},_init_dimensions:function(t){var e=t.parent(),i=t.children();t.css("width",100*i.length+"%"),i.css("width",100/i.length+"%"),t.height(e.height()),t.css("width",100*i.length+"%")},_start_timer:function(t){var e=this,i=t.parent(),n=function(){e._reset_timer(t,!1),e._goto(t,"next",function(){e._start_timer(t)})},o=i.find("."+e.settings.timer_container_class),s=o.find("."+e.settings.timer_progress_class),r=s.width()/o.width(),a=e.settings.timer_speed-r*e.settings.timer_speed;s.animate({width:"100%"},a,"linear",n),t.trigger("orbit:timer-started")},_stop_timer:function(t){var e=this,i=t.parent(),n=i.find("."+e.settings.timer_container_class),o=n.find("."+e.settings.timer_progress_class),s=o.width()/n.width();e._rebuild_timer(i,100*s+"%"),t.trigger("orbit:timer-stopped"),n=i.find("."+e.settings.timer_container_class),n.addClass(e.settings.timer_paused_class)},_reset_timer:function(t,e){var i=this,n=t.parent();if(i._rebuild_timer(n,"0%"),"boolean"==typeof e&&e){var o=n.find("."+i.settings.timer_container_class);o.addClass(i.settings.timer_paused_class)}},_rebuild_timer:function(e,i){var n=this,o=e.find("."+n.settings.timer_container_class),s=t(n._timer_html()),r=s.find("."+n.settings.timer_progress_class);if("function"==typeof Zepto)o.remove(),e.append(s),r.css("width",i);else if("function"==typeof jQuery){var a=o.find("."+n.settings.timer_progress_class);a.css("width",i),a.stop()}},_goto:function(e,i,n){var o=this,s=e.parent(),r=e.children(),a=e.find("."+o.settings.active_slide_class),l=a.index(),c=Foundation.rtl?"marginRight":"marginLeft";if(s.hasClass(o.settings.orbit_transition_class))return!1;"prev"===i?0===l?l=r.length-1:l--:"next"===i?l=(l+1)%r.length:"number"==typeof i&&(l=i%r.length),l===r.length-1&&"next"===i?(e.css(c,"0%"),l=1):0===l&&"prev"===i&&(e.css(c,"-"+100*(r.length-1)+"%"),l=r.length-2),s.addClass(o.settings.orbit_transition_class),a.removeClass(o.settings.active_slide_class),t(r[l]).addClass(o.settings.active_slide_class);var h=s.siblings("."+o.settings.bullets_container_class);1===h.length&&(h.children().removeClass(o.settings.bullets_active_class),t(h.children()[l-1]).addClass(o.settings.bullets_active_class));var u="-"+100*l+"%";if(e.trigger("orbit:before-slide-change"),e.css(c)===u)s.removeClass(o.settings.orbit_transition_class),e.trigger("orbit:after-slide-change",[{slide_number:l,total_slides:e.children().length-2}]),n();else{var d={};d[c]=u,e.animate(d,o.settings.animation_speed,"linear",function(){s.removeClass(o.settings.orbit_transition_class),e.trigger("orbit:after-slide-change",[{slide_number:l,total_slides:e.children().length-2}]),n()})}}}}(Foundation.zj,this,this.document),function(t,e,i,n){"use strict";Foundation.libs.reveal={name:"reveal",version:"4.2.2",locked:!1,settings:{animation:"fadeAndPop",animationSpeed:250,closeOnBackgroundClick:!0,closeOnEsc:!0,dismissModalClass:"close-reveal-modal",bgClass:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:t(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,i,n){return Foundation.inherit(this,"data_options delay"),"object"==typeof i?t.extend(!0,this.settings,i):"undefined"!=typeof n&&t.extend(!0,this.settings,n),"string"!=typeof i?(this.events(),this.settings.init):this[i].call(this,n)},events:function(){var e=this;return t(this.scope).off(".fndtn.reveal").on("click.fndtn.reveal","[data-reveal-id]",function(i){if(i.preventDefault(),!e.locked){var n=t(this),o=n.data("reveal-ajax");if(e.locked=!0,"undefined"==typeof o)e.open.call(e,n);else{var s=o===!0?n.attr("href"):o;e.open.call(e,n,{url:s})}}}).on("click.fndtn.reveal",this.close_targets(),function(i){if(i.preventDefault(),!e.locked){var n=t.extend({},e.settings,e.data_options(t(".reveal-modal.open")));if(t(i.target)[0]===t("."+n.bgClass)[0]&&!n.closeOnBackgroundClick)return;e.locked=!0,e.close.call(e,t(this).closest(".reveal-modal"))}}).on("open.fndtn.reveal",".reveal-modal",this.settings.open).on("opened.fndtn.reveal",".reveal-modal",this.settings.opened).on("opened.fndtn.reveal",".reveal-modal",this.open_video).on("close.fndtn.reveal",".reveal-modal",this.settings.close).on("closed.fndtn.reveal",".reveal-modal",this.settings.closed).on("closed.fndtn.reveal",".reveal-modal",this.close_video),t("body").bind("keyup.reveal",function(i){var n=t(".reveal-modal.open"),o=t.extend({},e.settings,e.data_options(n));27===i.which&&o.closeOnEsc&&n.foundation("reveal","close")}),!0},open:function(e,i){if(e)if("undefined"!=typeof e.selector)var n=t("#"+e.data("reveal-id"));else{var n=t(this.scope);i=e}else var n=t(this.scope);if(!n.hasClass("open")){var o=t(".reveal-modal.open");if("undefined"==typeof n.data("css-top")&&n.data("css-top",parseInt(n.css("top"),10)).data("offset",this.cache_offset(n)),n.trigger("open"),o.length<1&&this.toggle_bg(n),"undefined"!=typeof i&&i.url){var s=this,r="undefined"!=typeof i.success?i.success:null;t.extend(i,{success:function(e,i,a){t.isFunction(r)&&r(e,i,a),n.html(e),t(n).foundation("section","reflow"),s.hide(o,s.settings.css.close),s.show(n,s.settings.css.open)}}),t.ajax(i)}else this.hide(o,this.settings.css.close),this.show(n,this.settings.css.open)}},close:function(e){var e=e&&e.length?e:t(this.scope),i=t(".reveal-modal.open");i.length>0&&(this.locked=!0,e.trigger("close"),this.toggle_bg(e),this.hide(i,this.settings.css.close))},close_targets:function(){var t="."+this.settings.dismissModalClass;return this.settings.closeOnBackgroundClick?t+", ."+this.settings.bgClass:t},toggle_bg:function(){0===t(".reveal-modal-bg").length&&(this.settings.bg=t("<div />",{"class":this.settings.bgClass}).appendTo("body")),this.settings.bg.filter(":visible").length>0?this.hide(this.settings.bg):this.show(this.settings.bg)},show:function(i,n){if(n){if(/pop/i.test(this.settings.animation)){n.top=t(e).scrollTop()-i.data("offset")+"px";var o={top:t(e).scrollTop()+i.data("css-top")+"px",opacity:1};return this.delay(function(){return i.css(n).animate(o,this.settings.animationSpeed,"linear",function(){this.locked=!1,i.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var o={opacity:1};return this.delay(function(){return i.css(n).animate(o,this.settings.animationSpeed,"linear",function(){this.locked=!1,i.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}return i.css(n).show().css({opacity:1}).addClass("open").trigger("opened")}return/fade/i.test(this.settings.animation)?i.fadeIn(this.settings.animationSpeed/2):i.show()},hide:function(i,n){if(n){if(/pop/i.test(this.settings.animation)){var o={top:-t(e).scrollTop()-i.data("offset")+"px",opacity:0};return this.delay(function(){return i.animate(o,this.settings.animationSpeed,"linear",function(){this.locked=!1,i.css(n).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var o={opacity:0};return this.delay(function(){return i.animate(o,this.settings.animationSpeed,"linear",function(){this.locked=!1,i.css(n).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}return i.hide().css(n).removeClass("open").trigger("closed")}return/fade/i.test(this.settings.animation)?i.fadeOut(this.settings.animationSpeed/2):i.hide()},close_video:function(){var e=t(this).find(".flex-video"),i=e.find("iframe");i.length>0&&(i.attr("data-src",i[0].src),i.attr("src","about:blank"),e.hide())},open_video:function(){var e=t(this).find(".flex-video"),i=e.find("iframe");if(i.length>0){var o=i.attr("data-src");if("string"==typeof o)i[0].src=i.attr("data-src");else{var s=i[0].src;i[0].src=n,i[0].src=s}e.show()}},cache_offset:function(t){var e=t.show().height()+parseInt(t.css("top"),10);return t.hide(),e},off:function(){t(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(Foundation.zj,this,this.document),function(t,e,i){"use strict";Foundation.libs.section={name:"section",version:"4.2.3",settings:{deep_linking:!1,small_breakpoint:768,one_up:!0,section_selector:"[data-section]",region_selector:"section, .section, [data-section-region]",title_selector:".title, [data-section-title]",active_region_selector:"section.active, .section.active, .active[data-section-region]",content_selector:".content, [data-section-content]",nav_selector:'[data-section="vertical-nav"], [data-section="horizontal-nav"]',callback:function(){}},init:function(e,i,n){var o=this;return Foundation.inherit(this,"throttle data_options position_right offset_right"),"object"==typeof i&&t.extend(!0,o.settings,i),"string"!=typeof i?(this.set_active_from_hash(),this.events(),!0):this[i].call(this,n)},events:function(){var n=this;t(this.scope).on("click.fndtn.section","[data-section] .title, [data-section] [data-section-title]",function(e){var i=t(this),o=i.closest(n.settings.region_selector);o.children(n.settings.content_selector).length>0&&(n.toggle_active.call(this,e,n),n.reflow())}),t(e).on("resize.fndtn.section",n.throttle(function(){n.resize.call(this)},30)).on("hashchange",function(){n.settings.toggled||(n.set_active_from_hash(),t(this).trigger("resize"))}).trigger("resize"),t(i).on("click.fndtn.section",function(e){t(e.target).closest(n.settings.title_selector).length<1&&t(n.settings.nav_selector).children(n.settings.region_selector).removeClass("active").attr("style","")})},toggle_active:function(e,i){var n=t(this),i=Foundation.libs.section,o=n.closest(i.settings.region_selector),s=n.siblings(i.settings.content_selector),r=o.parent(),a=t.extend({},i.settings,i.data_options(r)),l=r.children(i.settings.active_region_selector);if(i.settings.toggled=!0,!a.deep_linking&&s.length>0&&e.preventDefault(),o.hasClass("active"))(i.small(r)||i.is_vertical_nav(r)||i.is_horizontal_nav(r)||i.is_accordion(r))&&(l[0]!==o[0]||l[0]===o[0]&&!a.one_up)&&o.removeClass("active").attr("style","");else{var l=r.children(i.settings.active_region_selector),c=i.outerHeight(o.children(i.settings.title_selector));(i.small(r)||a.one_up)&&(i.small(r)?l.attr("style",""):l.attr("style","visibility: hidden; padding-top: "+c+"px;")),i.small(r)?o.attr("style",""):o.css("padding-top",c),o.addClass("active"),l.length>0&&l.removeClass("active").attr("style",""),i.is_vertical_tabs(r)&&(s.css("display","block"),null!==l&&l.children(i.settings.content_selector).css("display","none"))}setTimeout(function(){i.settings.toggled=!1},300),a.callback()},resize:function(){var e=Foundation.libs.section,i=t(e.settings.section_selector);i.each(function(){var i=t(this),n=i.children(e.settings.active_region_selector),o=t.extend({},e.settings,e.data_options(i));if(n.length>1)n.not(":first").removeClass("active").attr("style","");else if(n.length<1&&!e.is_vertical_nav(i)&&!e.is_horizontal_nav(i)&&!e.is_accordion(i)){var s=i.children(e.settings.region_selector).first();(o.one_up||!e.small(i))&&s.addClass("active"),e.small(i)?s.attr("style",""):s.css("padding-top",e.outerHeight(s.children(e.settings.title_selector)))}e.small(i)?n.attr("style",""):n.css("padding-top",e.outerHeight(n.children(e.settings.title_selector))),e.position_titles(i),e.is_horizontal_nav(i)&&!e.small(i)||e.is_vertical_tabs(i)&&!e.small(i)?e.position_content(i):e.position_content(i,!1)})},is_vertical_nav:function(t){return/vertical-nav/i.test(t.data("section"))},is_horizontal_nav:function(t){return/horizontal-nav/i.test(t.data("section"))},is_accordion:function(t){return/accordion/i.test(t.data("section"))},is_horizontal_tabs:function(t){return/^tabs$/i.test(t.data("section"))},is_vertical_tabs:function(t){return/vertical-tabs/i.test(t.data("section"))},set_active_from_hash:function(){var i=e.location.hash.substring(1),n=t("[data-section]"),o=this;n.each(function(){var e=t(this),n=t.extend({},o.settings,o.data_options(e));if(i.length>0&&n.deep_linking)for(var s=e.children(o.settings.region_selector).attr("style","").removeClass("active"),r=s.map(function(){var e=t(o.settings.content_selector,this),n=e.data("slug");return new RegExp(n,"i").test(i)?e:void 0}),a=r.length,l=a-1;l>=0;l--)t(r[l]).parent().addClass("active")})},position_titles:function(e,i){var n=this,o=e.children(this.settings.region_selector).map(function(){return t(this).children(n.settings.title_selector)}),s=0,r=0,n=this;"boolean"==typeof i?o.attr("style",""):o.each(function(){n.is_vertical_tabs(e)?(t(this).css("top",r),r+=n.outerHeight(t(this))):(n.rtl?t(this).css("right",s):t(this).css("left",s),s+=n.outerWidth(t(this)))})},position_content:function(e,i){var n=this,o=e.children(n.settings.region_selector),s=o.map(function(){return t(this).children(n.settings.title_selector)}),r=o.map(function(){return t(this).children(n.settings.content_selector)});if("boolean"==typeof i)r.attr("style",""),e.attr("style",""),r.css("minHeight",""),r.css("maxWidth","");else if(n.is_vertical_tabs(e)&&!n.small(e)){var a=0,l=Number.MAX_VALUE,c=null;o.each(function(){var i=t(this),o=i.children(n.settings.title_selector),s=i.children(n.settings.content_selector),r=0;c=n.outerWidth(o),r=n.outerWidth(e)-c,l>r&&(l=r),a+=n.outerHeight(o),t(this).hasClass("active")||s.css("display","none")}),o.each(function(){var e=t(this).children(n.settings.content_selector);e.css("minHeight",a),e.css("maxWidth",l-2)})}else o.each(function(){var e=t(this),i=e.children(n.settings.title_selector),o=e.children(n.settings.content_selector);o.css(n.rtl?{right:n.position_right(i)+1,top:n.outerHeight(i)-2}:{left:i.position().left-1,top:n.outerHeight(i)-2})}),e.height("function"==typeof Zepto?this.outerHeight(t(s[0])):this.outerHeight(t(s[0]))-2)},position_right:function(e){var i=this,n=e.closest(this.settings.section_selector),o=n.children(this.settings.region_selector),s=e.closest(this.settings.section_selector).width(),r=o.map(function(){return t(this).children(i.settings.title_selector)}).length;return s-e.position().left-e.width()*(e.index()+1)-r},reflow:function(e){var e=e||i;t(this.settings.section_selector,e).trigger("resize")},small:function(e){var i=t.extend({},this.settings,this.data_options(e));return this.is_horizontal_tabs(e)?!1:e&&this.is_accordion(e)?!0:t("html").hasClass("lt-ie9")?!0:t("html").hasClass("ie8compat")?!0:t(this.scope).width()<i.small_breakpoint},off:function(){t(this.scope).off(".fndtn.section"),t(e).off(".fndtn.section"),t(i).off(".fndtn.section")}}}(Foundation.zj,this,this.document),function(t,e){"use strict";Foundation.libs.tooltips={name:"tooltips",version:"4.2.2",settings:{selector:".has-tip",additionalInheritableClasses:[],tooltipClass:".tooltip",appendTo:"body","disable-for-touch":!1,tipTemplate:function(t,e){return'<span data-selector="'+t+'" class="'+Foundation.libs.tooltips.settings.tooltipClass.substring(1)+'">'+e+'<span class="nub"></span></span>'}},cache:{},init:function(e,i,n){Foundation.inherit(this,"data_options");var o=this;return"object"==typeof i?t.extend(!0,this.settings,i):"undefined"!=typeof n&&t.extend(!0,this.settings,n),"string"==typeof i?this[i].call(this,n):void(Modernizr.touch?t(this.scope).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip","[data-tooltip]",function(e){var i=t.extend({},o.settings,o.data_options(t(this)));i["disable-for-touch"]||(e.preventDefault(),t(i.tooltipClass).hide(),o.showOrCreateTip(t(this)))}).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip",this.settings.tooltipClass,function(e){e.preventDefault(),t(this).fadeOut(150)}):t(this.scope).on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip","[data-tooltip]",function(e){var i=t(this);/enter|over/i.test(e.type)?o.showOrCreateTip(i):("mouseout"===e.type||"mouseleave"===e.type)&&o.hide(i)}))},showOrCreateTip:function(t){var e=this.getTip(t);return e&&e.length>0?this.show(t):this.create(t)},getTip:function(e){var i=this.selector(e),n=null;return i&&(n=t('span[data-selector="'+i+'"]'+this.settings.tooltipClass)),"object"==typeof n?n:!1},selector:function(t){var e=t.attr("id"),i=t.attr("data-tooltip")||t.attr("data-selector");return(e&&e.length<1||!e)&&"string"!=typeof i&&(i="tooltip"+Math.random().toString(36).substring(7),t.attr("data-selector",i)),e&&e.length>0?e:i},create:function(e){var i=t(this.settings.tipTemplate(this.selector(e),t("<div></div>").html(e.attr("title")).html())),n=this.inheritable_classes(e);i.addClass(n).appendTo(this.settings.appendTo),Modernizr.touch&&i.append('<span class="tap-to-close">tap to close </span>'),e.removeAttr("title").attr("title",""),this.show(e)},reposition:function(i,n,o){var s,r,a,l,c;if(n.css("visibility","hidden").show(),s=i.data("width"),r=n.children(".nub"),a=this.outerHeight(r),l=this.outerHeight(r),c=function(t,e,i,n,o,s){return t.css({top:e?e:"auto",bottom:n?n:"auto",left:o?o:"auto",right:i?i:"auto",width:s?s:"auto"}).end()},c(n,i.offset().top+this.outerHeight(i)+10,"auto","auto",i.offset().left,s),t(e).width()<767)c(n,i.offset().top+this.outerHeight(i)+10,"auto","auto",12.5,t(this.scope).width()),n.addClass("tip-override"),c(r,-a,"auto","auto",i.offset().left);else{var h=i.offset().left;Foundation.rtl&&(h=i.offset().left+i.offset().width-this.outerWidth(n)),c(n,i.offset().top+this.outerHeight(i)+10,"auto","auto",h,s),n.removeClass("tip-override"),o&&o.indexOf("tip-top")>-1?c(n,i.offset().top-this.outerHeight(n),"auto","auto",h,s).removeClass("tip-override"):o&&o.indexOf("tip-left")>-1?c(n,i.offset().top+this.outerHeight(i)/2-2.5*a,"auto","auto",i.offset().left-this.outerWidth(n)-a,s).removeClass("tip-override"):o&&o.indexOf("tip-right")>-1&&c(n,i.offset().top+this.outerHeight(i)/2-2.5*a,"auto","auto",i.offset().left+this.outerWidth(i)+a,s).removeClass("tip-override")}n.css("visibility","visible").hide()},inheritable_classes:function(e){var i=["tip-top","tip-left","tip-bottom","tip-right","noradius"].concat(this.settings.additionalInheritableClasses),n=e.attr("class"),o=n?t.map(n.split(" "),function(e){return-1!==t.inArray(e,i)?e:void 0}).join(" "):"";return t.trim(o)},show:function(t){var e=this.getTip(t);this.reposition(t,e,t.attr("class")),e.fadeIn(150)},hide:function(t){var e=this.getTip(t);e.fadeOut(150)},reload:function(){var e=t(this);return e.data("fndtn-tooltips")?e.foundationTooltips("destroy").foundationTooltips("init"):e.foundationTooltips("init")},off:function(){t(this.scope).off(".fndtn.tooltip"),t(this.settings.tooltipClass).each(function(e){t("[data-tooltip]").get(e).attr("title",t(this).text())}).remove()},reflow:function(){}}}(Foundation.zj,this,this.document),function(t,e,i){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.2.3",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",is_hover:!0,scrolltop:!0,init:!1},init:function(i,n,o){Foundation.inherit(this,"data_options");var s=this;return"object"==typeof n?t.extend(!0,this.settings,n):"undefined"!=typeof o&&t.extend(!0,this.settings,o),"string"!=typeof n?(t(".top-bar, [data-topbar]").each(function(){t.extend(!0,s.settings,s.data_options(t(this))),s.settings.$w=t(e),s.settings.$topbar=t(this),s.settings.$section=s.settings.$topbar.find("section"),s.settings.$titlebar=s.settings.$topbar.children("ul").first(),s.settings.$topbar.data("index",0);var i=t("<div class='top-bar-js-breakpoint'/>").insertAfter(s.settings.$topbar);s.settings.breakPoint=i.width(),i.remove(),s.assemble(),s.settings.$topbar.parent().hasClass("fixed")&&t("body").css("padding-top",s.outerHeight(s.settings.$topbar))}),s.settings.init||this.events(),this.settings.init):this[n].call(this,o)},events:function(){var i=this,n=this.outerHeight(t(".top-bar, [data-topbar]"));t(this.scope).off(".fndtn.topbar").on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(o){{var s=t(this).closest(".top-bar, [data-topbar]"),r=s.find("section, .section");s.children("ul").first()}o.preventDefault(),i.breakpoint()&&(i.rtl?(r.css({right:"0%"}),r.find(">.name").css({right:"100%"})):(r.css({left:"0%"}),r.find(">.name").css({left:"100%"})),r.find("li.moved").removeClass("moved"),s.data("index",0),s.toggleClass("expanded").css("height","")),s.hasClass("expanded")?s.parent().hasClass("fixed")&&(s.parent().removeClass("fixed"),s.addClass("fixed"),t("body").css("padding-top","0"),i.settings.scrolltop&&e.scrollTo(0,0)):s.hasClass("fixed")&&(s.parent().addClass("fixed"),s.removeClass("fixed"),t("body").css("padding-top",n))}).on("mouseenter mouseleave",".top-bar li",function(e){i.settings.is_hover&&(/enter|over/i.test(e.type)?t(this).addClass("hover"):t(this).removeClass("hover"))}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(e){if(!i.breakpoint()){{var n=t(this),o=t(e.target),s=n.closest("[data-topbar], .top-bar");s.data("topbar")}(!i.settings.is_hover||Modernizr.touch)&&(e.stopImmediatePropagation(),"A"===o[0].nodeName&&o.parent().hasClass("has-dropdown")&&e.preventDefault(),n.hasClass("hover")?n.removeClass("hover").find("li").removeClass("hover"):n.addClass("hover"))}}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(e){if(i.breakpoint()){e.preventDefault();var n=t(this),o=n.closest(".top-bar, [data-topbar]"),s=o.find("section, .section"),r=o.children("ul").first(),a=(n.next(".dropdown").outerHeight(),n.closest("li"));o.data("index",o.data("index")+1),a.addClass("moved"),i.rtl?(s.css({right:-(100*o.data("index"))+"%"}),s.find(">.name").css({right:100*o.data("index")+"%"})):(s.css({left:-(100*o.data("index"))+"%"}),s.find(">.name").css({left:100*o.data("index")+"%"})),o.css("height",i.outerHeight(n.siblings("ul"),!0)+i.outerHeight(r,!0))}}),t(e).on("resize.fndtn.topbar",function(){i.breakpoint()||t(".top-bar, [data-topbar]").css("height","").removeClass("expanded").find("li").removeClass("hover")}.bind(this)),t("body").on("click.fndtn.topbar",function(e){var i=t(e.target).closest("[data-topbar], .top-bar");i.length>0||t(".top-bar li, [data-topbar] li").removeClass("hover")}),t(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(e){e.preventDefault();var n=t(this),o=n.closest(".top-bar, [data-topbar]"),s=o.children("ul").first(),r=o.find("section, .section"),a=n.closest("li.moved"),l=a.parent();o.data("index",o.data("index")-1),i.rtl?(r.css({right:-(100*o.data("index"))+"%"}),r.find(">.name").css({right:100*o.data("index")+"%"})):(r.css({left:-(100*o.data("index"))+"%"}),r.find(">.name").css({left:100*o.data("index")+"%"})),0===o.data("index")?o.css("height",""):o.css("height",i.outerHeight(l,!0)+i.outerHeight(s,!0)),setTimeout(function(){a.removeClass("moved")},300)})},breakpoint:function(){return t(i).width()<=this.settings.breakPoint||t("html").hasClass("lt-ie9")},assemble:function(){var e=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var i=t(this),n=i.siblings(".dropdown"),o=i.attr("href");if(o&&o.length>1)var s=t('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+o+'">'+i.text()+"</a></li>");else var s=t('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');s.find("h5>a").html(1==e.settings.custom_back_text?"&laquo; "+e.settings.back_text:"&laquo; "+i.html()),n.prepend(s)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},height:function(e){var i=0,n=this;return e.find("> li").each(function(){i+=n.outerHeight(t(this),!0)}),i},sticky:function(){var i="."+this.settings.stickyClass;if(t(i).length>0){var n,o=t(i).length?t(i).offset().top:0,s=t(e),r=this.outerHeight(t(".top-bar"));t(e).resize(function(){clearTimeout(n),n=setTimeout(function(){o=t(i).offset().top},105)}),s.scroll(function(){s.scrollTop()>o?(t(i).addClass("fixed"),t("body").css("padding-top",r)):s.scrollTop()<=o&&(t(i).removeClass("fixed"),t("body").css("padding-top","0"))})}},off:function(){t(this.scope).off(".fndtn.topbar"),t(e).off(".fndtn.topbar")},reflow:function(){}}}(Foundation.zj,this,this.document),function(t,e,i){"use strict";Foundation.libs.interchange={name:"interchange",version:"4.2.4",cache:{},settings:{load_attr:"interchange",named_queries:{"default":"only screen and (min-width: 1px)",small:"only screen and (min-width: 768px)",medium:"only screen and (min-width: 1280px)",large:"only screen and (min-width: 1440px)",landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(t,e){if(/IMG/.test(t[0].nodeName)){var i=t[0].src;if(new RegExp(e,"i").test(i))return;return t[0].src=e,t.trigger("replace",[t[0].src,i])}}}},init:function(e,i,n){return Foundation.inherit(this,"throttle"),"object"==typeof i&&t.extend(!0,this.settings,i),this.events(),this.images(),"string"!=typeof i?this.settings.init:this[i].call(this,n)},events:function(){var i=this;t(e).on("resize.fndtn.interchange",i.throttle(function(){i.resize.call(i)},50))},resize:function(){var t=this.cache;for(var e in t)if(t.hasOwnProperty(e)){var i=this.results(e,t[e]);i&&this.settings.directives[i.scenario[1]](i.el,i.scenario[0])}},results:function(e,i){var n=i.length;if(n>0)for(var o=t('[data-uuid="'+e+'"]'),s=n-1;s>=0;s--){var r=i[s][2];if(this.settings.named_queries.hasOwnProperty(r))var a=matchMedia(this.settings.named_queries[r]);else var a=matchMedia(i[s][2]);if(a.matches)return{el:o,scenario:i[s]}}return!1},images:function(t){return"undefined"==typeof this.cached_images||t?this.update_images():this.cached_images},update_images:function(){var e=i.getElementsByTagName("img"),n=e.length,o="data-"+this.settings.load_attr;this.cached_images=[];for(var s=n-1;s>=0;s--)this.loaded(t(e[s]),0===s,function(t,e){if(t){var i=t.getAttribute(o)||"";i.length>0&&this.cached_images.push(t)}e&&this.enhance()}.bind(this));return"deferred"},loaded:function(t,e,i){function n(){i(t[0],e)}function o(){if(this.one("load",n),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var t=this.attr("src"),e=t.match(/\?/)?"&":"?";e+="random="+(new Date).getTime(),this.attr("src",t+e)}}return t.attr("src")?void(t[0].complete||4===t[0].readyState?n():o.call(t)):void n()},enhance:function(){for(var i=this.images().length,n=i-1;n>=0;n--)this._object(t(this.images()[n]));return t(e).trigger("resize")},parse_params:function(t,e,i){return[this.trim(t),this.convert_directive(e),this.trim(i)]},convert_directive:function(t){var e=this.trim(t);return e.length>0?e:"replace"},_object:function(t){var e=this.parse_data_attr(t),i=[],n=e.length;if(n>0)for(var o=n-1;o>=0;o--){var s=e[o].split(/\((.*?)(\))$/);if(s.length>1){var r=s[0].split(","),a=this.parse_params(r[0],r[1],s[1]);i.push(a)}}return this.store(t,i)},uuid:function(t){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var i=t||"-";return e()+e()+i+e()+i+e()+i+e()+i+e()+e()+e()},store:function(t,e){var i=this.uuid(),n=t.data("uuid");return n?this.cache[n]:(t.attr("data-uuid",i),this.cache[i]=e)},trim:function(e){return"string"==typeof e?t.trim(e):e},parse_data_attr:function(t){for(var e=t.data(this.settings.load_attr).split(/\[(.*?)\]/),i=e.length,n=[],o=i-1;o>=0;o--)e[o].replace(/[\W\d]+/,"").length>4&&n.push(e[o]);return n},reflow:function(){this.images(!0)}}}(Foundation.zj,this,this.document),function(t,e,i){function n(t){var e={},n=/^jQuery\d+$/;return i.each(t.attributes,function(t,i){i.specified&&!n.test(i.name)&&(e[i.name]=i.value)}),e}function o(t,n){var o=this,s=i(o);if(o.value==s.attr("placeholder")&&s.hasClass("placeholder"))if(s.data("placeholder-password")){if(s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id")),t===!0)return s[0].value=n;s.focus()}else o.value="",s.removeClass("placeholder"),o==e.activeElement&&o.select()}function s(){var t,e=this,s=i(e),r=this.id;if(""==e.value){if("password"==e.type){if(!s.data("placeholder-textinput")){try{t=s.clone().attr({type:"text"})}catch(a){t=i("<input>").attr(i.extend(n(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":r}).bind("focus.placeholder",o),s.data({"placeholder-textinput":t,"placeholder-id":r}).before(t)}s=s.removeAttr("id").hide().prev().attr("id",r).show()}s.addClass("placeholder"),s[0].value=s.attr("placeholder")}else s.removeClass("placeholder")}var r,a,l="placeholder"in e.createElement("input"),c="placeholder"in e.createElement("textarea"),h=i.fn,u=i.valHooks;l&&c?(a=h.placeholder=function(){return this},a.input=a.textarea=!0):(a=h.placeholder=function(){var t=this;return t.filter((l?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":o,"blur.placeholder":s}).data("placeholder-enabled",!0).trigger("blur.placeholder"),t},a.input=l,a.textarea=c,r={get:function(t){var e=i(t);return e.data("placeholder-enabled")&&e.hasClass("placeholder")?"":t.value},set:function(t,n){var r=i(t);return r.data("placeholder-enabled")?(""==n?(t.value=n,t!=e.activeElement&&s.call(t)):r.hasClass("placeholder")?o.call(t,!0,n)||(t.value=n):t.value=n,r):t.value=n}},l||(u.input=r),c||(u.textarea=r),i(function(){i(e).delegate("form","submit.placeholder",function(){var t=i(".placeholder",this).each(o);setTimeout(function(){t.each(s)},10)})}),i(t).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))}(this,document,Foundation.zj),function(t,e){"use strict";Foundation.libs.placeholder={name:"placeholder",version:"4.2.2",init:function(i,n){this.scope=i||this.scope,"string"!=typeof n&&(e.onload=function(){t("input, textarea").placeholder()})}}}(Foundation.zj,this,this.document),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");
i&&e.setRequestHeader("X-CSRF-Token",i)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)},fire:function(e,i,n){var o=t.Event(i);return e.trigger(o,n),o.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(n){var o,s,r,a,l,c,h,u;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain"),l=a===e?null:a,c=n.data("with-credentials")||null,h=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){o=n.attr("method"),s=n.attr("action"),r=n.serializeArray();var d=n.data("ujs:submit-button");d&&(r.push(d),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(o=n.data("method"),s=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(o=n.data("method")||"get",s=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):(o=n.data("method"),s=i.href(n),r=n.data("params")||null);return u={type:o||"GET",data:r,dataType:h,beforeSend:function(t,o){return o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),i.fire(n,"ajax:beforeSend",[t,o])?void n.trigger("ajax:send",t):!1},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:l},c&&(u.xhrFields={withCredentials:c}),s&&(u.url=s),i.ajax(u)}return!1},handleMethod:function(n){var o=i.href(n),s=n.data("method"),r=n.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),c=t('<form method="post" action="'+o+'"></form>'),h='<input name="_method" value="'+s+'" type="hidden" />';l!==e&&a!==e&&(h+='<input name="'+l+'" value="'+a+'" type="hidden" />'),r&&c.attr("target",r),c.hide().append(h).appendTo("body"),c.submit()},formElements:function(e,i){return e.is("form")?t(e[0].elements).filter(i):e.find(i)},disableFormElements:function(e){i.formElements(e,i.disableSelector).each(function(){i.disableFormElement(t(this))})},disableFormElement:function(t){var i,n;i=t.is("button")?"html":"val",n=t.data("disable-with"),t.data("ujs:enable-with",t[i]()),n!==e&&t[i](n),t.prop("disabled",!0)},enableFormElements:function(e){i.formElements(e,i.enableSelector).each(function(){i.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,n=t.data("confirm"),o=!1;return n?(i.fire(t,"confirm")&&(o=i.confirm(n),e=i.fire(t,"confirm:complete",[o])),o&&e):!0},blankInputs:function(e,i,n){var o,s,r=t(),a=i||"input,textarea",l=e.find(a);return l.each(function(){if(o=t(this),s=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):o.val(),!s==!n){if(o.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+o.attr("name")+'"]').length)return!0;r=r.add(o)}}),r.length?r:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var n=t.data("disable-with");t.data("ujs:enable-with",t.html()),n!==e&&t.html(n),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),n.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(t(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var o=t(this),s=o.data("method"),r=o.data("params"),a=n.metaKey||n.ctrlKey;if(!i.allowAction(o))return i.stopEverything(n);if(!a&&o.is(i.linkDisableSelector)&&i.disableElement(o),o.data("remote")!==e){if(a&&(!s||"GET"===s)&&!r)return!0;var l=i.handleRemote(o);return l===!1?i.enableElement(o):l.error(function(){i.enableElement(o)}),!1}return o.data("method")?(i.handleMethod(o),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var o=i.handleRemote(n);return o===!1?i.enableFormElement(n):o.error(function(){i.enableFormElement(n)}),!1}),n.delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var o,s,r=t(this),a=r.data("remote")!==e;if(!i.allowAction(r))return i.stopEverything(n);if(r.attr("novalidate")==e&&(o=i.blankInputs(r,i.requiredInputSelector),o&&i.fire(r,"ajax:aborted:required",[o])))return i.stopEverything(n);if(a){if(s=i.nonBlankInputs(r,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(r)},13);var l=i.fire(r,"ajax:aborted:file",[s]);return l||setTimeout(function(){i.enableFormElements(r)},13),l}return i.handleRemote(r),!1}setTimeout(function(){i.disableFormElements(r)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var o=n.attr("name"),s=o?{name:o,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),n.delegate(i.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){i.refreshCSRFTokens()}))}(jQuery),$.plugin=function(t,e){$.fn[t]=function(i){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=$.data(this,t);o?o[i].apply(o,n):o=$.data(this,t,new e(i,this))})}},function(){var t=!1,e=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(i){function n(){!t&&this.init&&this.init.apply(this,arguments)}var o=this.prototype;t=!0;var s=new this;t=!1;for(var r in i)s[r]="function"==typeof i[r]&&"function"==typeof o[r]&&e.test(i[r])?function(t,e){return function(){var i=this._super;this._super=o[t];var n=e.apply(this,arguments);return this._super=i,n}}(r,i[r]):i[r];return n.prototype=s,n.prototype.constructor=n,n.extend=arguments.callee,n}}(),function(){var t=this,e=t._,i={},n=Array.prototype,o=Object.prototype,s=Function.prototype,r=n.push,a=n.slice,l=n.concat,c=(n.unshift,o.toString),h=o.hasOwnProperty,u=n.forEach,d=n.map,p=n.reduce,f=n.reduceRight,m=n.filter,g=n.every,v=n.some,y=n.indexOf,b=n.lastIndexOf,w=Array.isArray,_=Object.keys,x=s.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.4.2";var C=k.each=k.forEach=function(t,e,n){if(null!=t)if(u&&t.forEach===u)t.forEach(e,n);else if(t.length===+t.length){for(var o=0,s=t.length;s>o;o++)if(e.call(n,t[o],o,t)===i)return}else for(var r in t)if(k.has(t,r)&&e.call(n,t[r],r,t)===i)return};k.map=k.collect=function(t,e,i){var n=[];return null==t?n:d&&t.map===d?t.map(e,i):(C(t,function(t,o,s){n[n.length]=e.call(i,t,o,s)}),n)},k.reduce=k.foldl=k.inject=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return n&&(e=k.bind(e,n)),o?t.reduce(e,i):t.reduce(e);if(C(t,function(t,s,r){o?i=e.call(n,i,t,s,r):(i=t,o=!0)}),!o)throw new TypeError("Reduce of empty array with no initial value");return i},k.reduceRight=k.foldr=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return n&&(e=k.bind(e,n)),arguments.length>2?t.reduceRight(e,i):t.reduceRight(e);var s=t.length;if(s!==+s){var r=k.keys(t);s=r.length}if(C(t,function(a,l,c){l=r?r[--s]:--s,o?i=e.call(n,i,t[l],l,c):(i=t[l],o=!0)}),!o)throw new TypeError("Reduce of empty array with no initial value");return i},k.find=k.detect=function(t,e,i){var n;return S(t,function(t,o,s){return e.call(i,t,o,s)?(n=t,!0):void 0}),n},k.filter=k.select=function(t,e,i){var n=[];return null==t?n:m&&t.filter===m?t.filter(e,i):(C(t,function(t,o,s){e.call(i,t,o,s)&&(n[n.length]=t)}),n)},k.reject=function(t,e,i){var n=[];return null==t?n:(C(t,function(t,o,s){e.call(i,t,o,s)||(n[n.length]=t)}),n)},k.every=k.all=function(t,e,n){e||(e=k.identity);var o=!0;return null==t?o:g&&t.every===g?t.every(e,n):(C(t,function(t,s,r){return(o=o&&e.call(n,t,s,r))?void 0:i}),!!o)};var S=k.some=k.any=function(t,e,n){e||(e=k.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,n):(C(t,function(t,s,r){return o||(o=e.call(n,t,s,r))?i:void 0}),!!o)};k.contains=k.include=function(t,e){var i=!1;return null==t?i:y&&t.indexOf===y?-1!=t.indexOf(e):i=S(t,function(t){return t===e})},k.invoke=function(t,e){var i=a.call(arguments,2);return k.map(t,function(t){return(k.isFunction(e)?e:t[e]).apply(t,i)})},k.pluck=function(t,e){return k.map(t,function(t){return t[e]})},k.where=function(t,e){return k.isEmpty(e)?[]:k.filter(t,function(t){for(var i in e)if(e[i]!==t[i])return!1;return!0})},k.max=function(t,e,i){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&k.isEmpty(t))return-1/0;var n={computed:-1/0};return C(t,function(t,o,s){var r=e?e.call(i,t,o,s):t;r>=n.computed&&(n={value:t,computed:r})}),n.value},k.min=function(t,e,i){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&k.isEmpty(t))return 1/0;var n={computed:1/0};return C(t,function(t,o,s){var r=e?e.call(i,t,o,s):t;r<n.computed&&(n={value:t,computed:r})}),n.value},k.shuffle=function(t){var e,i=0,n=[];return C(t,function(t){e=k.random(i++),n[i-1]=n[e],n[e]=t}),n};var T=function(t){return k.isFunction(t)?t:function(e){return e[t]}};k.sortBy=function(t,e,i){var n=T(e);return k.pluck(k.map(t,function(t,e,o){return{value:t,index:e,criteria:n.call(i,t,e,o)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index<e.index?-1:1}),"value")};var E=function(t,e,i,n){var o={},s=T(e);return C(t,function(e,r){var a=s.call(i,e,r,t);n(o,a,e)}),o};k.groupBy=function(t,e,i){return E(t,e,i,function(t,e,i){(k.has(t,e)?t[e]:t[e]=[]).push(i)})},k.countBy=function(t,e,i){return E(t,e,i,function(t,e){k.has(t,e)||(t[e]=0),t[e]++})},k.sortedIndex=function(t,e,i,n){i=null==i?k.identity:T(i);for(var o=i.call(n,e),s=0,r=t.length;r>s;){var a=s+r>>>1;i.call(n,t[a])<o?s=a+1:r=a}return s},k.toArray=function(t){return t?t.length===+t.length?a.call(t):k.values(t):[]},k.size=function(t){return t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,i){return null==e||i?t[0]:a.call(t,0,e)},k.initial=function(t,e,i){return a.call(t,0,t.length-(null==e||i?1:e))},k.last=function(t,e,i){return null==e||i?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,i){return a.call(t,null==e||i?1:e)},k.compact=function(t){return k.filter(t,function(t){return!!t})};var $=function(t,e,i){return C(t,function(t){k.isArray(t)?e?r.apply(i,t):$(t,e,i):i.push(t)}),i};k.flatten=function(t,e){return $(t,e,[])},k.without=function(t){return k.difference(t,a.call(arguments,1))},k.uniq=k.unique=function(t,e,i,n){var o=i?k.map(t,i,n):t,s=[],r=[];return C(o,function(i,n){(e?n&&r[r.length-1]===i:k.contains(r,i))||(r.push(i),s.push(t[n]))}),s},k.union=function(){return k.uniq(l.apply(n,arguments))},k.intersection=function(t){var e=a.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.indexOf(e,t)>=0})})},k.difference=function(t){var e=l.apply(n,a.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=a.call(arguments),e=k.max(k.pluck(t,"length")),i=new Array(e),n=0;e>n;n++)i[n]=k.pluck(t,""+n);return i},k.object=function(t,e){for(var i={},n=0,o=t.length;o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},k.indexOf=function(t,e,i){if(null==t)return-1;var n=0,o=t.length;if(i){if("number"!=typeof i)return n=k.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,o+i):i}if(y&&t.indexOf===y)return t.indexOf(e,i);for(;o>n;n++)if(t[n]===e)return n;return-1},k.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(b&&t.lastIndexOf===b)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var o=n?i:t.length;o--;)if(t[o]===e)return o;return-1},k.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=0,s=new Array(n);n>o;)s[o++]=t,t+=i;return s};var A=function(){};k.bind=function(t,e){var i,n;if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(a.call(arguments)));A.prototype=t.prototype;var o=new A,s=t.apply(o,n.concat(a.call(arguments)));return Object(s)===s?s:o}},k.bindAll=function(t){var e=a.call(arguments,1);return 0==e.length&&(e=k.functions(t)),C(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var i={};return e||(e=k.identity),function(){var n=e.apply(this,arguments);return k.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},k.delay=function(t,e){var i=a.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(a.call(arguments,1)))},k.throttle=function(t,e){var i,n,o,s,r,a,l=k.debounce(function(){r=s=!1},e);return function(){i=this,n=arguments;var c=function(){o=null,r&&(a=t.apply(i,n)),l()};return o||(o=setTimeout(c,e)),s?r=!0:(s=!0,a=t.apply(i,n)),l(),a}},k.debounce=function(t,e,i){var n,o;return function(){var s=this,r=arguments,a=function(){n=null,i||(o=t.apply(s,r))},l=i&&!n;return clearTimeout(n),n=setTimeout(a,e),l&&(o=t.apply(s,r)),o}},k.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return function(){var i=[t];return r.apply(i,arguments),e.apply(this,i)}},k.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},k.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=_||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)k.has(t,i)&&(e[e.length]=i);return e},k.values=function(t){var e=[];for(var i in t)k.has(t,i)&&e.push(t[i]);return e},k.pairs=function(t){var e=[];for(var i in t)k.has(t,i)&&e.push([i,t[i]]);return e},k.invert=function(t){var e={};for(var i in t)k.has(t,i)&&(e[t[i]]=i);return e},k.functions=k.methods=function(t){var e=[];for(var i in t)k.isFunction(t[i])&&e.push(i);return e.sort()},k.extend=function(t){return C(a.call(arguments,1),function(e){for(var i in e)t[i]=e[i]}),t},k.pick=function(t){var e={},i=l.apply(n,a.call(arguments,1));return C(i,function(i){i in t&&(e[i]=t[i])}),e},k.omit=function(t){var e={},i=l.apply(n,a.call(arguments,1));for(var o in t)k.contains(i,o)||(e[o]=t[o]);return e},k.defaults=function(t){return C(a.call(arguments,1),function(e){for(var i in e)null==t[i]&&(t[i]=e[i])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var I=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var o=c.call(t);if(o!=c.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=i.length;s--;)if(i[s]==t)return n[s]==e;i.push(t),n.push(e);var r=0,a=!0;if("[object Array]"==o){if(r=t.length,a=r==e.length)for(;r--&&(a=I(t[r],e[r],i,n)););}else{var l=t.constructor,h=e.constructor;if(l!==h&&!(k.isFunction(l)&&l instanceof l&&k.isFunction(h)&&h instanceof h))return!1;for(var u in t)if(k.has(t,u)&&(r++,!(a=k.has(e,u)&&I(t[u],e[u],i,n))))break;if(a){for(u in e)if(k.has(e,u)&&!r--)break;a=!r}}return i.pop(),n.pop(),a};k.isEqual=function(t,e){return I(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=w||function(t){return"[object Array]"==c.call(t)},k.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return k.isNumber(t)&&isFinite(t)},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return h.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.times=function(t,e,i){for(var n=0;t>n;n++)e.call(i,n)},k.random=function(t,e){return null==e&&(e=t,t=0),t+(0|Math.random()*(e-t+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};P.unescape=k.invert(P.escape);var L={escape:new RegExp("["+k.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(P.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(L[t],function(e){return P[t][e]})}}),k.result=function(t,e){if(null==t)return null;var i=t[e];return k.isFunction(i)?i.call(t):i},k.mixin=function(t){C(k.functions(t),function(e){var i=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return r.apply(t,arguments),O.call(this,i.apply(k,t))}})};var D=0;k.uniqueId=function(t){var e=D++;return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,i){i=k.defaults({},i,k.templateSettings);var n=new RegExp([(i.escape||j).source,(i.interpolate||j).source,(i.evaluate||j).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(n,function(e,i,n,r,a){s+=t.slice(o,a).replace(N,function(t){return"\\"+M[t]}),s+=i?"'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?"'+\n((__t=("+n+"))==null?'':__t)+\n'":r?"';\n"+r+"\n__p+='":"",o=a+e.length}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var r=new Function(i.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return r(e,k);var l=function(t){return r.call(this,t,k)};return l.source="function("+(i.variable||"obj")+"){\n"+s+"}",l},k.chain=function(t){return k(t).chain()};var O=function(t){return this._chain?k(t).chain():t};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];k.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],O.call(this,i)}}),C(["concat","join","slice"],function(t){var e=n[t];k.prototype[t]=function(){return O.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(t,e,i){function n(t,i){var n,o=e.createElement(t||"div");for(n in i)o[n]=i[n];return o}function o(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function s(t,e,i,n){var o=["opacity",e,~~(100*t),i,n].join("-"),s=.01+i/n*100,r=Math.max(1-(1-t)/e*(100-s),t),a=h.substring(0,h.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[o]||(p.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+r+"}"+s+"%{opacity:"+t+"}"+(s+.01)+"%{opacity:1}"+(s+e)%100+"%{opacity:"+t+"}100%{opacity:"+r+"}}",0),d[o]=1),o}function r(t,e){var n,o,s=t.style;if(s[e]!==i)return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),o=0;o<u.length;o++)if(n=u[o]+e,s[n]!==i)return n}function a(t,e){for(var i in e)t.style[r(t,i)||i]=e[i];return t}function l(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]===i&&(t[o]=n[o])}return t}function c(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var h,u=["webkit","Moz","ms","O"],d={},p=function(){var t=n("style");return o(e.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},m=function g(t){return this.spin?void(this.opts=l(t||{},g.defaults,f)):new g(t)};m.defaults={},l(m.prototype,{spin:function(t){this.stop();var e,i,o=this,s=o.opts,r=o.el=a(n(0,{className:s.className}),{position:"relative",zIndex:s.zIndex}),l=s.radius+s.length+s.width;if(t&&(t.insertBefore(r,t.firstChild||null),i=c(t),e=c(r),a(r,{left:("auto"==s.left?i.x-e.x+(t.offsetWidth>>1):s.left+l)+"px",top:("auto"==s.top?i.y-e.y+(t.offsetHeight>>1):s.top+l)+"px"})),r.setAttribute("aria-role","progressbar"),o.lines(r,o.opts),!h){var u=0,d=s.fps,p=d/s.speed,f=(1-s.opacity)/(p*s.trail/100),m=p/s.lines;!function g(){u++;for(var t=s.lines;t;t--){var e=Math.max(1-(u+t*m)%p*f,s.opacity);o.opacity(r,s.lines-t,e,s)}o.timeout=o.el&&setTimeout(g,~~(1e3/d))}()}return o},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=i),this},lines:function(t,e){function i(t,i){return a(n(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*l+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.width>>1)+"px"})}for(var r,l=0;l<e.lines;l++)r=a(n(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:h&&s(e.opacity,e.trail,l,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&o(r,a(i("#000","0 0 4px #000"),{top:"2px"})),o(t,o(r,i(e.color,"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}}),!function(){function t(t,e){return n("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}var e=a(n("group"),{behavior:"url(#default#VML)"});!r(e,"transform")&&e.adj?(p.addRule(".spin-vml","behavior:url(#default#VML)"),m.prototype.lines=function(e,i){function n(){return a(t("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function s(e,s,r){o(u,o(a(n(),{rotation:360/i.lines*e+"deg",left:~~s}),o(a(t("roundrect",{arcsize:1}),{width:l,height:i.width,left:i.radius,top:-i.width>>1,filter:r}),t("fill",{color:i.color,opacity:i.opacity}),t("stroke",{opacity:0}))))}var r,l=i.length+i.width,c=2*l,h=2*-(i.width+i.length)+"px",u=a(n(),{position:"absolute",top:h,left:h});if(i.shadow)for(r=1;r<=i.lines;r++)s(r,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(r=1;r<=i.lines;r++)s(r);return o(e,u)},m.prototype.opacity=function(t,e,i,n){var o=t.firstChild;n=n.shadow&&n.lines||0,o&&e+n<o.childNodes.length&&(o=o.childNodes[e+n],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=i))}):h=r(e,"animation")}(),t.Spinner=m}(window,document),window.Somewhere=window.Somewhere||{},Somewhere.Modules=Somewhere.Modules||{},function(t){var e=this,i=Class.extend({init:function(e,i){return this.options=t.extend({},this.options,e),this.elem=i,this.$elem=t(i),this},options:{visibleClass:"visible",disabledClass:"disabled",outerSelector:".outer"}});e.Overlay=i.extend({init:function(e,i){return this._super(e,i),this.$closeBtn=this.$elem.find(".overlay-close"),this.$mid=this.$elem.children(".mid"),this.$content=this.$elem.find(".overlay-content"),this.$openBtn=this.$elem.data("trigger-selector")?t(this.$elem.data("trigger-selector")):null,this._bindEvents(),this},options:{scroll:!0,onClose:null},_bindEvents:function(){var e=this;_.bindAll(this,"open","close","keyClose"),this.$openBtn&&this.$openBtn.on("click",this.open),this.$closeBtn.on("click",this.close),this.$content.on("click",function(t){t.stopPropagation()}),this.$mid.on("click",function(){e.close()}),t(window).on("keydown",this.keyClose)},open:function(e){e&&e.preventDefault();var i=this;this.$elem.fadeIn(300,function(){i.$elem.addClass("open"),i.options.scroll===!1&&t("body").addClass("overlay-state")})},close:function(e){e&&e.preventDefault();var i=this;this.$elem.removeClass("open"),setTimeout(function(){i.$elem.fadeOut(300,function(){"function"==typeof i.options.onClose&&i.options.onClose.call(i),i.$elem.html(""),i.$elem.remove()}),t("body").removeClass("overlay-state")},0),t(window).off("keydown",this.keyClose)},keyClose:function(t){27===t.which&&this.close()}}),e.EmbedOverlay=i.extend({init:function(e){if(this.options=t.extend(this.options,e),!this.options.service)throw new Error("A service must be defined.");this.params=t.extend(this.options.params,this.defaultParams[this.options.service]);var i='<div class="overlay" id="media-overlay">';i+='<div class="mid"><div class="inner"><div class="overlay-content">',i+="</div></div></div></div>",this.$elem=t(i),t("body").append(this.$elem),this.$inner=this.$elem.find(".inner"),this.$content=this.$elem.find(".overlay-content"),this.$elem.overlay({onClose:this.onOverlayClose}),this._bindEvents()},options:{onLoad:function(){},params:{format:"js"},service:null},_endpoints:{vimeo:"http://www.vimeo.com/api/oembed.json",soundcloud:"http://soundcloud.com/oembed"},_formats:{},defaultParams:{vimeo:{maxheight:500,autoplay:!0},soundcloud:{auto_play:!0,iframe:!0,format:"js"}},_bindEvents:function(){_.bindAll(this,"loadContent"),this.$elem.on("open",this.loadContent)},loadContent:function(){var e,i=this;"image"===i.options.service?(e='<img src="'+this.params.url+'" alt="'+this.params.title+'">',i.afterLoad.call(i,e)):t.ajax({url:this._endpoints[this.options.service],data:this.params,dataType:this._formats[this.options.service]||"jsonp",async:!1,crossDomain:!0,jsonp:"callback",contentType:"application/json",type:"GET",success:function(n){e="xml"===i._formats[i.options.service]?t(n).find("html").text():n.html,i.afterLoad.call(i,e)}})},afterLoad:function(e,i){var n=this;i=i||!1,this.$content.addClass("wait"),this.spinner=new Spinner(t.extend({},window.spinnerOpts)).spin(this.$inner[0]);var o=t(e);o[i?"imagesLoaded":"load"](function(){n.completeLoad.call(n)}),this.$content.html(o),this.$elem.data("overlay").open()},completeLoad:function(){this.$content.removeClass("wait"),this.spinner.stop()},onOverlayClose:function(){t("html");t.browser.msie&&window.location.reload()}}),e.BlanketToggle=i.extend({options:{openClass:"open",trigger:null},init:function(e,i){this._super(e,i),_.bindAll(this,"toggle","close"),this.$trigger=e.trigger?t(e.trigger):this.$elem,this.$trigger.on("click",this.toggle)},toggle:function(){return this.$elem.add(this.$trigger.parent()).toggleClass(this.options.openClass),t(document)[this.$elem.hasClass(this.options.openClass)?"on":"off"]("click",this.close),!1},close:function(){this.$elem.add(this.$trigger.parent()).removeClass(this.options.openClass)}}),e.TagFilter=i.extend({options:{onItemClick:null,currentClass:"current",itemSelector:"dd > a",placeholderSelector:"dt",listSelector:"dl"},init:function(t,i){this._super(t,i),_.bindAll(this,"onItemClick"),this.$elem.on("click",this.options.itemSelector,this.onItemClick),this.$placeholder=this.$elem.find(this.options.placeholderSelector),this.$placeholder.data("original_html",this.$placeholder.html()),this.$list=this.$elem.find(this.options.listSelector),this._value=null,this.blanket=new e.BlanketToggle({},this.$elem)},selectOption:function(e){var i=t(e);this._value=i.attr("href"),this.$placeholder.html(i.html()),this.$list.scrollTop(0),this.$elem.find(this.options.itemSelector).removeClass(this.options.currentClass),i.addClass(this.options.currentClass)},onItemClick:function(t){return this.blanket.toggle(),this.selectOption(t.currentTarget),"function"==typeof this.options.onItemClick&&this.options.onItemClick(),!1}})}.call(Somewhere.Modules,jQuery),/*
 * 	Character Count Plugin - jQuery plugin
 * 	Dynamic character count for text areas and input fields
 *	written by Alen Grakalic	
 *	http://cssglobe.com/post/7161/jquery-plugin-simplest-twitterlike-dynamic-character-count-for-textareas
 *
 *	Copyright (c) 2009 Alen Grakalic (http://cssglobe.com)
 *	Dual licensed under the MIT (MIT-LICENSE.txt)
 *	and GPL (GPL-LICENSE.txt) licenses.
 *
 *	Built for jQuery library
 *	http://jquery.com
 *
 */
function(t){t.fn.charCount=function(e){function i(i){var n=t(i).val().length,o=t(e.countSelector),s=e.allowed-n,r=o.closest(".text-count-wrapper");s<=e.warning&&s>=0?r.addClass(e.cssWarning):r.removeClass(e.cssWarning),0>s?r.addClass(e.cssExceeded):r.removeClass(e.cssExceeded),o.html(e.counterText+n)}var n={allowed:140,warning:25,cssWarning:"warning",cssExceeded:"exceeded",counterText:"",countSelector:".text-count"},e=t.extend(n,e);return this.each(function(){var n=t(e.countSelector);n.text(e.counterText),i(this),t(this).keyup(function(){i(this)}),t(this).change(function(){i(this)})})}}(jQuery),function(t){t.fn.autoGrowInput=function(e){return e=t.extend({maxWidth:1e3,minWidth:0,comfortZone:70},e),this.filter("input:text").each(function(){var i=e.minWidth||t(this).width(),n="",o=t(this),s=t("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:o.css("fontSize"),fontFamily:o.css("fontFamily"),fontWeight:o.css("fontWeight"),letterSpacing:o.css("letterSpacing"),whiteSpace:"nowrap"}),r=function(){if(n!==(n=o.val())){var t=n.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");s.html(t);var r=s.width(),a=r+e.comfortZone>=i?r+e.comfortZone:i,l=o.width(),c=l>a&&a>=i||a>i&&a<e.maxWidth;c&&o.width(a)}};s.insertAfter(o),t(this).bind("keyup keydown blur update",r)}),this}}(jQuery),function(t){var e,i,n={className:"autosizejs",append:"",callback:!1},o="hidden",s="border-box",r="lineHeight",a='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden;"/>',l=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],c="oninput",h="onpropertychange",u=t(a).data("autosize",!0)[0];u.style.lineHeight="99px","99px"===t(u).css(r)&&l.push(r),u.style.lineHeight="",t.fn.autosize=function(r){return r=t.extend({},n,r||{}),u.parentNode!==document.body&&(t(document.body).append(u),u.value="\n\n\n",u.scrollTop=9e4,e=u.scrollHeight===u.scrollTop+u.clientHeight),this.each(function(){function n(){i=m,u.className=r.className,t.each(l,function(t,e){u.style[e]=g.css(e)})}function a(){var t,s,a;if(i!==m&&n(),!p){p=!0,u.value=m.value+r.append,u.style.overflowY=m.style.overflowY,a=parseInt(m.style.height,10),u.style.width=Math.max(g.width(),0)+"px",e?t=u.scrollHeight:(u.scrollTop=0,u.scrollTop=9e4,t=u.scrollTop);var l=parseInt(g.css("maxHeight"),10);l=l&&l>0?l:9e4,t>l?(t=l,s="scroll"):d>t&&(t=d),t+=v,m.style.overflowY=s||o,a!==t&&(m.style.height=t+"px",y&&r.callback.call(m,m)),setTimeout(function(){p=!1},1)}}var d,p,f,m=this,g=t(m),v=0,y=t.isFunction(r.callback);g.data("autosize")||((g.css("box-sizing")===s||g.css("-moz-box-sizing")===s||g.css("-webkit-box-sizing")===s)&&(v=g.outerHeight()-g.height()),d=Math.max(parseInt(g.css("minHeight"),10)-v,g.height()),f="none"===g.css("resize")||"vertical"===g.css("resize")?"none":"horizontal",g.css({overflow:o,overflowY:o,wordWrap:"break-word",resize:f}).data("autosize",!0),h in m?c in m?m[c]=m.onkeyup=a:m[h]=a:m[c]=a,t(window).on("resize",function(){p=!1,a()}),g.on("autosize",function(){p=!1,a()}),a())})}}(window.jQuery||window.Zepto),/*
 * HTML5 Sortable jQuery Plugin
 * http://farhadi.ir/projects/html5sortable
 * 
 * Copyright 2012, Ali Farhadi
 * Released under the MIT license.
 */
function(t){var e,i=t();t.fn.sortable=function(n){var o=String(n);return n=t.extend({connectWith:!1},n),this.each(function(){if(/^enable|disable|destroy$/.test(o)){var s=t(this).children(t(this).data("items")).attr("draggable","enable"==o);return void("destroy"==o&&s.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"))}var r,a,s=t(this).children(n.items),l=t("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');s.find(n.handle).mousedown(function(){r=!0}).mouseup(function(){r=!1}),t(this).data("items",n.items),i=i.add(l),n.connectWith&&t(n.connectWith).add(this).data("connectWith",n.connectWith),s.attr("draggable","true").on("dragstart.h5s",function(i){if(n.handle&&!r)return!1;r=!1;var o=i.originalEvent.dataTransfer;o.effectAllowed="move",o.setData("Text","dummy"),a=(e=t(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){e&&(e.removeClass("sortable-dragging").show(),i.detach(),a!=e.index()&&e.parent().trigger("sortupdate",{item:e}),e=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,l]).on("dragover.h5s dragenter.h5s drop.h5s",function(o){return s.is(e)||n.connectWith===t(e).parent().data("connectWith")?"drop"==o.type?(o.stopPropagation(),i.filter(":visible").after(e),e.trigger("dragend.h5s"),!1):(o.preventDefault(),o.originalEvent.dataTransfer.dropEffect="move",s.is(this)?(n.forcePlaceholderSize&&l.height(e.outerHeight()),e.hide(),t(this)[l.index()<t(this).index()?"after":"before"](l),i.not(l).detach()):i.is(this)||t(this).children(n.items).length||(i.detach(),t(this).append(l)),!1):!0})})}}(jQuery),/* jQuery Tiny Pub/Sub - v0.7 - 10/27/2011
 * http://benalman.com/
 * Copyright (c) 2011 "Cowboy" Ben Alman; Licensed MIT, GPL */
function(t){var e=t({});t.subscribe=function(){e.on.apply(e,arguments)},t.unsubscribe=function(){e.off.apply(e,arguments)},t.publish=function(){e.trigger.apply(e,arguments)}}(jQuery),function(t){t.fn.hoverIntent=function(e,i){var n={sensitivity:7,interval:100,timeout:0};n=t.extend(n,i?{over:e,out:i}:e);var o,s,r,a,l=function(t){o=t.pageX,s=t.pageY},c=function(e,i){return i.hoverIntent_t=clearTimeout(i.hoverIntent_t),Math.abs(r-o)+Math.abs(a-s)<n.sensitivity?(t(i).unbind("mousemove",l),i.hoverIntent_s=1,n.over.apply(i,[e])):(r=o,a=s,i.hoverIntent_t=setTimeout(function(){c(e,i)},n.interval),void 0)},h=function(t,e){return e.hoverIntent_t=clearTimeout(e.hoverIntent_t),e.hoverIntent_s=0,n.out.apply(e,[t])},u=function(e){var i=jQuery.extend({},e),o=this;o.hoverIntent_t&&(o.hoverIntent_t=clearTimeout(o.hoverIntent_t)),"mouseenter"==e.type?(r=i.pageX,a=i.pageY,t(o).bind("mousemove",l),1!=o.hoverIntent_s&&(o.hoverIntent_t=setTimeout(function(){c(i,o)},n.interval))):(t(o).unbind("mousemove",l),1==o.hoverIntent_s&&(o.hoverIntent_t=setTimeout(function(){h(i,o)},n.timeout)))};return this.bind("mouseenter",u).bind("mouseleave",u)}}(jQuery),/*! jquery.atwho - v0.5.0 - 2014-07-14
* Copyright (c) 2014 chord.luo <chord.luo@gmail.com>; 
* homepage: http://ichord.github.com/At.js 
* Licensed MIT
*/
function(){!function(t){return"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){var e,i,n,o,s,r,a,l,c=[].slice;n=function(){function e(e){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=t(e),this.iframe=null,this.setIframe(),this.listen()}return e.prototype.setIframe=function(t){return t?(this.window=t.contentWindow,this.document=t.contentDocument||this.window.document,this.iframe=t):(this.document=document,this.window=window,this.iframe=null)},e.prototype.controller=function(t){var e,i,n,o;if(this.alias_maps[t])i=this.controllers[this.alias_maps[t]];else{o=this.controllers;for(n in o)if(e=o[n],n===t){i=e;break}}return i?i:this.controllers[this.current_flag]},e.prototype.set_context_for=function(t){return this.current_flag=t,this},e.prototype.reg=function(t,e){var i,n;return i=(n=this.controllers)[t]||(n[t]=new o(this,t)),e.alias&&(this.alias_maps[e.alias]=t),i.init(e),this},e.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(t){return function(e){return t.on_keyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.on_keydown(e)}}(this)).on("scroll.atwhoInner",function(t){return function(e){var i;return null!=(i=t.controller())?i.view.hide(e):void 0}}(this)).on("blur.atwhoInner",function(t){return function(e){var i;return(i=t.controller())?i.view.hide(e,i.get_opt("display_timeout")):void 0}}(this)).on("click.atwhoInner",function(t){return function(e){var i;return null!=(i=t.controller())?i.view.hide(e):void 0}}(this))},e.prototype.shutdown=function(){var t,e,i;i=this.controllers;for(e in i)t=i[e],t.destroy(),delete this.controllers[e];return this.$inputor.off(".atwhoInner")},e.prototype.dispatch=function(){return t.map(this.controllers,function(t){return function(e){var i;return(i=e.get_opt("delay"))?(clearTimeout(t.delayedCallback),t.delayedCallback=setTimeout(function(){return e.look_up()?t.set_context_for(e.at):void 0},i)):e.look_up()?t.set_context_for(e.at):void 0}}(this))},e.prototype.on_keyup=function(e){var i;switch(e.keyCode){case r.ESC:e.preventDefault(),null!=(i=this.controller())&&i.view.hide();break;case r.DOWN:case r.UP:case r.CTRL:t.noop();break;case r.P:case r.N:e.ctrlKey||this.dispatch();break;default:this.dispatch()}},e.prototype.on_keydown=function(e){var i,n;if(i=null!=(n=this.controller())?n.view:void 0,i&&i.visible())switch(e.keyCode){case r.ESC:e.preventDefault(),i.hide(e);break;case r.UP:e.preventDefault(),i.prev();break;case r.DOWN:e.preventDefault(),i.next();break;case r.P:if(!e.ctrlKey)return;e.preventDefault(),i.prev();break;case r.N:if(!e.ctrlKey)return;e.preventDefault(),i.next();break;case r.TAB:case r.ENTER:if(!i.visible())return;e.preventDefault(),i.choose(e);break;default:t.noop()}},e}(),o=function(){function i(i,n){this.app=i,this.at=n,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,e.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new a(this),this.view=new l(this)}return i.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},i.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho["default"],e),this.view.init(),this.model.reload(this.setting.data)},i.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},i.prototype.call_default=function(){var e,i,n;n=arguments[0],e=2<=arguments.length?c.call(arguments,1):[];try{return s[n].apply(this,e)}catch(o){return i=o,t.error(""+i+" Or maybe At.js doesn't have function "+n)}},i.prototype.trigger=function(t,e){var i,n;return null==e&&(e=[]),e.push(this),i=this.get_opt("alias"),n=i?""+t+"-"+i+".atwho":""+t+".atwho",this.$inputor.trigger(n,e)},i.prototype.callbacks=function(t){return this.get_opt("callbacks")[t]||s[t]},i.prototype.get_opt=function(t){var e;try{return this.setting[t]}catch(i){return e=i,null}},i.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},i.prototype.catch_query=function(){var t,e,i,n,o,s;return e=this.content(),t=this.$inputor.caret("pos",{iframe:this.app.iframe}),s=e.slice(0,t),n=this.callbacks("matcher").call(this,this.at,s,this.get_opt("start_with_space")),"string"==typeof n&&n.length<=this.get_opt("max_len",20)?(o=t-n.length,i=o+n.length,this.pos=o,n={text:n,head_pos:o,end_pos:i},this.trigger("matched",[this.at,n.text])):(n=null,this.view.hide()),this.query=n},i.prototype.rect=function(){var t,e;if(t=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return"true"===this.$inputor.attr("contentEditable")&&(t=this.cur_rect||(this.cur_rect=t)||t),e=this.app.document.selection?0:2,{left:t.left,top:t.top,bottom:t.top+t.height+e}},i.prototype.reset_rect=function(){return"true"===this.$inputor.attr("contentEditable")?this.cur_rect=null:void 0},i.prototype.mark_range=function(){return"true"===this.$inputor.attr("contentEditable")&&(this.app.window.getSelection&&(this.range=this.app.window.getSelection().getRangeAt(0)),this.app.document.selection)?this.ie8_range=this.app.document.selection.createRange():void 0},i.prototype.insert_content_for=function(e){var i,n,o;return n=e.data("value"),o=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!o?n:(i=t.extend({},e.data("item-data"),{"atwho-data-value":n,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,o,i))},i.prototype.insert=function(e){var i,n,o,s,r,a,l,c,h;return i=this.$inputor,h=this.callbacks("inserting_wrapper").call(this,i,e,this.get_opt("suffix")),i.is("textarea, input")?(a=i.val(),l=a.slice(0,Math.max(this.query.head_pos-this.at.length,0)),c=""+l+h+a.slice(this.query.end_pos||0),i.val(c),i.caret("pos",l.length+h.length,{iframe:this.app.iframe})):(s=this.range)?(o=s.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,s.setStart(s.endContainer,Math.max(o,0)),s.setEnd(s.endContainer,s.endOffset),s.deleteContents(),n=t(h,this.app.document)[0],s.insertNode(n),s.setEndAfter(n),s.collapse(!1),r=this.app.window.getSelection(),r.removeAllRanges(),r.addRange(s)):(s=this.ie8_range)&&(s.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),s.pasteHTML(h),s.collapse(!1),s.select()),i.is(":focus")||i.focus(),i.change()},i.prototype.render_view=function(t){var e;return e=this.get_opt("search_key"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.get_opt("limit")))},i.prototype.look_up=function(){var e,i;if(e=this.catch_query())return i=function(t){return t&&t.length>0?this.render_view(t):this.view.hide()},this.model.query(e.text,t.proxy(i,this)),e},i}(),a=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var i,n,o;return i=this.fetch(),n=this.context.get_opt("search_key"),i=this.context.callbacks("filter").call(this.context,t,i,n)||[],o=this.context.callbacks("remote_filter"),i.length>0||!o&&0===i.length?e(i):o.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,t||[]))},e.prototype.load=function(t){return!this.saved()&&t?this._load(t):void 0},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}(),l=function(){function e(e){this.context=e,this.$el=t("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return e.prototype.init=function(){var t;return t=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+t})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bind_event=function(){var e;return e=this.$el.find("ul"),e.on("mouseenter.atwho-view","li",function(i){return e.find(".cur").removeClass("cur"),t(i.currentTarget).addClass("cur")}).on("click",function(t){return function(e){return t.choose(e),e.preventDefault()}}(this))},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.choose=function(t){var e,i;return(e=this.$el.find(".cur")).length&&(i=this.context.insert_content_for(e),this.context.insert(this.context.callbacks("before_insert").call(this.context,i,e),e),this.context.trigger("inserted",[e,t]),this.hide(t)),this.context.get_opt("hide_without_suffix")?this.stop_showing=!0:void 0},e.prototype.reposition=function(e){var i,n;return e.bottom+this.$el.height()-t(window).scrollTop()>t(window).height()&&(e.bottom=e.top-this.$el.height()),i={left:e.left,top:e.bottom},null!=(n=this.context.callbacks("before_reposition"))&&n.call(this.context,i),this.$el.offset(i),this.context.trigger("reposition",[i])},e.prototype.next=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.next(),e.length||(e=this.$el.find("li:first")),e.addClass("cur")},e.prototype.prev=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.prev(),e.length||(e=this.$el.find("li:last")),e.addClass("cur")},e.prototype.show=function(){var t;return this.stop_showing?void(this.stop_showing=!1):(this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var i;if(this.visible())return isNaN(e)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[t])):(i=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(i,e))},e.prototype.render=function(e){var i,n,o,s,r,a,l;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find("ul").empty(),n=this.$el.find("ul"),r=this.context.get_opt("tpl"),a=0,l=e.length;l>a;a++)o=e[a],o=t.extend({},o,{"atwho-at":this.context.at}),s=this.context.callbacks("tpl_eval").call(this.context,r,o),i=t(this.context.callbacks("highlighter").call(this.context,s,this.context.query.text)),i.data("item-data",o),n.append(i);return this.show(),this.context.get_opt("highlight_first")?n.find("li:first").addClass("cur"):void 0},e}(),r={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},s={before_save:function(e){var i,n,o,s;if(!t.isArray(e))return e;for(s=[],n=0,o=e.length;o>n;n++)i=e[n],s.push(t.isPlainObject(i)?i:{name:i});return s},matcher:function(t,e,i){var n,o;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),i&&(t="(?:^|\\s)"+t),o=new RegExp(t+"([A-Za-z0-9_+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),n=o.exec(e),n?n[2]||n[1]:null},filter:function(t,e,i){var n,o,s,r;for(r=[],o=0,s=e.length;s>o;o++)n=e[o],~n[i].toLowerCase().indexOf(t.toLowerCase())&&r.push(n);return r},remote_filter:null,sorter:function(t,e,i){var n,o,s,r;if(!t)return e;for(r=[],o=0,s=e.length;s>o;o++)n=e[o],n.atwho_order=n[i].toLowerCase().indexOf(t.toLowerCase()),n.atwho_order>-1&&r.push(n);return r.sort(function(t,e){return t.atwho_order-e.atwho_order})},tpl_eval:function(t,e){var i;try{return t.replace(/\$\{([^\}]*)\}/g,function(t,i){return e[i]})}catch(n){return i=n,""}},highlighter:function(t,e){var i;return e?(i=new RegExp(">\\s*(\\w*?)("+e.replace("+","\\+")+")(\\w*)\\s*<","ig"),t.replace(i,function(t,e,i,n){return"> "+e+"<strong>"+i+"</strong>"+n+" <"})):t},before_insert:function(t){return t},inserting_wrapper:function(t,e,i){var n,o;return n=""===i?i:i||" ",t.is("textarea, input")?""+e+n:"true"===t.attr("contentEditable")?(n=""===i?i:i||"&nbsp;",/firefox/i.test(navigator.userAgent)?o="<span>"+e+n+"</span>":(i="<span contenteditable='false'>"+n+"<span>",o="<span contenteditable='false'>"+e+i+"</span>"),this.app.document.selection&&(o="<span contenteditable='true'>"+e+"</span>"),o):void 0}},i={load:function(t,e){var i;return(i=this.controller(t))?i.model.load(e):void 0},setIframe:function(t){return this.setIframe(t),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},e=t("<div id='atwho-container'></div>"),t.fn.atwho=function(o){var s,r;return r=arguments,t("body").append(e),s=null,this.filter("textarea, input, [contenteditable=true]").each(function(){var e,a;return(a=(e=t(this)).data("atwho"))||e.data("atwho",a=new n(this)),"object"!=typeof o&&o?i[o]&&a?s=i[o].apply(a,Array.prototype.slice.call(r,1)):t.error("Method "+o+" does not exist on jQuery.caret"):a.reg(o.at,o)}),s||this},t.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span id='${id}'>${atwho-data-value}</span>",callbacks:s,search_key:"name",suffix:void 0,hide_without_suffix:!1,start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}})}.call(this),/*
  Implement Github like autocomplete mentions
  http://ichord.github.com/At.js

  Copyright (c) 2013 chord.luo@gmail.com
  Licensed under the MIT license.
*/
function(){!function(t){return"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e,i,n,o,s,r,a,l,c,h,u;return h="caret",e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(){return this.domInputor},e.prototype.getIEPosition=function(){return t.noop()},e.prototype.getPosition=function(){return t.noop()},e.prototype.getOldIEPos=function(){var t,e;return e=a.selection.createRange(),t=a.body.createTextRange(),t.moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,i;return(i=this.range())?(t=i.cloneRange(),t.selectNodeContents(this.domInputor),t.setEnd(i.endContainer,i.endOffset),e=t.toString().length,t.detach(),e):a.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return t=a.selection.createRange().duplicate(),t.moveStart("character",-1),e=t.getBoundingClientRect(),{height:e.bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(){var e,i,n,o;if(c.getSelection&&(n=this.range())){if(n.endOffset-1<0)return null;e=n.cloneRange(),e.setStart(n.endContainer,n.endOffset-1),e.setEnd(n.endContainer,n.endOffset),o=e.getBoundingClientRect(),i={height:o.height,left:o.left+o.width,top:o.top},e.detach()}else a.selection&&(i=this.getOldIEOffset());return i&&!l&&(i.top+=t(c).scrollTop(),i.left+=t(c).scrollLeft()),i},e.prototype.range=function(){var t;if(c.getSelection)return t=c.getSelection(),t.rangeCount>0?t.getRangeAt(0):null},e}(),i=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,i,n,o,s,r;return e=this.domInputor,s=a.selection.createRange(),o=0,s&&s.parentElement()===e&&(n=e.value.replace(/\r\n/g,"\n"),i=n.length,r=e.createTextRange(),r.moveToBookmark(s.getBookmark()),t=e.createTextRange(),t.collapse(!1),o=r.compareEndPoints("StartToEnd",t)>-1?i:-r.moveStart("character",-i)),o},e.prototype.getPos=function(){return a.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,i;return e=this.domInputor,a.selection?(i=e.createTextRange(),i.move("character",t),i.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e,i,n,o;return i=this.domInputor.createTextRange(),t||(t=this.getPos()),i.move("character",t),n=i.boundingLeft,o=i.boundingTop,e=i.boundingHeight,{left:n,top:o,height:e}},e.prototype.getOffset=function(e){var i,n,o;return i=this.$inputor,a.selection?(n=this.getIEOffset(e),n.top+=t(c).scrollTop()+i.scrollTop(),n.left+=t(c).scrollLeft()+i.scrollLeft(),n):(n=i.offset(),o=this.getPosition(e),n={left:n.left+o.left-i.scrollLeft(),top:n.top+o.top-i.scrollTop(),height:o.height})},e.prototype.getPosition=function(t){var e,i,o,s,r,a,l;return e=this.$inputor,s=function(t){return t.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===t&&(t=this.getPos()),l=e.val().slice(0,t),o=e.val().slice(t),r="<span style='position: relative; display: inline;'>"+s(l)+"</span>",r+="<span id='caret' style='position: relative; display: inline;'>|</span>",r+="<span style='position: relative; display: inline;'>"+s(o)+"</span>",a=new n(e),i=a.create(r).rect()},e.prototype.getIEPosition=function(t){var e,i,n,o,s;return n=this.getIEOffset(t),i=this.$inputor.offset(),o=n.left-i.left,s=n.top-i.top,e=n.height,{left:o,top:s,height:e}},e}(),n=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],e.prototype.mirrorCss=function(){var e,i=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),t.each(this.css_attr,function(t,n){return e[n]=i.$inputor.css(n)}),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,i;return t=this.$mirror.find("#caret"),e=t.position(),i={left:e.left,top:e.top,height:t.height()},this.$mirror.remove(),i},e}(),o={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},r={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return a.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(e){var i,n;return n=this.getOffset(e),l&&(i=t(l).offset(),n.top+=i.top,n.left+=i.left),n}},a=null,c=null,l=null,u=function(t){var e;return(e=null!=t?t.iframe:void 0)?(l=e,c=e.contentWindow,a=e.contentDocument||c.document):(l=void 0,c=window,a=document)},s=function(t){var e;a=t[0].ownerDocument,c=a.defaultView||a.parentWindow;try{return l=c.frameElement}catch(i){e=i}},t.fn.caret=function(n,s,a){var l;return r[n]?(t.isPlainObject(s)?(u(s),s=void 0):u(a),l=o.contentEditable(this)?new e(this):new i(this),r[n].apply(l,[s])):t.error("Method "+n+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=i,t.fn.caret.Utils=o,t.fn.caret.apis=r})}.call(this);var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);FastClick.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},FastClick.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},FastClick.prototype.sendClick=function(t,e){"use strict";var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},FastClick.prototype.determineEventType=function(t){"use strict";return deviceIsAndroid&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(t){"use strict";var e;deviceIsIOS&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},FastClick.prototype.updateScrollParent=function(t){"use strict";var e,i;if(e=t.fastClickScrollParent,!e||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},FastClick.prototype.onTouchStart=function(t){"use strict";var e,i,n;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i?!0:!1},FastClick.prototype.onTouchMove=function(t){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(t){"use strict";var e,i,n,o,s,r=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(s=t.changedTouches[0],r=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||r,r.fastClickScrollParent=this.targetElement.fastClickScrollParent),n=r.tagName.toLowerCase(),"label"===n){if(e=this.findControl(r)){if(this.focus(r),deviceIsAndroid)return!1;r=e}}else if(this.needsFocus(r))return t.timeStamp-i>100||deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(r),this.sendClick(r,t),deviceIsIOS&&"select"===n||(this.targetElement=null,t.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(o=r.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(r)||(t.preventDefault(),this.sendClick(r,t)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(t){"use strict";return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},FastClick.prototype.destroy=function(){"use strict";var t=this.layer;deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(t){"use strict";var e,i;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}return"none"===t.style.msTouchAction?!0:!1},FastClick.attach=function(t,e){"use strict";return new FastClick(t,e)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(t){t.event.special.doubletap={bindType:"touchend",delegateType:"touchend",handle:function(t){var e=t.handleObj,i=jQuery.data(t.target),n=(new Date).getTime(),o=i.lastTouch?n-i.lastTouch:0,s=null==s?300:s;s>o&&o>30?(i.lastTouch=null,t.type=e.origType,["clientX","clientY","pageX","pageY"].forEach(function(e){t[e]=t.originalEvent.changedTouches[0][e]}),e.handler.apply(this,arguments)):i.lastTouch=n}}}(jQuery),$(".isotope").on("doubletap",".spark",function(t){t.preventDefault();var e=$("[data-behave=like]",$(t.target).closest(".spark"));if(e.hasClass("active"));else{e.toggleClass("active"),e.addClass("animated tada");var i=$(e.closest(".spark"));i.find(".spark__image").addClass("animated pulse"),$.ajax({url:e.attr("href"),type:"POST",success:function(t){e.text(t.count)}})}}),/*! jquery.finger - v0.1.0 - 2014-02-19
* https://github.com/ngryman/jquery.finger
* Copyright (c) 2014 Nicolas Gryman; Licensed MIT */
function(t,e){function i(t,e){return(m?e.originalEvent.touches[0]:e)["page"+t.toUpperCase()]}function n(e,i,n){var o=t.Event(i,x);t.event.trigger(o,{originalEvent:e},e.target),o.isDefaultPrevented()&&e.preventDefault(),n&&(t.event.remove(w,y+"."+b,s),t.event.remove(w,v+"."+b,r))}function o(e){var o=e.timeStamp||+new Date;c!=o&&(c=o,_.x=x.x=i("x",e),_.y=x.y=i("y",e),_.time=o,_.target=e.target,x.orientation=null,x.end=!1,a=!1,l=!1,h=setTimeout(function(){l=!0,n(e,"press")},t.Finger.pressDuration),t.event.add(w,y+"."+b,s),t.event.add(w,v+"."+b,r),k.preventDefault&&e.preventDefault())}function s(e){return x.x=i("x",e),x.y=i("y",e),x.dx=x.x-_.x,x.dy=x.y-_.y,x.adx=Math.abs(x.dx),x.ady=Math.abs(x.dy),(a=x.adx>k.motionThreshold||x.ady>k.motionThreshold)?(clearTimeout(h),x.orientation||(x.adx>x.ady?(x.orientation="horizontal",x.direction=x.dx>0?1:-1):(x.orientation="vertical",x.direction=x.dy>0?1:-1)),e.target!==_.target?(e.target=_.target,void r.call(this,t.Event(v+"."+b,e))):void n(e,"drag")):void 0}function r(t){var e,i=t.timeStamp||+new Date,o=i-_.time;if(clearTimeout(h),t.target===_.target){if(a||l)o<k.flickDuration&&n(t,"flick"),x.end=!0,e="drag";else{var s=u===t.target&&i-d<k.doubleTapInterval;e=s?"doubletap":"tap",u=s?null:_.target,d=i}n(t,e,!0)}}var a,l,c,h,u,d,p=/chrome/i.exec(e),f=/android/i.exec(e),m="ontouchstart"in window&&!(p&&!f),g=m?"touchstart":"mousedown",v=m?"touchend touchcancel":"mouseup mouseleave",y=m?"touchmove":"mousemove",b="finger",w=t("html")[0],_={},x={},k=t.Finger={pressDuration:300,doubleTapInterval:300,flickDuration:150,motionThreshold:5};t.event.add(w,g+"."+b,o)}(jQuery,navigator.userAgent),function(t){t.fn.foggy=function(e){var i,n={opacity:.8,blurRadius:2,quality:16,cssFilterSupport:!0},o={opacity:1,blurRadius:0};i=0==e?t.extend(n,o):t.extend(n,e);var s=function(t,e,i,n){this.content=t,this.position=e,this.offset=i,this.opacity=n};s.prototype.render=function(e){t("<div/>",{html:this.content,"class":"foggy-pass-"+this.position}).css({position:this.position,opacity:this.opacity,top:this.offset[0],left:this.offset[1]}).appendTo(e)};var r=function(t){this.radius=t};r.prototype.includes=function(t,e){return Math.pow(t,2)+Math.pow(e,2)<=Math.pow(this.radius,2)?!0:!1},r.prototype.points=function(){for(var t=[],e=-this.radius;e<=this.radius;e++)for(var i=-this.radius;i<=this.radius;i++)this.includes(e,i)&&t.push([e,i]);return t};var a=function(t,e){this.element=t,this.settings=e};a.prototype.calculateOffsets=function(e,i){var n,o=t.grep(new r(e).points(),function(t){return 0!=t[0]||0!=t[1]});if(o.length<=i)n=o;else{for(var s=o.length-i,a=[],l=0;s>l;l++)a.push(Math.round(l*(o.length/s)));n=t.grep(o,function(e,i){return t.inArray(i,a)>=0?!1:!0})}return n},a.prototype.getContent=function(){var e=t(this.element).find(".foggy-pass-relative")[0];return e?t(e).html():t(this.element).html()},a.prototype.render=function(){var e=this.getContent();t(this.element).empty();var i=t("<div/>").css({position:"relative"}),n=this.calculateOffsets(2*this.settings.blurRadius,this.settings.quality),o=1.2*this.settings.opacity/(n.length+1);new s(e,"relative",[0,0],o).render(i),t(n).each(function(t,n){new s(e,"absolute",n,o).render(i)}),i.appendTo(this.element)};var l=function(t,e){this.element=t,this.settings=e};return l.prototype.render=function(){var e=((""+i.opacity).slice(2,4),this.settings.blurRadius);t(this.element).css({"-webkit-filter":"blur("+e+"px)",opacity:i.opacity})},this.each(function(t,e){i.cssFilterSupport&&"-webkit-filter"in document.body.style?new l(e,i).render():new a(e,i).render()})}}(jQuery),function(t){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],t):t(jQuery)}(function(t){function e(e){return!e||void 0!==e.allowPageScroll||void 0===e.swipe&&void 0===e.swipeStatus||(e.allowPageScroll=c),void 0!==e.click&&void 0===e.tap&&(e.tap=e.click),e||(e={}),e=t.extend({},t.fn.swipe.defaults,e),this.each(function(){var n=t(this),o=n.data(E);o||(o=new i(this,e),n.data(E,o))})}function i(e,i){function $(e){if(!(ce()||t(e.target).closest(i.excludedElements,We).length>0)){var n,o=e.originalEvent?e.originalEvent:e,s=C?o.touches[0]:o;return Ve=w,C?Ue=o.touches.length:e.preventDefault(),Me=0,Ne=null,qe=null,Oe=0,Fe=0,He=0,ze=1,Re=0,Ke=fe(),Be=ve(),ae(),!C||Ue===i.fingers||i.fingers===y||B()?(ue(0,s),Xe=Te(),2==Ue&&(ue(1,o.touches[1]),Fe=He=we(Ke[0].start,Ke[1].start)),(i.swipeStatus||i.pinchStatus)&&(n=M(o,Ve))):n=!1,n===!1?(Ve=k,M(o,Ve),n):(i.hold&&(ti=setTimeout(t.proxy(function(){We.trigger("hold",[o.target]),i.hold&&(n=i.hold.call(We,o,o.target))},this),i.longTapThreshold)),he(!0),null)}}function A(t){var e=t.originalEvent?t.originalEvent:t;if(Ve!==x&&Ve!==k&&!le()){var n,o=C?e.touches[0]:e,s=de(o);if(Qe=Te(),C&&(Ue=e.touches.length),i.hold&&clearTimeout(ti),Ve=_,2==Ue&&(0==Fe?(ue(1,e.touches[1]),Fe=He=we(Ke[0].start,Ke[1].start)):(de(e.touches[1]),He=we(Ke[0].end,Ke[1].end),qe=xe(Ke[0].end,Ke[1].end)),ze=_e(Fe,He),Re=Math.abs(Fe-He)),Ue===i.fingers||i.fingers===y||!C||B()){if(Ne=Se(s.start,s.end),R(t,Ne),Me=ke(s.start,s.end),Oe=be(),me(Ne,Me),(i.swipeStatus||i.pinchStatus)&&(n=M(e,Ve)),!i.triggerOnTouchEnd||i.triggerOnTouchLeave){var r=!0;if(i.triggerOnTouchLeave){var a=Ee(this);r=$e(s.end,a)}!i.triggerOnTouchEnd&&r?Ve=j(_):i.triggerOnTouchLeave&&!r&&(Ve=j(x)),(Ve==k||Ve==x)&&M(e,Ve)}}else Ve=k,M(e,Ve);n===!1&&(Ve=k,M(e,Ve))}}function I(t){var e=t.originalEvent;return C&&e.touches.length>0?(re(),!0):(le()&&(Ue=Ge),Qe=Te(),Oe=be(),F()||!O()?(Ve=k,M(e,Ve)):i.triggerOnTouchEnd||0==i.triggerOnTouchEnd&&Ve===_?(t.preventDefault(),Ve=x,M(e,Ve)):!i.triggerOnTouchEnd&&Y()?(Ve=x,N(e,Ve,p)):Ve===_&&(Ve=k,M(e,Ve)),he(!1),null)}function P(){Ue=0,Qe=0,Xe=0,Fe=0,He=0,ze=1,ae(),he(!1)}function L(t){var e=t.originalEvent;i.triggerOnTouchLeave&&(Ve=j(x),M(e,Ve))}function D(){We.unbind(Ie,$),We.unbind(je,P),We.unbind(Pe,A),We.unbind(Le,I),De&&We.unbind(De,L),he(!1)}function j(t){var e=t,n=z(),o=O(),s=F();return!n||s?e=k:!o||t!=_||i.triggerOnTouchEnd&&!i.triggerOnTouchLeave?!o&&t==x&&i.triggerOnTouchLeave&&(e=k):e=x,e}function M(t,e){var i=void 0;return K()||U()?i=N(t,e,u):(W()||B())&&i!==!1&&(i=N(t,e,d)),oe()&&i!==!1?i=N(t,e,f):se()&&i!==!1?i=N(t,e,m):ne()&&i!==!1&&(i=N(t,e,p)),e===k&&P(t),e===x&&(C?0==t.touches.length&&P(t):P(t)),i}function N(e,c,h){var g=void 0;if(h==u){if(We.trigger("swipeStatus",[c,Ne||null,Me||0,Oe||0,Ue,Ke]),i.swipeStatus&&(g=i.swipeStatus.call(We,e,c,Ne||null,Me||0,Oe||0,Ue,Ke),g===!1))return!1;if(c==x&&V()){if(We.trigger("swipe",[Ne,Me,Oe,Ue,Ke]),i.swipe&&(g=i.swipe.call(We,e,Ne,Me,Oe,Ue,Ke),g===!1))return!1;switch(Ne){case n:We.trigger("swipeLeft",[Ne,Me,Oe,Ue,Ke]),i.swipeLeft&&(g=i.swipeLeft.call(We,e,Ne,Me,Oe,Ue,Ke));break;case o:We.trigger("swipeRight",[Ne,Me,Oe,Ue,Ke]),i.swipeRight&&(g=i.swipeRight.call(We,e,Ne,Me,Oe,Ue,Ke));break;case s:We.trigger("swipeUp",[Ne,Me,Oe,Ue,Ke]),i.swipeUp&&(g=i.swipeUp.call(We,e,Ne,Me,Oe,Ue,Ke));break;case r:We.trigger("swipeDown",[Ne,Me,Oe,Ue,Ke]),i.swipeDown&&(g=i.swipeDown.call(We,e,Ne,Me,Oe,Ue,Ke))}}}if(h==d){if(We.trigger("pinchStatus",[c,qe||null,Re||0,Oe||0,Ue,ze,Ke]),i.pinchStatus&&(g=i.pinchStatus.call(We,e,c,qe||null,Re||0,Oe||0,Ue,ze,Ke),g===!1))return!1;if(c==x&&q())switch(qe){case a:We.trigger("pinchIn",[qe||null,Re||0,Oe||0,Ue,ze,Ke]),i.pinchIn&&(g=i.pinchIn.call(We,e,qe||null,Re||0,Oe||0,Ue,ze,Ke));break;case l:We.trigger("pinchOut",[qe||null,Re||0,Oe||0,Ue,ze,Ke]),i.pinchOut&&(g=i.pinchOut.call(We,e,qe||null,Re||0,Oe||0,Ue,ze,Ke))}}return h==p?(c===k||c===x)&&(clearTimeout(Ze),clearTimeout(ti),G()&&!te()?(Je=Te(),Ze=setTimeout(t.proxy(function(){Je=null,We.trigger("tap",[e.target]),i.tap&&(g=i.tap.call(We,e,e.target))},this),i.doubleTapThreshold)):(Je=null,We.trigger("tap",[e.target]),i.tap&&(g=i.tap.call(We,e,e.target)))):h==f?(c===k||c===x)&&(clearTimeout(Ze),Je=null,We.trigger("doubletap",[e.target]),i.doubleTap&&(g=i.doubleTap.call(We,e,e.target))):h==m&&(c===k||c===x)&&(clearTimeout(Ze),Je=null,We.trigger("longtap",[e.target]),i.longTap&&(g=i.longTap.call(We,e,e.target))),g}function O(){var t=!0;return null!==i.threshold&&(t=Me>=i.threshold),t}function F(){var t=!1;return null!==i.cancelThreshold&&null!==Ne&&(t=ge(Ne)-Me>=i.cancelThreshold),t}function H(){return null!==i.pinchThreshold?Re>=i.pinchThreshold:!0}function z(){var t;return t=i.maxTimeThreshold&&Oe>=i.maxTimeThreshold?!1:!0}function R(t,e){if(i.allowPageScroll===c||B())t.preventDefault();else{var a=i.allowPageScroll===h;switch(e){case n:(i.swipeLeft&&a||!a&&i.allowPageScroll!=g)&&t.preventDefault();break;case o:(i.swipeRight&&a||!a&&i.allowPageScroll!=g)&&t.preventDefault();break;case s:(i.swipeUp&&a||!a&&i.allowPageScroll!=v)&&t.preventDefault();break;case r:(i.swipeDown&&a||!a&&i.allowPageScroll!=v)&&t.preventDefault()}}}function q(){var t=X(),e=Q(),i=H();return t&&e&&i}function B(){return!!(i.pinchStatus||i.pinchIn||i.pinchOut)}function W(){return!(!q()||!B())}function V(){var t=z(),e=O(),i=X(),n=Q(),o=F(),s=!o&&n&&i&&e&&t;return s}function U(){return!!(i.swipe||i.swipeStatus||i.swipeLeft||i.swipeRight||i.swipeUp||i.swipeDown)}function K(){return!(!V()||!U())}function X(){return Ue===i.fingers||i.fingers===y||!C}function Q(){return 0!==Ke[0].end.x}function Y(){return!!i.tap}function G(){return!!i.doubleTap}function J(){return!!i.longTap}function Z(){if(null==Je)return!1;var t=Te();return G()&&t-Je<=i.doubleTapThreshold}function te(){return Z()}function ee(){return(1===Ue||!C)&&(isNaN(Me)||Me<i.threshold)}function ie(){return Oe>i.longTapThreshold&&b>Me}function ne(){return!(!ee()||!Y())}function oe(){return!(!Z()||!G())}function se(){return!(!ie()||!J())}function re(){Ye=Te(),Ge=event.touches.length+1}function ae(){Ye=0,Ge=0}function le(){var t=!1;if(Ye){var e=Te()-Ye;e<=i.fingerReleaseThreshold&&(t=!0)}return t}function ce(){return!(We.data(E+"_intouch")!==!0)}function he(t){t===!0?(We.bind(Pe,A),We.bind(Le,I),De&&We.bind(De,L)):(We.unbind(Pe,A,!1),We.unbind(Le,I,!1),De&&We.unbind(De,L,!1)),We.data(E+"_intouch",t===!0)}function ue(t,e){var i=void 0!==e.identifier?e.identifier:0;return Ke[t].identifier=i,Ke[t].start.x=Ke[t].end.x=e.pageX||e.clientX,Ke[t].start.y=Ke[t].end.y=e.pageY||e.clientY,Ke[t]}function de(t){var e=void 0!==t.identifier?t.identifier:0,i=pe(e);return i.end.x=t.pageX||t.clientX,i.end.y=t.pageY||t.clientY,i}function pe(t){for(var e=0;e<Ke.length;e++)if(Ke[e].identifier==t)return Ke[e]}function fe(){for(var t=[],e=0;5>=e;e++)t.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return t}function me(t,e){e=Math.max(e,ge(t)),Be[t].distance=e}function ge(t){return Be[t]?Be[t].distance:void 0}function ve(){var t={};return t[n]=ye(n),t[o]=ye(o),t[s]=ye(s),t[r]=ye(r),t}function ye(t){return{direction:t,distance:0}}function be(){return Qe-Xe}function we(t,e){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return Math.round(Math.sqrt(i*i+n*n))}function _e(t,e){var i=e/t*1;return i.toFixed(2)}function xe(){return 1>ze?l:a}function ke(t,e){return Math.round(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))}function Ce(t,e){var i=t.x-e.x,n=e.y-t.y,o=Math.atan2(n,i),s=Math.round(180*o/Math.PI);return 0>s&&(s=360-Math.abs(s)),s}function Se(t,e){var i=Ce(t,e);return 45>=i&&i>=0?n:360>=i&&i>=315?n:i>=135&&225>=i?o:i>45&&135>i?r:s}function Te(){var t=new Date;return t.getTime()}function Ee(e){e=t(e);var i=e.offset(),n={left:i.left,right:i.left+e.outerWidth(),top:i.top,bottom:i.top+e.outerHeight()};return n}function $e(t,e){return t.x>e.left&&t.x<e.right&&t.y>e.top&&t.y<e.bottom}var Ae=C||T||!i.fallbackToMouseEvents,Ie=Ae?T?S?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Pe=Ae?T?S?"MSPointerMove":"pointermove":"touchmove":"mousemove",Le=Ae?T?S?"MSPointerUp":"pointerup":"touchend":"mouseup",De=Ae?null:"mouseleave",je=T?S?"MSPointerCancel":"pointercancel":"touchcancel",Me=0,Ne=null,Oe=0,Fe=0,He=0,ze=1,Re=0,qe=0,Be=null,We=t(e),Ve="start",Ue=0,Ke=null,Xe=0,Qe=0,Ye=0,Ge=0,Je=0,Ze=null,ti=null;try{We.bind(Ie,$),We.bind(je,P)}catch(ei){t.error("events not supported "+Ie+","+je+" on jQuery.swipe")}this.enable=function(){return We.bind(Ie,$),We.bind(je,P),We},this.disable=function(){return D(),We},this.destroy=function(){return D(),We.data(E,null),We},this.option=function(e,n){if(void 0!==i[e]){if(void 0===n)return i[e];i[e]=n}else t.error("Option "+e+" does not exist on jQuery.swipe.options");return null}}var n="left",o="right",s="up",r="down",a="in",l="out",c="none",h="auto",u="swipe",d="pinch",p="tap",f="doubletap",m="longtap",g="horizontal",v="vertical",y="all",b=10,w="start",_="move",x="end",k="cancel",C="ontouchstart"in window,S=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,T=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,E="TouchSwipe",$={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe"};t.fn.swipe=function(i){var n=t(this),o=n.data(E);if(o&&"string"==typeof i){if(o[i])return o[i].apply(this,Array.prototype.slice.call(arguments,1));t.error("Method "+i+" does not exist on jQuery.swipe")}else if(!(o||"object"!=typeof i&&i))return e.apply(this,arguments);return n},t.fn.swipe.defaults=$,t.fn.swipe.phases={PHASE_START:w,PHASE_MOVE:_,PHASE_END:x,PHASE_CANCEL:k},t.fn.swipe.directions={LEFT:n,RIGHT:o,UP:s,DOWN:r,IN:a,OUT:l},t.fn.swipe.pageScroll={NONE:c,HORIZONTAL:g,VERTICAL:v,AUTO:h},t.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:y}}),/*
 *  jQuery OwlCarousel v1.3.3
 *
 *  Copyright (c) 2013 Bartosz Wojciechowski
 *  http://www.owlgraphic.com/owlcarousel/
 *
 *  Licensed under MIT
 *
 */
"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t,e,i){var n={init:function(e,i){var n=this;n.$elem=t(i),n.options=t.extend({},t.fn.owlCarousel.options,n.$elem.data(),e),n.userOptions=e,n.loadContent()},loadContent:function(){function e(t){var e,i="";if("function"==typeof n.options.jsonSuccess)n.options.jsonSuccess.apply(this,[t]);else{for(e in t.owl)t.owl.hasOwnProperty(e)&&(i+=t.owl[e].item);n.$elem.html(i)}n.logIn()}var i,n=this;"function"==typeof n.options.beforeInit&&n.options.beforeInit.apply(this,[n.$elem]),"string"==typeof n.options.jsonPath?(i=n.options.jsonPath,t.getJSON(i,e)):n.logIn()},logIn:function(){var t=this;t.$elem.data("owl-originalStyles",t.$elem.attr("style")),t.$elem.data("owl-originalClasses",t.$elem.attr("class")),t.$elem.css({opacity:0}),t.orignalItems=t.options.items,t.checkBrowser(),t.wrapperWidth=0,t.checkVisible=null,t.setVars()},setVars:function(){var t=this;return 0===t.$elem.children().length?!1:(t.baseClass(),t.eventTypes(),t.$userItems=t.$elem.children(),t.itemsAmount=t.$userItems.length,t.wrapItems(),t.$owlItems=t.$elem.find(".owl-item"),t.$owlWrapper=t.$elem.find(".owl-wrapper"),t.playDirection="next",t.prevItem=0,t.prevArr=[0],t.currentItem=0,t.customEvents(),void t.onStartup())},onStartup:function(){var t=this;t.updateItems(),t.calculateAll(),t.buildControls(),t.updateControls(),t.response(),t.moveEvents(),t.stopOnHover(),t.owlStatus(),t.options.transitionStyle!==!1&&t.transitionTypes(t.options.transitionStyle),t.options.autoPlay===!0&&(t.options.autoPlay=5e3),t.play(),t.$elem.find(".owl-wrapper").css("display","block"),t.$elem.is(":visible")?t.$elem.css("opacity",1):t.watchVisibility(),t.onstartup=!1,t.eachMoveUpdate(),"function"==typeof t.options.afterInit&&t.options.afterInit.apply(this,[t.$elem])},eachMoveUpdate:function(){var t=this;t.options.lazyLoad===!0&&t.lazyLoad(),t.options.autoHeight===!0&&t.autoHeight(),t.onVisibleItems(),"function"==typeof t.options.afterAction&&t.options.afterAction.apply(this,[t.$elem])},updateVars:function(){var t=this;"function"==typeof t.options.beforeUpdate&&t.options.beforeUpdate.apply(this,[t.$elem]),t.watchVisibility(),t.updateItems(),t.calculateAll(),t.updatePosition(),t.updateControls(),t.eachMoveUpdate(),"function"==typeof t.options.afterUpdate&&t.options.afterUpdate.apply(this,[t.$elem])},reload:function(){var t=this;e.setTimeout(function(){t.updateVars()},0)},watchVisibility:function(){var t=this;return t.$elem.is(":visible")!==!1?!1:(t.$elem.css({opacity:0}),e.clearInterval(t.autoPlayInterval),e.clearInterval(t.checkVisible),void(t.checkVisible=e.setInterval(function(){t.$elem.is(":visible")&&(t.reload(),t.$elem.animate({opacity:1},200),e.clearInterval(t.checkVisible))},500)))},wrapItems:function(){var t=this;t.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>'),t.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">'),t.wrapperOuter=t.$elem.find(".owl-wrapper-outer"),t.$elem.css("display","block")},baseClass:function(){var t=this,e=t.$elem.hasClass(t.options.baseClass),i=t.$elem.hasClass(t.options.theme);e||t.$elem.addClass(t.options.baseClass),i||t.$elem.addClass(t.options.theme)},updateItems:function(){var e,i,n=this;if(n.options.responsive===!1)return!1;if(n.options.singleItem===!0)return n.options.items=n.orignalItems=1,n.options.itemsCustom=!1,n.options.itemsDesktop=!1,n.options.itemsDesktopSmall=!1,n.options.itemsTablet=!1,n.options.itemsTabletSmall=!1,n.options.itemsMobile=!1,!1;if(e=t(n.options.responsiveBaseWidth).width(),e>(n.options.itemsDesktop[0]||n.orignalItems)&&(n.options.items=n.orignalItems),n.options.itemsCustom!==!1)for(n.options.itemsCustom.sort(function(t,e){return t[0]-e[0]}),i=0;i<n.options.itemsCustom.length;i+=1)n.options.itemsCustom[i][0]<=e&&(n.options.items=n.options.itemsCustom[i][1]);else e<=n.options.itemsDesktop[0]&&n.options.itemsDesktop!==!1&&(n.options.items=n.options.itemsDesktop[1]),e<=n.options.itemsDesktopSmall[0]&&n.options.itemsDesktopSmall!==!1&&(n.options.items=n.options.itemsDesktopSmall[1]),e<=n.options.itemsTablet[0]&&n.options.itemsTablet!==!1&&(n.options.items=n.options.itemsTablet[1]),e<=n.options.itemsTabletSmall[0]&&n.options.itemsTabletSmall!==!1&&(n.options.items=n.options.itemsTabletSmall[1]),e<=n.options.itemsMobile[0]&&n.options.itemsMobile!==!1&&(n.options.items=n.options.itemsMobile[1]);n.options.items>n.itemsAmount&&n.options.itemsScaleUp===!0&&(n.options.items=n.itemsAmount)},response:function(){var i,n,o=this;return o.options.responsive!==!0?!1:(n=t(e).width(),o.resizer=function(){t(e).width()!==n&&(o.options.autoPlay!==!1&&e.clearInterval(o.autoPlayInterval),e.clearTimeout(i),i=e.setTimeout(function(){n=t(e).width(),o.updateVars()},o.options.responsiveRefreshRate))},void t(e).resize(o.resizer))},updatePosition:function(){var t=this;t.jumpTo(t.currentItem),t.options.autoPlay!==!1&&t.checkAp()},appendItemsSizes:function(){var e=this,i=0,n=e.itemsAmount-e.options.items;e.$owlItems.each(function(o){var s=t(this);s.css({width:e.itemWidth}).data("owl-item",Number(o)),(o%e.options.items===0||o===n)&&(o>n||(i+=1)),s.data("owl-roundPages",i)})},appendWrapperSizes:function(){var t=this,e=t.$owlItems.length*t.itemWidth;t.$owlWrapper.css({width:2*e,left:0}),t.appendItemsSizes()},calculateAll:function(){var t=this;t.calculateWidth(),t.appendWrapperSizes(),t.loops(),t.max()},calculateWidth:function(){var t=this;t.itemWidth=Math.round(t.$elem.width()/t.options.items)},max:function(){var t=this,e=-1*(t.itemsAmount*t.itemWidth-t.options.items*t.itemWidth);return t.options.items>t.itemsAmount?(t.maximumItem=0,e=0,t.maximumPixels=0):(t.maximumItem=t.itemsAmount-t.options.items,t.maximumPixels=e),e},min:function(){return 0},loops:function(){var e,i,n,o=this,s=0,r=0;for(o.positionsInArray=[0],o.pagesInArray=[],e=0;e<o.itemsAmount;e+=1)r+=o.itemWidth,o.positionsInArray.push(-r),o.options.scrollPerPage===!0&&(i=t(o.$owlItems[e]),n=i.data("owl-roundPages"),n!==s&&(o.pagesInArray[s]=o.positionsInArray[e],s=n))},buildControls:function(){var e=this;(e.options.navigation===!0||e.options.pagination===!0)&&(e.owlControls=t('<div class="owl-controls"/>').toggleClass("clickable",!e.browser.isTouch).appendTo(e.$elem)),e.options.pagination===!0&&e.buildPagination(),e.options.navigation===!0&&e.buildButtons()},buildButtons:function(){var e=this,i=t('<div class="owl-buttons"/>');e.owlControls.append(i),e.buttonPrev=t("<div/>",{"class":"owl-prev",html:e.options.navigationText[0]||""}),e.buttonNext=t("<div/>",{"class":"owl-next",html:e.options.navigationText[1]||""}),i.append(e.buttonPrev).append(e.buttonNext),i.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(t){t.preventDefault()}),i.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(i){i.preventDefault(),t(this).hasClass("owl-next")?e.next():e.prev()})},buildPagination:function(){var e=this;e.paginationWrapper=t('<div class="owl-pagination"/>'),e.owlControls.append(e.paginationWrapper),e.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(i){i.preventDefault(),Number(t(this).data("owl-page"))!==e.currentItem&&e.goTo(Number(t(this).data("owl-page")),!0)})},updatePagination:function(){var e,i,n,o,s,r,a=this;if(a.options.pagination===!1)return!1;for(a.paginationWrapper.html(""),e=0,i=a.itemsAmount-a.itemsAmount%a.options.items,o=0;o<a.itemsAmount;o+=1)o%a.options.items===0&&(e+=1,i===o&&(n=a.itemsAmount-a.options.items),s=t("<div/>",{"class":"owl-page"}),r=t("<span></span>",{text:a.options.paginationNumbers===!0?e:"","class":a.options.paginationNumbers===!0?"owl-numbers":""}),s.append(r),s.data("owl-page",i===o?n:o),s.data("owl-roundPages",e),a.paginationWrapper.append(s));a.checkPagination()},checkPagination:function(){var e=this;return e.options.pagination===!1?!1:void e.paginationWrapper.find(".owl-page").each(function(){t(this).data("owl-roundPages")===t(e.$owlItems[e.currentItem]).data("owl-roundPages")&&(e.paginationWrapper.find(".owl-page").removeClass("active"),t(this).addClass("active"))})},checkNavigation:function(){var t=this;return t.options.navigation===!1?!1:void(t.options.rewindNav===!1&&(0===t.currentItem&&0===t.maximumItem?(t.buttonPrev.addClass("disabled"),t.buttonNext.addClass("disabled")):0===t.currentItem&&0!==t.maximumItem?(t.buttonPrev.addClass("disabled"),t.buttonNext.removeClass("disabled")):t.currentItem===t.maximumItem?(t.buttonPrev.removeClass("disabled"),t.buttonNext.addClass("disabled")):0!==t.currentItem&&t.currentItem!==t.maximumItem&&(t.buttonPrev.removeClass("disabled"),t.buttonNext.removeClass("disabled"))))},updateControls:function(){var t=this;t.updatePagination(),t.checkNavigation(),t.owlControls&&(t.options.items>=t.itemsAmount?t.owlControls.hide():t.owlControls.show())},destroyControls:function(){var t=this;t.owlControls&&t.owlControls.remove()},next:function(t){var e=this;if(e.isTransition)return!1;if(e.currentItem+=e.options.scrollPerPage===!0?e.options.items:1,e.currentItem>e.maximumItem+(e.options.scrollPerPage===!0?e.options.items-1:0)){if(e.options.rewindNav!==!0)return e.currentItem=e.maximumItem,!1;e.currentItem=0,t="rewind"}e.goTo(e.currentItem,t)},prev:function(t){var e=this;if(e.isTransition)return!1;if(e.options.scrollPerPage===!0&&e.currentItem>0&&e.currentItem<e.options.items?e.currentItem=0:e.currentItem-=e.options.scrollPerPage===!0?e.options.items:1,e.currentItem<0){if(e.options.rewindNav!==!0)return e.currentItem=0,!1;e.currentItem=e.maximumItem,t="rewind"}e.goTo(e.currentItem,t)},goTo:function(t,i,n){var o,s=this;return s.isTransition?!1:("function"==typeof s.options.beforeMove&&s.options.beforeMove.apply(this,[s.$elem]),t>=s.maximumItem?t=s.maximumItem:0>=t&&(t=0),s.currentItem=s.owl.currentItem=t,s.options.transitionStyle!==!1&&"drag"!==n&&1===s.options.items&&s.browser.support3d===!0?(s.swapSpeed(0),s.browser.support3d===!0?s.transition3d(s.positionsInArray[t]):s.css2slide(s.positionsInArray[t],1),s.afterGo(),s.singleItemTransition(),!1):(o=s.positionsInArray[t],s.browser.support3d===!0?(s.isCss3Finish=!1,i===!0?(s.swapSpeed("paginationSpeed"),e.setTimeout(function(){s.isCss3Finish=!0},s.options.paginationSpeed)):"rewind"===i?(s.swapSpeed(s.options.rewindSpeed),e.setTimeout(function(){s.isCss3Finish=!0},s.options.rewindSpeed)):(s.swapSpeed("slideSpeed"),e.setTimeout(function(){s.isCss3Finish=!0},s.options.slideSpeed)),s.transition3d(o)):i===!0?s.css2slide(o,s.options.paginationSpeed):"rewind"===i?s.css2slide(o,s.options.rewindSpeed):s.css2slide(o,s.options.slideSpeed),void s.afterGo()))},jumpTo:function(t){var e=this;"function"==typeof e.options.beforeMove&&e.options.beforeMove.apply(this,[e.$elem]),t>=e.maximumItem||-1===t?t=e.maximumItem:0>=t&&(t=0),e.swapSpeed(0),e.browser.support3d===!0?e.transition3d(e.positionsInArray[t]):e.css2slide(e.positionsInArray[t],1),e.currentItem=e.owl.currentItem=t,e.afterGo()},afterGo:function(){var t=this;t.prevArr.push(t.currentItem),t.prevItem=t.owl.prevItem=t.prevArr[t.prevArr.length-2],t.prevArr.shift(0),t.prevItem!==t.currentItem&&(t.checkPagination(),t.checkNavigation(),t.eachMoveUpdate(),t.options.autoPlay!==!1&&t.checkAp()),"function"==typeof t.options.afterMove&&t.prevItem!==t.currentItem&&t.options.afterMove.apply(this,[t.$elem])},stop:function(){var t=this;t.apStatus="stop",e.clearInterval(t.autoPlayInterval)},checkAp:function(){var t=this;"stop"!==t.apStatus&&t.play()},play:function(){var t=this;return t.apStatus="play",t.options.autoPlay===!1?!1:(e.clearInterval(t.autoPlayInterval),void(t.autoPlayInterval=e.setInterval(function(){t.next(!0)},t.options.autoPlay)))},swapSpeed:function(t){var e=this;"slideSpeed"===t?e.$owlWrapper.css(e.addCssSpeed(e.options.slideSpeed)):"paginationSpeed"===t?e.$owlWrapper.css(e.addCssSpeed(e.options.paginationSpeed)):"string"!=typeof t&&e.$owlWrapper.css(e.addCssSpeed(t))},addCssSpeed:function(t){return{"-webkit-transition":"all "+t+"ms ease","-moz-transition":"all "+t+"ms ease","-o-transition":"all "+t+"ms ease",transition:"all "+t+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(t){return{"-webkit-transform":"translate3d("+t+"px, 0px, 0px)","-moz-transform":"translate3d("+t+"px, 0px, 0px)","-o-transform":"translate3d("+t+"px, 0px, 0px)","-ms-transform":"translate3d("+t+"px, 0px, 0px)",transform:"translate3d("+t+"px, 0px,0px)"}},transition3d:function(t){var e=this;e.$owlWrapper.css(e.doTranslate(t))},css2move:function(t){var e=this;e.$owlWrapper.css({left:t})},css2slide:function(t,e){var i=this;i.isCssFinish=!1,i.$owlWrapper.stop(!0,!0).animate({left:t},{duration:e||i.options.slideSpeed,complete:function(){i.isCssFinish=!0}})},checkBrowser:function(){var t,n,o,s,r=this,a="translate3d(0px, 0px, 0px)",l=i.createElement("div");l.style.cssText="  -moz-transform:"+a+"; -ms-transform:"+a+"; -o-transform:"+a+"; -webkit-transform:"+a+"; transform:"+a,t=/translate3d\(0px, 0px, 0px\)/g,n=l.style.cssText.match(t),o=null!==n&&1===n.length,s="ontouchstart"in e||e.navigator.msMaxTouchPoints,r.browser={support3d:o,isTouch:s}},moveEvents:function(){var t=this;(t.options.mouseDrag!==!1||t.options.touchDrag!==!1)&&(t.gestures(),t.disabledEvents())},eventTypes:function(){var t=this,e=["s","e","x"];t.ev_types={},t.options.mouseDrag===!0&&t.options.touchDrag===!0?e=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:t.options.mouseDrag===!1&&t.options.touchDrag===!0?e=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:t.options.mouseDrag===!0&&t.options.touchDrag===!1&&(e=["mousedown.owl","mousemove.owl","mouseup.owl"]),t.ev_types.start=e[0],t.ev_types.move=e[1],t.ev_types.end=e[2]},disabledEvents:function(){var e=this;e.$elem.on("dragstart.owl",function(t){t.preventDefault()}),e.$elem.on("mousedown.disableTextSelect",function(e){return t(e.target).is("input, textarea, select, option")})},gestures:function(){function n(t){if(void 0!==t.touches)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(void 0===t.touches){if(void 0!==t.pageX)return{x:t.pageX,y:t.pageY};if(void 0===t.pageX)return{x:t.clientX,y:t.clientY}}}function o(e){"on"===e?(t(i).on(l.ev_types.move,r),t(i).on(l.ev_types.end,a)):"off"===e&&(t(i).off(l.ev_types.move),t(i).off(l.ev_types.end))}function s(i){var s,r=i.originalEvent||i||e.event;if(3===r.which)return!1;if(!(l.itemsAmount<=l.options.items)){if(l.isCssFinish===!1&&!l.options.dragBeforeAnimFinish)return!1;if(l.isCss3Finish===!1&&!l.options.dragBeforeAnimFinish)return!1;l.options.autoPlay!==!1&&e.clearInterval(l.autoPlayInterval),l.browser.isTouch===!0||l.$owlWrapper.hasClass("grabbing")||l.$owlWrapper.addClass("grabbing"),l.newPosX=0,l.newRelativeX=0,t(this).css(l.removeTransition()),s=t(this).position(),c.relativePos=s.left,c.offsetX=n(r).x-s.left,c.offsetY=n(r).y-s.top,o("on"),c.sliding=!1,c.targetElement=r.target||r.srcElement}}function r(o){var s,r,a=o.originalEvent||o||e.event;l.newPosX=n(a).x-c.offsetX,l.newPosY=n(a).y-c.offsetY,l.newRelativeX=l.newPosX-c.relativePos,"function"==typeof l.options.startDragging&&c.dragging!==!0&&0!==l.newRelativeX&&(c.dragging=!0,l.options.startDragging.apply(l,[l.$elem])),(l.newRelativeX>8||l.newRelativeX<-8)&&l.browser.isTouch===!0&&(void 0!==a.preventDefault?a.preventDefault():a.returnValue=!1,c.sliding=!0),(l.newPosY>10||l.newPosY<-10)&&c.sliding===!1&&t(i).off("touchmove.owl"),s=function(){return l.newRelativeX/5},r=function(){return l.maximumPixels+l.newRelativeX/5},l.newPosX=Math.max(Math.min(l.newPosX,s()),r()),l.browser.support3d===!0?l.transition3d(l.newPosX):l.css2move(l.newPosX)}function a(i){var n,s,r,a=i.originalEvent||i||e.event;a.target=a.target||a.srcElement,c.dragging=!1,l.browser.isTouch!==!0&&l.$owlWrapper.removeClass("grabbing"),l.dragDirection=l.owl.dragDirection=l.newRelativeX<0?"left":"right",0!==l.newRelativeX&&(n=l.getNewPosition(),l.goTo(n,!1,"drag"),c.targetElement===a.target&&l.browser.isTouch!==!0&&(t(a.target).on("click.disable",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t(e.target).off("click.disable")}),s=t._data(a.target,"events").click,r=s.pop(),s.splice(0,0,r))),o("off")}var l=this,c={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};l.isCssFinish=!0,l.$elem.on(l.ev_types.start,".owl-wrapper",s)},getNewPosition:function(){var t=this,e=t.closestItem();return e>t.maximumItem?(t.currentItem=t.maximumItem,e=t.maximumItem):t.newPosX>=0&&(e=0,t.currentItem=0),e},closestItem:function(){var e=this,i=e.options.scrollPerPage===!0?e.pagesInArray:e.positionsInArray,n=e.newPosX,o=null;return t.each(i,function(s,r){n-e.itemWidth/20>i[s+1]&&n-e.itemWidth/20<r&&"left"===e.moveDirection()?(o=r,e.currentItem=e.options.scrollPerPage===!0?t.inArray(o,e.positionsInArray):s):n+e.itemWidth/20<r&&n+e.itemWidth/20>(i[s+1]||i[s]-e.itemWidth)&&"right"===e.moveDirection()&&(e.options.scrollPerPage===!0?(o=i[s+1]||i[i.length-1],e.currentItem=t.inArray(o,e.positionsInArray)):(o=i[s+1],e.currentItem=s+1))}),e.currentItem},moveDirection:function(){var t,e=this;return e.newRelativeX<0?(t="right",e.playDirection="next"):(t="left",e.playDirection="prev"),t},customEvents:function(){var t=this;t.$elem.on("owl.next",function(){t.next()}),t.$elem.on("owl.prev",function(){t.prev()}),t.$elem.on("owl.play",function(e,i){t.options.autoPlay=i,t.play(),t.hoverStatus="play"}),t.$elem.on("owl.stop",function(){t.stop(),t.hoverStatus="stop"}),t.$elem.on("owl.goTo",function(e,i){t.goTo(i)}),t.$elem.on("owl.jumpTo",function(e,i){t.jumpTo(i)})},stopOnHover:function(){var t=this;t.options.stopOnHover===!0&&t.browser.isTouch!==!0&&t.options.autoPlay!==!1&&(t.$elem.on("mouseover",function(){t.stop()}),t.$elem.on("mouseout",function(){"stop"!==t.hoverStatus&&t.play()}))},lazyLoad:function(){var e,i,n,o,s,r=this;if(r.options.lazyLoad===!1)return!1;for(e=0;e<r.itemsAmount;e+=1)i=t(r.$owlItems[e]),"loaded"!==i.data("owl-loaded")&&(n=i.data("owl-item"),o=i.find(".lazyOwl"),"string"==typeof o.data("src")?(void 0===i.data("owl-loaded")&&(o.hide(),i.addClass("loading").data("owl-loaded","checked")),s=r.options.lazyFollow===!0?n>=r.currentItem:!0,s&&n<r.currentItem+r.options.items&&o.length&&r.lazyPreload(i,o)):i.data("owl-loaded","loaded"))},lazyPreload:function(t,i){function n(){t.data("owl-loaded","loaded").removeClass("loading"),i.removeAttr("data-src"),"fade"===r.options.lazyEffect?i.fadeIn(400):i.show(),"function"==typeof r.options.afterLazyLoad&&r.options.afterLazyLoad.apply(this,[r.$elem])}function o(){a+=1,r.completeImg(i.get(0))||s===!0?n():100>=a?e.setTimeout(o,100):n()}var s,r=this,a=0;"DIV"===i.prop("tagName")?(i.css("background-image","url("+i.data("src")+")"),s=!0):i[0].src=i.data("src"),o()},autoHeight:function(){function i(){var i=t(s.$owlItems[s.currentItem]).height();s.wrapperOuter.css("height",i+"px"),s.wrapperOuter.hasClass("autoHeight")||e.setTimeout(function(){s.wrapperOuter.addClass("autoHeight")},0)}function n(){o+=1,s.completeImg(r.get(0))?i():100>=o?e.setTimeout(n,100):s.wrapperOuter.css("height","")}var o,s=this,r=t(s.$owlItems[s.currentItem]).find("img");void 0!==r.get(0)?(o=0,n()):i()},completeImg:function(t){var e;return t.complete?(e=typeof t.naturalWidth,"undefined"!==e&&0===t.naturalWidth?!1:!0):!1},onVisibleItems:function(){var e,i=this;for(i.options.addClassActive===!0&&i.$owlItems.removeClass("active"),i.visibleItems=[],e=i.currentItem;e<i.currentItem+i.options.items;e+=1)i.visibleItems.push(e),i.options.addClassActive===!0&&t(i.$owlItems[e]).addClass("active");i.owl.visibleItems=i.visibleItems},transitionTypes:function(t){var e=this;e.outClass="owl-"+t+"-out",e.inClass="owl-"+t+"-in"},singleItemTransition:function(){function t(t){return{position:"relative",left:t+"px"}}var e=this,i=e.outClass,n=e.inClass,o=e.$owlItems.eq(e.currentItem),s=e.$owlItems.eq(e.prevItem),r=Math.abs(e.positionsInArray[e.currentItem])+e.positionsInArray[e.prevItem],a=Math.abs(e.positionsInArray[e.currentItem])+e.itemWidth/2,l="webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend";e.isTransition=!0,e.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":a+"px","-moz-perspective-origin":a+"px","perspective-origin":a+"px"}),s.css(t(r,10)).addClass(i).on(l,function(){e.endPrev=!0,s.off(l),e.clearTransStyle(s,i)}),o.addClass(n).on(l,function(){e.endCurrent=!0,o.off(l),e.clearTransStyle(o,n)})},clearTransStyle:function(t,e){var i=this;t.css({position:"",left:""}).removeClass(e),i.endPrev&&i.endCurrent&&(i.$owlWrapper.removeClass("owl-origin"),i.endPrev=!1,i.endCurrent=!1,i.isTransition=!1)},owlStatus:function(){var t=this;t.owl={userOptions:t.userOptions,baseElement:t.$elem,userItems:t.$userItems,owlItems:t.$owlItems,currentItem:t.currentItem,prevItem:t.prevItem,visibleItems:t.visibleItems,isTouch:t.browser.isTouch,browser:t.browser,dragDirection:t.dragDirection}},clearEvents:function(){var n=this;n.$elem.off(".owl owl mousedown.disableTextSelect"),t(i).off(".owl owl"),t(e).off("resize",n.resizer)},unWrap:function(){var t=this;0!==t.$elem.children().length&&(t.$owlWrapper.unwrap(),t.$userItems.unwrap().unwrap(),t.owlControls&&t.owlControls.remove()),t.clearEvents(),t.$elem.attr("style",t.$elem.data("owl-originalStyles")||"").attr("class",t.$elem.data("owl-originalClasses"))},destroy:function(){var t=this;t.stop(),e.clearInterval(t.checkVisible),t.unWrap(),t.$elem.removeData()},reinit:function(e){var i=this,n=t.extend({},i.userOptions,e);i.unWrap(),i.init(n,i.$elem)},addItem:function(t,e){var i,n=this;return t?0===n.$elem.children().length?(n.$elem.append(t),n.setVars(),!1):(n.unWrap(),i=void 0===e||-1===e?-1:e,i>=n.$userItems.length||-1===i?n.$userItems.eq(-1).after(t):n.$userItems.eq(i).before(t),void n.setVars()):!1},removeItem:function(t){var e,i=this;return 0===i.$elem.children().length?!1:(e=void 0===t||-1===t?-1:t,i.unWrap(),i.$userItems.eq(e).remove(),void i.setVars())}};t.fn.owlCarousel=function(e){return this.each(function(){if(t(this).data("owl-init")===!0)return!1;t(this).data("owl-init",!0);var i=Object.create(n);i.init(e,this),t.data(this,"owlCarousel",i)})},t.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:e,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}}(jQuery,window,document),!function(t,e,i){!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.qtip&&t(jQuery)}(function(n){"use strict";function o(t,e,i,o){this.id=i,this.target=t,this.tooltip=P,this.elements={target:t},this._id=W+"-"+i,this.timers={img:{}},this.options=e,this.plugins={},this.cache={event:{},target:n(),disabled:I,attr:o,onTooltip:I,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=I}function s(t){return t===P||"object"!==n.type(t)}function r(t){return!(n.isFunction(t)||t&&t.attr||t.length||"object"===n.type(t)&&(t.jquery||t.then))}function a(t){var e,i,o,a;return s(t)?I:(s(t.metadata)&&(t.metadata={type:t.metadata}),"content"in t&&(e=t.content,s(e)||e.jquery||e.done?e=t.content={text:i=r(e)?I:e}:i=e.text,"ajax"in e&&(o=e.ajax,a=o&&o.once!==I,delete e.ajax,e.text=function(t,e){var s=i||n(this).attr(e.options.content.attr)||"Loading...",r=n.ajax(n.extend({},o,{context:e})).then(o.success,P,o.error).then(function(t){return t&&a&&e.set("content.text",t),t},function(t,i,n){e.destroyed||0===t.status||e.set("content.text",i+": "+n)});return a?s:(e.set("content.text",s),r)}),"title"in e&&(n.isPlainObject(e.title)&&(e.button=e.title.button,e.title=e.title.text),r(e.title||I)&&(e.title=I))),"position"in t&&s(t.position)&&(t.position={my:t.position,at:t.position}),"show"in t&&s(t.show)&&(t.show=t.show.jquery?{target:t.show}:t.show===A?{ready:A}:{event:t.show}),"hide"in t&&s(t.hide)&&(t.hide=t.hide.jquery?{target:t.hide}:{event:t.hide}),"style"in t&&s(t.style)&&(t.style={classes:t.style}),n.each(B,function(){this.sanitize&&this.sanitize(t)}),t)}function l(t,e){for(var i,n=0,o=t,s=e.split(".");o=o[s[n++]];)n<s.length&&(i=o);return[i||t,s.pop()]}function c(t,e){var i,n,o;for(i in this.checks)for(n in this.checks[i])(o=new RegExp(n,"i").exec(t))&&(e.push(o),("builtin"===i||this.plugins[i])&&this.checks[i][n].apply(this.plugins[i]||this,e))}function h(t){return K.concat("").join(t?"-"+t+" ":" ")}function u(t,e){return e>0?setTimeout(n.proxy(t,this),e):void t.call(this)}function d(t){this.tooltip.hasClass(te)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=u.call(this,function(){this.toggle(A,t)},this.options.show.delay))}function p(t){if(!this.tooltip.hasClass(te)&&!this.destroyed){var e=n(t.relatedTarget),i=e.closest(X)[0]===this.tooltip[0],o=e[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==e[0]&&"mouse"===this.options.position.target&&i||this.options.hide.fixed&&/mouse(out|leave|move)/.test(t.type)&&(i||o))try{t.preventDefault(),t.stopImmediatePropagation()}catch(s){}else this.timers.hide=u.call(this,function(){this.toggle(I,t)},this.options.hide.delay,this)}}function f(t){!this.tooltip.hasClass(te)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=u.call(this,function(){this.hide(t)},this.options.hide.inactive))}function m(t){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(t)}function g(t,i,o){n(e.body).delegate(t,(i.split?i:i.join("."+W+" "))+"."+W,function(){var t=C.api[n.attr(this,U)];t&&!t.disabled&&o.apply(t,arguments)})}function v(t,i,s){var r,l,c,h,u,d=n(e.body),p=t[0]===e?d:t,f=t.metadata?t.metadata(s.metadata):P,m="html5"===s.metadata.type&&f?f[s.metadata.name]:P,g=t.data(s.metadata.name||"qtipopts");try{g="string"==typeof g?n.parseJSON(g):g}catch(v){}if(h=n.extend(A,{},C.defaults,s,"object"==typeof g?a(g):P,a(m||f)),l=h.position,h.id=i,"boolean"==typeof h.content.text){if(c=t.attr(h.content.attr),h.content.attr===I||!c)return I;h.content.text=c}if(l.container.length||(l.container=d),l.target===I&&(l.target=p),h.show.target===I&&(h.show.target=p),h.show.solo===A&&(h.show.solo=l.container.closest("body")),h.hide.target===I&&(h.hide.target=p),h.position.viewport===A&&(h.position.viewport=l.container),l.container=l.container.eq(0),l.at=new T(l.at,A),l.my=new T(l.my),t.data(W))if(h.overwrite)t.qtip("destroy",!0);else if(h.overwrite===I)return I;return t.attr(V,i),h.suppress&&(u=t.attr("title"))&&t.removeAttr("title").attr(ie,u).attr("title",""),r=new o(t,h,i,!!c),t.data(W,r),r}function y(t){return t.charAt(0).toUpperCase()+t.slice(1)}function b(t,e){var n,o,s=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+ve.join(s+" ")+s).split(" "),a=0;if(ge[e])return t.css(ge[e]);for(;n=r[a++];)if((o=t.css(n))!==i)return ge[e]=n,o}function w(t,e){return Math.ceil(parseFloat(b(t,e)))}function _(t,e){this._ns="tip",this.options=e,this.offset=e.offset,this.size=[e.width,e.height],this.init(this.qtip=t)}function x(t,e){this.options=e,this._ns="-modal",this.init(this.qtip=t)}function k(t){this._ns="ie6",this.init(this.qtip=t)}var C,S,T,E,$,A=!0,I=!1,P=null,L="x",D="y",j="width",M="height",N="top",O="left",F="bottom",H="right",z="center",R="flipinvert",q="shift",B={},W="qtip",V="data-hasqtip",U="data-qtip-id",K=["ui-widget","ui-tooltip"],X="."+W,Q="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),Y=W+"-fixed",G=W+"-default",J=W+"-focus",Z=W+"-hover",te=W+"-disabled",ee="_replacedByqTip",ie="oldtitle",ne={ie:function(){for(var t=4,i=e.createElement("div");(i.innerHTML="<!--[if gt IE "+t+"]><i></i><![endif]-->")&&i.getElementsByTagName("i")[0];t+=1);return t>4?t:0/0}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||I};S=o.prototype,S._when=function(t){return n.when.apply(n,t)},S.render=function(t){if(this.rendered||this.destroyed)return this;var e,i=this,o=this.options,s=this.cache,r=this.elements,a=o.content.text,l=o.content.title,c=o.content.button,h=o.position,u=("."+this._id+" ",[]);return n.attr(this.target[0],"aria-describedby",this._id),s.posClass=this._createPosClass((this.position={my:h.my,at:h.at}).my),this.tooltip=r.tooltip=e=n("<div/>",{id:this._id,"class":[W,G,o.style.classes,s.posClass].join(" "),width:o.style.width||"",height:o.style.height||"",tracking:"mouse"===h.target&&h.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":I,"aria-describedby":this._id+"-content","aria-hidden":A}).toggleClass(te,this.disabled).attr(U,this.id).data(W,this).appendTo(h.container).append(r.content=n("<div />",{"class":W+"-content",id:this._id+"-content","aria-atomic":A})),this.rendered=-1,this.positioning=A,l&&(this._createTitle(),n.isFunction(l)||u.push(this._updateTitle(l,I))),c&&this._createButton(),n.isFunction(a)||u.push(this._updateContent(a,I)),this.rendered=A,this._setWidget(),n.each(B,function(t){var e;"render"===this.initialize&&(e=this(i))&&(i.plugins[t]=e)}),this._unassignEvents(),this._assignEvents(),this._when(u).then(function(){i._trigger("render"),i.positioning=I,i.hiddenDuringWait||!o.show.ready&&!t||i.toggle(A,s.event,I),i.hiddenDuringWait=I}),C.api[this.id]=this,this},S.destroy=function(t){function e(){if(!this.destroyed){this.destroyed=A;var t,e=this.target,i=e.attr(ie);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),n.each(this.plugins,function(){this.destroy&&this.destroy()});for(t in this.timers)clearTimeout(this.timers[t]);e.removeData(W).removeAttr(U).removeAttr(V).removeAttr("aria-describedby"),this.options.suppress&&i&&e.attr("title",i).removeAttr(ie),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=P,delete C.api[this.id]}}return this.destroyed?this.target:(t===A&&"hide"!==this.triggering||!this.rendered?e.call(this):(this.tooltip.one("tooltiphidden",n.proxy(e,this)),!this.triggering&&this.hide()),this.target)},E=S.checks={builtin:{"^id$":function(t,e,i,o){var s=i===A?C.nextid:i,r=W+"-"+s;s!==I&&s.length>0&&!n("#"+r).length?(this._id=r,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):t[e]=o},"^prerender":function(t,e,i){i&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(t,e,i){this._updateContent(i)},"^content.attr$":function(t,e,i,n){this.options.content.text===this.target.attr(n)&&this._updateContent(this.target.attr(i))},"^content.title$":function(t,e,i){return i?(i&&!this.elements.title&&this._createTitle(),void this._updateTitle(i)):this._removeTitle()},"^content.button$":function(t,e,i){this._updateButton(i)},"^content.title.(text|button)$":function(t,e,i){this.set("content."+e,i)},"^position.(my|at)$":function(t,e,i){"string"==typeof i&&(this.position[e]=t[e]=new T(i,"at"===e))},"^position.container$":function(t,e,i){this.rendered&&this.tooltip.appendTo(i)},"^show.ready$":function(t,e,i){i&&(!this.rendered&&this.render(A)||this.toggle(A))},"^style.classes$":function(t,e,i,n){this.rendered&&this.tooltip.removeClass(n).addClass(i)},"^style.(width|height)":function(t,e,i){this.rendered&&this.tooltip.css(e,i)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(t,e,i){this.rendered&&this.tooltip.toggleClass(G,!!i)},"^events.(render|show|move|hide|focus|blur)$":function(t,e,i){this.rendered&&this.tooltip[(n.isFunction(i)?"":"un")+"bind"]("tooltip"+e,i)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var t=this.options.position;this.tooltip.attr("tracking","mouse"===t.target&&t.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},S.get=function(t){if(this.destroyed)return this;var e=l(this.options,t.toLowerCase()),i=e[0][e[1]];return i.precedance?i.string():i};var oe=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,se=/^prerender|show\.ready/i;S.set=function(t,e){if(this.destroyed)return this;var i,o=this.rendered,s=I,r=this.options;
return this.checks,"string"==typeof t?(i=t,t={},t[i]=e):t=n.extend({},t),n.each(t,function(e,i){if(o&&se.test(e))return void delete t[e];var a,c=l(r,e.toLowerCase());a=c[0][c[1]],c[0][c[1]]=i&&i.nodeType?n(i):i,s=oe.test(e)||s,t[e]=[c[0],c[1],i,a]}),a(r),this.positioning=A,n.each(t,n.proxy(c,this)),this.positioning=I,this.rendered&&this.tooltip[0].offsetWidth>0&&s&&this.reposition("mouse"===r.position.target?P:this.cache.event),this},S._update=function(t,e){var i=this,o=this.cache;return this.rendered&&t?(n.isFunction(t)&&(t=t.call(this.elements.target,o.event,this)||""),n.isFunction(t.then)?(o.waiting=A,t.then(function(t){return o.waiting=I,i._update(t,e)},P,function(t){return i._update(t,e)})):t===I||!t&&""!==t?I:(t.jquery&&t.length>0?e.empty().append(t.css({display:"block",visibility:"visible"})):e.html(t),this._waitForContent(e).then(function(t){i.rendered&&i.tooltip[0].offsetWidth>0&&i.reposition(o.event,!t.length)}))):I},S._waitForContent=function(t){var e=this.cache;return e.waiting=A,(n.fn.imagesLoaded?t.imagesLoaded():n.Deferred().resolve([])).done(function(){e.waiting=I}).promise()},S._updateContent=function(t,e){this._update(t,this.elements.content,e)},S._updateTitle=function(t,e){this._update(t,this.elements.title,e)===I&&this._removeTitle(I)},S._createTitle=function(){var t=this.elements,e=this._id+"-title";t.titlebar&&this._removeTitle(),t.titlebar=n("<div />",{"class":W+"-titlebar "+(this.options.style.widget?h("header"):"")}).append(t.title=n("<div />",{id:e,"class":W+"-title","aria-atomic":A})).insertBefore(t.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(t){n(this).toggleClass("ui-state-active ui-state-focus","down"===t.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(t){n(this).toggleClass("ui-state-hover","mouseover"===t.type)}),this.options.content.button&&this._createButton()},S._removeTitle=function(t){var e=this.elements;e.title&&(e.titlebar.remove(),e.titlebar=e.title=e.button=P,t!==I&&this.reposition())},S._createPosClass=function(t){return W+"-pos-"+(t||this.options.position.my).abbrev()},S.reposition=function(i,o){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=A;var s,r,a,l,c=this.cache,h=this.tooltip,u=this.options.position,d=u.target,p=u.my,f=u.at,m=u.viewport,g=u.container,v=u.adjust,y=v.method.split(" "),b=h.outerWidth(I),w=h.outerHeight(I),_=0,x=0,k=h.css("position"),C={left:0,top:0},S=h[0].offsetWidth>0,T=i&&"scroll"===i.type,E=n(t),$=g[0].ownerDocument,P=this.mouse;if(n.isArray(d)&&2===d.length)f={x:O,y:N},C={left:d[0],top:d[1]};else if("mouse"===d)f={x:O,y:N},(!v.mouse||this.options.hide.distance)&&c.origin&&c.origin.pageX?i=c.origin:!i||i&&("resize"===i.type||"scroll"===i.type)?i=c.event:P&&P.pageX&&(i=P),"static"!==k&&(C=g.offset()),$.body.offsetWidth!==(t.innerWidth||$.documentElement.clientWidth)&&(r=n(e.body).offset()),C={left:i.pageX-C.left+(r&&r.left||0),top:i.pageY-C.top+(r&&r.top||0)},v.mouse&&T&&P&&(C.left-=(P.scrollX||0)-E.scrollLeft(),C.top-=(P.scrollY||0)-E.scrollTop());else{if("event"===d?i&&i.target&&"scroll"!==i.type&&"resize"!==i.type?c.target=n(i.target):i.target||(c.target=this.elements.target):"event"!==d&&(c.target=n(d.jquery?d:this.elements.target)),d=c.target,d=n(d).eq(0),0===d.length)return this;d[0]===e||d[0]===t?(_=ne.iOS?t.innerWidth:d.width(),x=ne.iOS?t.innerHeight:d.height(),d[0]===t&&(C={top:(m||d).scrollTop(),left:(m||d).scrollLeft()})):B.imagemap&&d.is("area")?s=B.imagemap(this,d,f,B.viewport?y:I):B.svg&&d&&d[0].ownerSVGElement?s=B.svg(this,d,f,B.viewport?y:I):(_=d.outerWidth(I),x=d.outerHeight(I),C=d.offset()),s&&(_=s.width,x=s.height,r=s.offset,C=s.position),C=this.reposition.offset(d,C,g),(ne.iOS>3.1&&ne.iOS<4.1||ne.iOS>=4.3&&ne.iOS<4.33||!ne.iOS&&"fixed"===k)&&(C.left-=E.scrollLeft(),C.top-=E.scrollTop()),(!s||s&&s.adjustable!==I)&&(C.left+=f.x===H?_:f.x===z?_/2:0,C.top+=f.y===F?x:f.y===z?x/2:0)}return C.left+=v.x+(p.x===H?-b:p.x===z?-b/2:0),C.top+=v.y+(p.y===F?-w:p.y===z?-w/2:0),B.viewport?(a=C.adjusted=B.viewport(this,C,u,_,x,b,w),r&&a.left&&(C.left+=r.left),r&&a.top&&(C.top+=r.top),a.my&&(this.position.my=a.my)):C.adjusted={left:0,top:0},c.posClass!==(l=this._createPosClass(this.position.my))&&h.removeClass(c.posClass).addClass(c.posClass=l),this._trigger("move",[C,m.elem||m],i)?(delete C.adjusted,o===I||!S||isNaN(C.left)||isNaN(C.top)||"mouse"===d||!n.isFunction(u.effect)?h.css(C):n.isFunction(u.effect)&&(u.effect.call(h,this,n.extend({},C)),h.queue(function(t){n(this).css({opacity:"",height:""}),ne.ie&&this.style.removeAttribute("filter"),t()})),this.positioning=I,this):this},S.reposition.offset=function(t,i,o){function s(t,e){i.left+=e*t.scrollLeft(),i.top+=e*t.scrollTop()}if(!o[0])return i;var r,a,l,c,h=n(t[0].ownerDocument),u=!!ne.ie&&"CSS1Compat"!==e.compatMode,d=o[0];do"static"!==(a=n.css(d,"position"))&&("fixed"===a?(l=d.getBoundingClientRect(),s(h,-1)):(l=n(d).position(),l.left+=parseFloat(n.css(d,"borderLeftWidth"))||0,l.top+=parseFloat(n.css(d,"borderTopWidth"))||0),i.left-=l.left+(parseFloat(n.css(d,"marginLeft"))||0),i.top-=l.top+(parseFloat(n.css(d,"marginTop"))||0),r||"hidden"===(c=n.css(d,"overflow"))||"visible"===c||(r=n(d)));while(d=d.offsetParent);return r&&(r[0]!==h[0]||u)&&s(r,1),i};var re=(T=S.reposition.Corner=function(t,e){t=(""+t).replace(/([A-Z])/," $1").replace(/middle/gi,z).toLowerCase(),this.x=(t.match(/left|right/i)||t.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(t.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!e;var i=t.charAt(0);this.precedance="t"===i||"b"===i?D:L}).prototype;re.invert=function(t,e){this[t]=this[t]===O?H:this[t]===H?O:e||this[t]},re.string=function(t){var e=this.x,i=this.y,n=e!==i?"center"===e||"center"!==i&&(this.precedance===D||this.forceY)?[i,e]:[e,i]:[e];return t!==!1?n.join(" "):n},re.abbrev=function(){var t=this.string(!1);return t[0].charAt(0)+(t[1]&&t[1].charAt(0)||"")},re.clone=function(){return new T(this.string(),this.forceY)},S.toggle=function(t,i){var o=this.cache,s=this.options,r=this.tooltip;if(i){if(/over|enter/.test(i.type)&&o.event&&/out|leave/.test(o.event.type)&&s.show.target.add(i.target).length===s.show.target.length&&r.has(i.relatedTarget).length)return this;o.event=n.event.fix(i)}if(this.waiting&&!t&&(this.hiddenDuringWait=A),!this.rendered)return t?this.render(1):this;if(this.destroyed||this.disabled)return this;var a,l,c,h=t?"show":"hide",u=this.options[h],d=(this.options[t?"hide":"show"],this.options.position),p=this.options.content,f=this.tooltip.css("width"),m=this.tooltip.is(":visible"),g=t||1===u.target.length,v=!i||u.target.length<2||o.target[0]===i.target;return(typeof t).search("boolean|number")&&(t=!m),a=!r.is(":animated")&&m===t&&v,l=a?P:!!this._trigger(h,[90]),this.destroyed?this:(l!==I&&t&&this.focus(i),!l||a?this:(n.attr(r[0],"aria-hidden",!t),t?(this.mouse&&(o.origin=n.event.fix(this.mouse)),n.isFunction(p.text)&&this._updateContent(p.text,I),n.isFunction(p.title)&&this._updateTitle(p.title,I),!$&&"mouse"===d.target&&d.adjust.mouse&&(n(e).bind("mousemove."+W,this._storeMouse),$=A),f||r.css("width",r.outerWidth(I)),this.reposition(i,arguments[2]),f||r.css("width",""),u.solo&&("string"==typeof u.solo?n(u.solo):n(X,u.solo)).not(r).not(u.target).qtip("hide",n.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete o.origin,$&&!n(X+'[tracking="true"]:visible',u.solo).not(r).length&&(n(e).unbind("mousemove."+W),$=I),this.blur(i)),c=n.proxy(function(){t?(ne.ie&&r[0].style.removeAttribute("filter"),r.css("overflow",""),"string"==typeof u.autofocus&&n(this.options.show.autofocus,r).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):r.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(t?"visible":"hidden")},this),u.effect===I||g===I?(r[h](),c()):n.isFunction(u.effect)?(r.stop(1,1),u.effect.call(r,this),r.queue("fx",function(t){c(),t()})):r.fadeTo(90,t?1:0,c),t&&u.target.trigger("qtip-"+this.id+"-inactive"),this))},S.show=function(t){return this.toggle(A,t)},S.hide=function(t){return this.toggle(I,t)},S.focus=function(t){if(!this.rendered||this.destroyed)return this;var e=n(X),i=this.tooltip,o=parseInt(i[0].style.zIndex,10),s=C.zindex+e.length;return i.hasClass(J)||this._trigger("focus",[s],t)&&(o!==s&&(e.each(function(){this.style.zIndex>o&&(this.style.zIndex=this.style.zIndex-1)}),e.filter("."+J).qtip("blur",t)),i.addClass(J)[0].style.zIndex=s),this},S.blur=function(t){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(J),this._trigger("blur",[this.tooltip.css("zIndex")],t),this)},S.disable=function(t){return this.destroyed?this:("toggle"===t?t=!(this.rendered?this.tooltip.hasClass(te):this.disabled):"boolean"!=typeof t&&(t=A),this.rendered&&this.tooltip.toggleClass(te,t).attr("aria-disabled",t),this.disabled=!!t,this)},S.enable=function(){return this.disable(I)},S._createButton=function(){var t=this,e=this.elements,i=e.tooltip,o=this.options.content.button,s="string"==typeof o,r=s?o:"Close tooltip";e.button&&e.button.remove(),e.button=o.jquery?o:n("<a />",{"class":"qtip-close "+(this.options.style.widget?"":W+"-icon"),title:r,"aria-label":r}).prepend(n("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),e.button.appendTo(e.titlebar||i).attr("role","button").click(function(e){return i.hasClass(te)||t.hide(e),I})},S._updateButton=function(t){if(!this.rendered)return I;var e=this.elements.button;t?this._createButton():e.remove()},S._setWidget=function(){var t=this.options.style.widget,e=this.elements,i=e.tooltip,n=i.hasClass(te);i.removeClass(te),te=t?"ui-state-disabled":"qtip-disabled",i.toggleClass(te,n),i.toggleClass("ui-helper-reset "+h(),t).toggleClass(G,this.options.style.def&&!t),e.content&&e.content.toggleClass(h("content"),t),e.titlebar&&e.titlebar.toggleClass(h("header"),t),e.button&&e.button.toggleClass(W+"-icon",!t)},S._storeMouse=function(t){return(this.mouse=n.event.fix(t)).type="mousemove",this},S._bind=function(t,e,i,o,s){if(t&&i&&e.length){var r="."+this._id+(o?"-"+o:"");return n(t).bind((e.split?e:e.join(r+" "))+r,n.proxy(i,s||this)),this}},S._unbind=function(t,e){return t&&n(t).unbind("."+this._id+(e?"-"+e:"")),this},S._trigger=function(t,e,i){var o=n.Event("tooltip"+t);return o.originalEvent=i&&n.extend({},i)||this.cache.event||P,this.triggering=t,this.tooltip.trigger(o,[this].concat(e||[])),this.triggering=I,!o.isDefaultPrevented()},S._bindEvents=function(t,e,i,o,s,r){var a=i.filter(o).add(o.filter(i)),l=[];a.length&&(n.each(e,function(e,i){var o=n.inArray(i,t);o>-1&&l.push(t.splice(o,1)[0])}),l.length&&(this._bind(a,l,function(t){var e=this.rendered?this.tooltip[0].offsetWidth>0:!1;(e?r:s).call(this,t)}),i=i.not(a),o=o.not(a))),this._bind(i,t,s),this._bind(o,e,r)},S._assignInitialEvents=function(t){function e(t){return this.disabled||this.destroyed?I:(this.cache.event=t&&n.event.fix(t),this.cache.target=t&&n(t.target),clearTimeout(this.timers.show),void(this.timers.show=u.call(this,function(){this.render("object"==typeof t||i.show.ready)},i.prerender?0:i.show.delay)))}var i=this.options,o=i.show.target,s=i.hide.target,r=i.show.event?n.trim(""+i.show.event).split(" "):[],a=i.hide.event?n.trim(""+i.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(i.show.event)&&!/mouse(out|leave)/i.test(i.hide.event)&&a.push("mouseleave"),this._bind(o,"mousemove",function(t){this._storeMouse(t),this.cache.onTarget=A}),this._bindEvents(r,a,o,s,e,function(){return this.timers?void clearTimeout(this.timers.show):I}),(i.show.ready||i.prerender)&&e.call(this,t)},S._assignEvents=function(){var i=this,o=this.options,s=o.position,r=this.tooltip,a=o.show.target,l=o.hide.target,c=s.container,h=s.viewport,u=n(e),g=(n(e.body),n(t)),v=o.show.event?n.trim(""+o.show.event).split(" "):[],y=o.hide.event?n.trim(""+o.hide.event).split(" "):[];n.each(o.events,function(t,e){i._bind(r,"toggle"===t?["tooltipshow","tooltiphide"]:["tooltip"+t],e,null,r)}),/mouse(out|leave)/i.test(o.hide.event)&&"window"===o.hide.leave&&this._bind(u,["mouseout","blur"],function(t){/select|option/.test(t.target.nodeName)||t.relatedTarget||this.hide(t)}),o.hide.fixed?l=l.add(r.addClass(Y)):/mouse(over|enter)/i.test(o.show.event)&&this._bind(l,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+o.hide.event).indexOf("unfocus")>-1&&this._bind(c.closest("html"),["mousedown","touchstart"],function(t){var e=n(t.target),i=this.rendered&&!this.tooltip.hasClass(te)&&this.tooltip[0].offsetWidth>0,o=e.parents(X).filter(this.tooltip[0]).length>0;e[0]===this.target[0]||e[0]===this.tooltip[0]||o||this.target.has(e[0]).length||!i||this.hide(t)}),"number"==typeof o.hide.inactive&&(this._bind(a,"qtip-"+this.id+"-inactive",f,"inactive"),this._bind(l.add(r),C.inactiveEvents,f)),this._bindEvents(v,y,a,l,d,p),this._bind(a.add(r),"mousemove",function(t){if("number"==typeof o.hide.distance){var e=this.cache.origin||{},i=this.options.hide.distance,n=Math.abs;(n(t.pageX-e.pageX)>=i||n(t.pageY-e.pageY)>=i)&&this.hide(t)}this._storeMouse(t)}),"mouse"===s.target&&s.adjust.mouse&&(o.hide.event&&this._bind(a,["mouseenter","mouseleave"],function(t){return this.cache?void(this.cache.onTarget="mouseenter"===t.type):I}),this._bind(u,"mousemove",function(t){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(te)&&this.tooltip[0].offsetWidth>0&&this.reposition(t)})),(s.adjust.resize||h.length)&&this._bind(n.event.special.resize?h:g,"resize",m),s.adjust.scroll&&this._bind(g.add(s.container),"scroll",m)},S._unassignEvents=function(){var i=this.options,o=i.show.target,s=i.hide.target,r=n.grep([this.elements.target[0],this.rendered&&this.tooltip[0],i.position.container[0],i.position.viewport[0],i.position.container.closest("html")[0],t,e],function(t){return"object"==typeof t});o&&o.toArray&&(r=r.concat(o.toArray())),s&&s.toArray&&(r=r.concat(s.toArray())),this._unbind(r)._unbind(r,"destroy")._unbind(r,"inactive")},n(function(){g(X,["mouseenter","mouseleave"],function(t){var e="mouseenter"===t.type,i=n(t.currentTarget),o=n(t.relatedTarget||t.target),s=this.options;e?(this.focus(t),i.hasClass(Y)&&!i.hasClass(te)&&clearTimeout(this.timers.hide)):"mouse"===s.position.target&&s.position.adjust.mouse&&s.hide.event&&s.show.target&&!o.closest(s.show.target[0]).length&&this.hide(t),i.toggleClass(Z,e)}),g("["+U+"]",Q,f)}),C=n.fn.qtip=function(t,e,o){var s=(""+t).toLowerCase(),r=P,l=n.makeArray(arguments).slice(1),c=l[l.length-1],h=this[0]?n.data(this[0],W):P;return!arguments.length&&h||"api"===s?h:"string"==typeof t?(this.each(function(){var t=n.data(this,W);if(!t)return A;if(c&&c.timeStamp&&(t.cache.event=c),!e||"option"!==s&&"options"!==s)t[s]&&t[s].apply(t,l);else{if(o===i&&!n.isPlainObject(e))return r=t.get(e),I;t.set(e,o)}}),r!==P?r:this):"object"!=typeof t&&arguments.length?void 0:(h=a(n.extend(A,{},t)),this.each(function(t){var e,i;return i=n.isArray(h.id)?h.id[t]:h.id,i=!i||i===I||i.length<1||C.api[i]?C.nextid++:i,e=v(n(this),i,h),e===I?A:(C.api[i]=e,n.each(B,function(){"initialize"===this.initialize&&this(e)}),void e._assignInitialEvents(c))}))},n.qtip=o,C.api={},n.each({attr:function(t,e){if(this.length){var i=this[0],o="title",s=n.data(i,"qtip");if(t===o&&s&&"object"==typeof s&&s.options.suppress)return arguments.length<2?n.attr(i,ie):(s&&s.options.content.attr===o&&s.cache.attr&&s.set("content.text",e),this.attr(ie,e))}return n.fn["attr"+ee].apply(this,arguments)},clone:function(t){var e=(n([]),n.fn["clone"+ee].apply(this,arguments));return t||e.filter("["+ie+"]").attr("title",function(){return n.attr(this,ie)}).removeAttr(ie),e}},function(t,e){if(!e||n.fn[t+ee])return A;var i=n.fn[t+ee]=n.fn[t];n.fn[t]=function(){return e.apply(this,arguments)||i.apply(this,arguments)}}),n.ui||(n["cleanData"+ee]=n.cleanData,n.cleanData=function(t){for(var e,i=0;(e=n(t[i])).length;i++)if(e.attr(V))try{e.triggerHandler("removeqtip")}catch(o){}n["cleanData"+ee].apply(this,arguments)}),C.version="2.2.1",C.nextid=0,C.inactiveEvents=Q,C.zindex=15e3,C.defaults={prerender:I,id:I,overwrite:A,suppress:A,content:{text:A,attr:"title",title:I,button:I},position:{my:"top left",at:"bottom right",target:I,container:I,viewport:I,adjust:{x:0,y:0,mouse:A,scroll:A,resize:A,method:"flipinvert flipinvert"},effect:function(t,e){n(this).animate(e,{duration:200,queue:I})}},show:{target:I,event:"mouseenter",effect:A,delay:90,solo:I,ready:I,autofocus:I},hide:{target:I,event:"mouseleave",effect:A,delay:0,fixed:I,inactive:I,leave:"window",distance:I},style:{classes:"",widget:I,width:I,height:I,def:A},events:{render:P,move:P,show:P,hide:P,toggle:P,visible:P,hidden:P,focus:P,blur:P}};var ae,le="margin",ce="border",he="color",ue="background-color",de="transparent",pe=" !important",fe=!!e.createElement("canvas").getContext,me=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,ge={},ve=["Webkit","O","Moz","ms"];if(fe)var ye=t.devicePixelRatio||1,be=function(){var t=e.createElement("canvas").getContext("2d");return t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||1}(),we=ye/be;else var _e=function(t,e,i){return"<qtipvml:"+t+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(e||"")+' style="behavior: url(#default#VML); '+(i||"")+'" />'};n.extend(_.prototype,{init:function(t){var e,i;i=this.element=t.elements.tip=n("<div />",{"class":W+"-tip"}).prependTo(t.tooltip),fe?(e=n("<canvas />").appendTo(this.element)[0].getContext("2d"),e.lineJoin="miter",e.miterLimit=1e5,e.save()):(e=_e("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(e+e),t._bind(n("*",i).add(i),["click","mousedown"],function(t){t.stopPropagation()},this._ns)),t._bind(t.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(t){var e=this.qtip.elements.titlebar;return e&&(t.y===N||t.y===z&&this.element.position().top+this.size[1]/2+this.options.offset<e.outerHeight(A))},_parseCorner:function(t){var e=this.qtip.options.position.my;return t===I||e===I?t=I:t===A?t=new T(e.string()):t.string||(t=new T(t),t.fixed=A),t},_parseWidth:function(t,e,i){var n=this.qtip.elements,o=ce+y(e)+"Width";return(i?w(i,o):w(n.content,o)||w(this._useTitle(t)&&n.titlebar||n.content,o)||w(n.tooltip,o))||0},_parseRadius:function(t){var e=this.qtip.elements,i=ce+y(t.y)+y(t.x)+"Radius";return ne.ie<9?0:w(this._useTitle(t)&&e.titlebar||e.content,i)||w(e.tooltip,i)||0},_invalidColour:function(t,e,i){var n=t.css(e);return!n||i&&n===t.css(i)||me.test(n)?I:n},_parseColours:function(t){var e=this.qtip.elements,i=this.element.css("cssText",""),o=ce+y(t[t.precedance])+y(he),s=this._useTitle(t)&&e.titlebar||e.content,r=this._invalidColour,a=[];return a[0]=r(i,ue)||r(s,ue)||r(e.content,ue)||r(e.tooltip,ue)||i.css(ue),a[1]=r(i,o,he)||r(s,o,he)||r(e.content,o,he)||r(e.tooltip,o,he)||e.tooltip.css(o),n("*",i).add(i).css("cssText",ue+":"+de+pe+";"+ce+":0"+pe+";"),a},_calculateSize:function(t){var e,i,n,o=t.precedance===D,s=this.options.width,r=this.options.height,a="c"===t.abbrev(),l=(o?s:r)*(a?.5:1),c=Math.pow,h=Math.round,u=Math.sqrt(c(l,2)+c(r,2)),d=[this.border/l*u,this.border/r*u];return d[2]=Math.sqrt(c(d[0],2)-c(this.border,2)),d[3]=Math.sqrt(c(d[1],2)-c(this.border,2)),e=u+d[2]+d[3]+(a?0:d[0]),i=e/u,n=[h(i*s),h(i*r)],o?n:n.reverse()},_calculateTip:function(t,e,i){i=i||1,e=e||this.size;var n=e[0]*i,o=e[1]*i,s=Math.ceil(n/2),r=Math.ceil(o/2),a={br:[0,0,n,o,n,0],bl:[0,0,n,0,0,o],tr:[0,o,n,0,n,o],tl:[0,0,0,o,n,o],tc:[0,o,s,0,n,o],bc:[0,0,n,0,s,o],rc:[0,0,n,r,0,o],lc:[n,0,n,o,0,r]};return a.lt=a.br,a.rt=a.bl,a.lb=a.tr,a.rb=a.tl,a[t.abbrev()]},_drawCoords:function(t,e){t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.closePath()},create:function(){var t=this.corner=(fe||ne.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=t.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(e,i){if(!this.enabled)return this;var o,s,r,a,l,c,h,u,d=this.qtip.elements,p=this.element,f=p.children(),m=this.options,g=this.size,v=m.mimic,y=Math.round;e||(e=this.qtip.cache.corner||this.corner),v===I?v=e:(v=new T(v),v.precedance=e.precedance,"inherit"===v.x?v.x=e.x:"inherit"===v.y?v.y=e.y:v.x===v.y&&(v[e.precedance]=e[e.precedance])),s=v.precedance,e.precedance===L?this._swapDimensions():this._resetDimensions(),o=this.color=this._parseColours(e),o[1]!==de?(u=this.border=this._parseWidth(e,e[e.precedance]),m.border&&1>u&&!me.test(o[1])&&(o[0]=o[1]),this.border=u=m.border!==A?m.border:u):this.border=u=0,h=this.size=this._calculateSize(e),p.css({width:h[0],height:h[1],lineHeight:h[1]+"px"}),c=e.precedance===D?[y(v.x===O?u:v.x===H?h[0]-g[0]-u:(h[0]-g[0])/2),y(v.y===N?h[1]-g[1]:0)]:[y(v.x===O?h[0]-g[0]:0),y(v.y===N?u:v.y===F?h[1]-g[1]-u:(h[1]-g[1])/2)],fe?(r=f[0].getContext("2d"),r.restore(),r.save(),r.clearRect(0,0,6e3,6e3),a=this._calculateTip(v,g,we),l=this._calculateTip(v,this.size,we),f.attr(j,h[0]*we).attr(M,h[1]*we),f.css(j,h[0]).css(M,h[1]),this._drawCoords(r,l),r.fillStyle=o[1],r.fill(),r.translate(c[0]*we,c[1]*we),this._drawCoords(r,a),r.fillStyle=o[0],r.fill()):(a=this._calculateTip(v),a="m"+a[0]+","+a[1]+" l"+a[2]+","+a[3]+" "+a[4]+","+a[5]+" xe",c[2]=u&&/^(r|b)/i.test(e.string())?8===ne.ie?2:1:0,f.css({coordsize:h[0]+u+" "+(h[1]+u),antialias:""+(v.string().indexOf(z)>-1),left:c[0]-c[2]*Number(s===L),top:c[1]-c[2]*Number(s===D),width:h[0]+u,height:h[1]+u}).each(function(t){var e=n(this);e[e.prop?"prop":"attr"]({coordsize:h[0]+u+" "+(h[1]+u),path:a,fillcolor:o[0],filled:!!t,stroked:!t}).toggle(!(!u&&!t)),!t&&e.html(_e("stroke",'weight="'+2*u+'px" color="'+o[1]+'" miterlimit="1000" joinstyle="miter"'))})),t.opera&&setTimeout(function(){d.tip.css({display:"inline-block",visibility:"visible"})},1),i!==I&&this.calculate(e,h)},calculate:function(t,e){if(!this.enabled)return I;var i,o,s=this,r=this.qtip.elements,a=this.element,l=this.options.offset,c=(r.tooltip.hasClass("ui-widget"),{});return t=t||this.corner,i=t.precedance,e=e||this._calculateSize(t),o=[t.x,t.y],i===L&&o.reverse(),n.each(o,function(n,o){var a,h,u;o===z?(a=i===D?O:N,c[a]="50%",c[le+"-"+a]=-Math.round(e[i===D?0:1]/2)+l):(a=s._parseWidth(t,o,r.tooltip),h=s._parseWidth(t,o,r.content),u=s._parseRadius(t),c[o]=Math.max(-s.border,n?h:l+(u>a?u:-a)))}),c[t[i]]-=e[i===L?0:1],a.css({margin:"",top:"",bottom:"",left:"",right:""}).css(c),c},reposition:function(t,e,n){function o(t,e,i,n,o){t===q&&c.precedance===e&&h[n]&&c[i]!==z?c.precedance=c.precedance===L?D:L:t!==q&&h[n]&&(c[e]=c[e]===z?h[n]>0?n:o:c[e]===n?o:n)}function s(t,e,o){c[t]===z?m[le+"-"+e]=f[t]=r[le+"-"+e]-h[e]:(a=r[o]!==i?[h[e],-r[e]]:[-h[e],r[e]],(f[t]=Math.max(a[0],a[1]))>a[0]&&(n[e]-=h[e],f[e]=I),m[r[o]!==i?o:e]=f[t])}if(this.enabled){var r,a,l=e.cache,c=this.corner.clone(),h=n.adjusted,u=e.options.position.adjust.method.split(" "),d=u[0],p=u[1]||u[0],f={left:I,top:I,x:0,y:0},m={};this.corner.fixed!==A&&(o(d,L,D,O,H),o(p,D,L,N,F),(c.string()!==l.corner.string()||l.cornerTop!==h.top||l.cornerLeft!==h.left)&&this.update(c,I)),r=this.calculate(c),r.right!==i&&(r.left=-r.right),r.bottom!==i&&(r.top=-r.bottom),r.user=this.offset,(f.left=d===q&&!!h.left)&&s(L,O,H),(f.top=p===q&&!!h.top)&&s(D,N,F),this.element.css(m).toggle(!(f.x&&f.y||c.x===z&&f.y||c.y===z&&f.x)),n.left-=r.left.charAt?r.user:d!==q||f.top||!f.left&&!f.top?r.left+this.border:0,n.top-=r.top.charAt?r.user:p!==q||f.left||!f.left&&!f.top?r.top+this.border:0,l.cornerLeft=h.left,l.cornerTop=h.top,l.corner=c.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),ae=B.tip=function(t){return new _(t,t.options.style.tip)},ae.initialize="render",ae.sanitize=function(t){if(t.style&&"tip"in t.style){var e=t.style.tip;"object"!=typeof e&&(e=t.style.tip={corner:e}),/string|boolean/i.test(typeof e.corner)||(e.corner=A)}},E.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(t){this.size=[t.width,t.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},n.extend(A,C.defaults,{style:{tip:{corner:A,mimic:I,width:6,height:6,border:A,offset:0}}});var xe,ke,Ce="qtip-modal",Se="."+Ce;ke=function(){function t(t){if(n.expr[":"].focusable)return n.expr[":"].focusable;var e,i,o,s=!isNaN(n.attr(t,"tabindex")),r=t.nodeName&&t.nodeName.toLowerCase();return"area"===r?(e=t.parentNode,i=e.name,t.href&&i&&"map"===e.nodeName.toLowerCase()?(o=n("img[usemap=#"+i+"]")[0],!!o&&o.is(":visible")):!1):/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||s:s}function i(t){h.length<1&&t.length?t.not("body").blur():h.first().focus()}function o(t){if(l.is(":visible")){var e,o=n(t.target),a=s.tooltip,c=o.closest(X);e=c.length<1?I:parseInt(c[0].style.zIndex,10)>parseInt(a[0].style.zIndex,10),e||o.closest(X)[0]===a[0]||i(o),r=t.target===h[h.length-1]}}var s,r,a,l,c=this,h={};n.extend(c,{init:function(){return l=c.elem=n("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return I}}).hide(),n(e.body).bind("focusin"+Se,o),n(e).bind("keydown"+Se,function(t){s&&s.options.show.modal.escape&&27===t.keyCode&&s.hide(t)}),l.bind("click"+Se,function(t){s&&s.options.show.modal.blur&&s.hide(t)}),c},update:function(e){s=e,h=e.options.show.modal.stealfocus!==I?e.tooltip.find("*").filter(function(){return t(this)}):[]},toggle:function(t,o,r){var h=(n(e.body),t.tooltip),u=t.options.show.modal,d=u.effect,p=o?"show":"hide",f=l.is(":visible"),m=n(Se).filter(":visible:not(:animated)").not(h);return c.update(t),o&&u.stealfocus!==I&&i(n(":focus")),l.toggleClass("blurs",u.blur),o&&l.appendTo(e.body),l.is(":animated")&&f===o&&a!==I||!o&&m.length?c:(l.stop(A,I),n.isFunction(d)?d.call(l,o):d===I?l[p]():l.fadeTo(parseInt(r,10)||90,o?1:0,function(){o||l.hide()}),o||l.queue(function(t){l.css({left:"",top:""}),n(Se).length||l.detach(),t()}),a=o,s.destroyed&&(s=P),c)}}),c.init()},ke=new ke,n.extend(x.prototype,{init:function(t){var e=t.tooltip;return this.options.on?(t.elements.overlay=ke.elem,e.addClass(Ce).css("z-index",C.modal_zindex+n(Se).length),t._bind(e,["tooltipshow","tooltiphide"],function(t,i,o){var s=t.originalEvent;if(t.target===e[0])if(s&&"tooltiphide"===t.type&&/mouse(leave|enter)/.test(s.type)&&n(s.relatedTarget).closest(ke.elem[0]).length)try{t.preventDefault()}catch(r){}else(!s||s&&"tooltipsolo"!==s.type)&&this.toggle(t,"tooltipshow"===t.type,o)},this._ns,this),t._bind(e,"tooltipfocus",function(t,i){if(!t.isDefaultPrevented()&&t.target===e[0]){var o=n(Se),s=C.modal_zindex+o.length,r=parseInt(e[0].style.zIndex,10);ke.elem[0].style.zIndex=s-1,o.each(function(){this.style.zIndex>r&&(this.style.zIndex-=1)}),o.filter("."+J).qtip("blur",t.originalEvent),e.addClass(J)[0].style.zIndex=s,ke.update(i);try{t.preventDefault()}catch(a){}}},this._ns,this),void t._bind(e,"tooltiphide",function(t){t.target===e[0]&&n(Se).filter(":visible").not(e).last().qtip("focus",t)},this._ns,this)):this},toggle:function(t,e,i){return t&&t.isDefaultPrevented()?this:void ke.toggle(this.qtip,!!e,i)},destroy:function(){this.qtip.tooltip.removeClass(Ce),this.qtip._unbind(this.qtip.tooltip,this._ns),ke.toggle(this.qtip,I),delete this.qtip.elements.overlay}}),xe=B.modal=function(t){return new x(t,t.options.show.modal)},xe.sanitize=function(t){t.show&&("object"!=typeof t.show.modal?t.show.modal={on:!!t.show.modal}:"undefined"==typeof t.show.modal.on&&(t.show.modal.on=A))},C.modal_zindex=C.zindex-200,xe.initialize="render",E.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},n.extend(A,C.defaults,{show:{modal:{on:I,effect:A,blur:A,stealfocus:A,escape:A}}}),B.viewport=function(i,n,o,s,r,a,l){function c(t,e,i,o,s,r,a,l,c){var h=n[s],y=w[t],b=_[t],x=i===q,k=y===s?c:y===r?-c:-c/2,C=b===s?l:b===r?-l:-l/2,S=g[s]+v[s]-(p?0:d[s]),T=S-h,E=h+c-(a===j?f:m)-S,$=k-(w.precedance===t||y===w[e]?C:0)-(b===z?l/2:0);return x?($=(y===s?1:-1)*k,n[s]+=T>0?T:E>0?-E:0,n[s]=Math.max(-d[s]+v[s],h-$,Math.min(Math.max(-d[s]+v[s]+(a===j?f:m),h+$),n[s],"center"===y?h-k:1e9))):(o*=i===R?2:0,T>0&&(y!==s||E>0)?(n[s]-=$+o,u.invert(t,s)):E>0&&(y!==r||T>0)&&(n[s]-=(y===z?-$:$)+o,u.invert(t,r)),n[s]<g&&-n[s]>E&&(n[s]=h,u=w.clone())),n[s]-h}var h,u,d,p,f,m,g,v,y=o.target,b=i.elements.tooltip,w=o.my,_=o.at,x=o.adjust,k=x.method.split(" "),C=k[0],S=k[1]||k[0],T=o.viewport,E=o.container,$=(i.cache,{left:0,top:0});return T.jquery&&y[0]!==t&&y[0]!==e.body&&"none"!==x.method?(d=E.offset()||$,p="static"===E.css("position"),h="fixed"===b.css("position"),f=T[0]===t?T.width():T.outerWidth(I),m=T[0]===t?T.height():T.outerHeight(I),g={left:h?0:T.scrollLeft(),top:h?0:T.scrollTop()},v=T.offset()||$,("shift"!==C||"shift"!==S)&&(u=w.clone()),$={left:"none"!==C?c(L,D,C,x.x,O,H,j,s,a):0,top:"none"!==S?c(D,L,S,x.y,N,F,M,r,l):0,my:u}):$},B.polys={polygon:function(t,e){var i,n,o,s={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:I},r=0,a=[],l=1,c=1,h=0,u=0;for(r=t.length;r--;)i=[parseInt(t[--r],10),parseInt(t[r+1],10)],i[0]>s.position.right&&(s.position.right=i[0]),i[0]<s.position.left&&(s.position.left=i[0]),i[1]>s.position.bottom&&(s.position.bottom=i[1]),i[1]<s.position.top&&(s.position.top=i[1]),a.push(i);if(n=s.width=Math.abs(s.position.right-s.position.left),o=s.height=Math.abs(s.position.bottom-s.position.top),"c"===e.abbrev())s.position={left:s.position.left+s.width/2,top:s.position.top+s.height/2};else{for(;n>0&&o>0&&l>0&&c>0;)for(n=Math.floor(n/2),o=Math.floor(o/2),e.x===O?l=n:e.x===H?l=s.width-n:l+=Math.floor(n/2),e.y===N?c=o:e.y===F?c=s.height-o:c+=Math.floor(o/2),r=a.length;r--&&!(a.length<2);)h=a[r][0]-s.position.left,u=a[r][1]-s.position.top,(e.x===O&&h>=l||e.x===H&&l>=h||e.x===z&&(l>h||h>s.width-l)||e.y===N&&u>=c||e.y===F&&c>=u||e.y===z&&(c>u||u>s.height-c))&&a.splice(r,1);s.position={left:a[0][0],top:a[0][1]}}return s},rect:function(t,e,i,n){return{width:Math.abs(i-t),height:Math.abs(n-e),position:{left:Math.min(t,i),top:Math.min(e,n)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(t,e,i,n,o){var s=B.polys._angles[o.abbrev()],r=0===s?0:i*Math.cos(s*Math.PI),a=n*Math.sin(s*Math.PI);return{width:2*i-Math.abs(r),height:2*n-Math.abs(a),position:{left:t+r,top:e+a},adjustable:I}},circle:function(t,e,i,n){return B.polys.ellipse(t,e,i,i,n)}},B.svg=function(t,i,o){for(var s,r,a,l,c,h,u,d,p,f=(n(e),i[0]),m=n(f.ownerSVGElement),g=f.ownerDocument,v=(parseInt(i.css("stroke-width"),10)||0)/2;!f.getBBox;)f=f.parentNode;if(!f.getBBox||!f.parentNode)return I;switch(f.nodeName){case"ellipse":case"circle":d=B.polys.ellipse(f.cx.baseVal.value,f.cy.baseVal.value,(f.rx||f.r).baseVal.value+v,(f.ry||f.r).baseVal.value+v,o);break;case"line":case"polygon":case"polyline":for(u=f.points||[{x:f.x1.baseVal.value,y:f.y1.baseVal.value},{x:f.x2.baseVal.value,y:f.y2.baseVal.value}],d=[],h=-1,l=u.numberOfItems||u.length;++h<l;)c=u.getItem?u.getItem(h):u[h],d.push.apply(d,[c.x,c.y]);d=B.polys.polygon(d,o);break;default:d=f.getBBox(),d={width:d.width,height:d.height,position:{left:d.x,top:d.y}}}return p=d.position,m=m[0],m.createSVGPoint&&(r=f.getScreenCTM(),u=m.createSVGPoint(),u.x=p.left,u.y=p.top,a=u.matrixTransform(r),p.left=a.x,p.top=a.y),g!==e&&"mouse"!==t.position.target&&(s=n((g.defaultView||g.parentWindow).frameElement).offset(),s&&(p.left+=s.left,p.top+=s.top)),g=n(g),p.left+=g.scrollLeft(),p.top+=g.scrollTop(),d},B.imagemap=function(t,e,i){e.jquery||(e=n(e));var o,s,r,a,l,c=(e.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),h=n('img[usemap="#'+e.parent("map").attr("name")+'"]'),u=n.trim(e.attr("coords")),d=u.replace(/,$/,"").split(",");if(!h.length)return I;if("polygon"===c)a=B.polys.polygon(d,i);else{if(!B.polys[c])return I;for(r=-1,l=d.length,s=[];++r<l;)s.push(parseInt(d[r],10));a=B.polys[c].apply(this,s.concat(i))}return o=h.offset(),o.left+=Math.ceil((h.outerWidth(I)-h.width())/2),o.top+=Math.ceil((h.outerHeight(I)-h.height())/2),a.position.left+=o.left,a.position.top+=o.top,a};var Te,Ee='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';n.extend(k.prototype,{_scroll:function(){var e=this.qtip.elements.overlay;e&&(e[0].style.top=n(t).scrollTop()+"px")},init:function(i){var o=i.tooltip;
n("select, object").length<1&&(this.bgiframe=i.elements.bgiframe=n(Ee).appendTo(o),i._bind(o,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=n("<div/>",{id:W+"-rcontainer"}).appendTo(e.body),i.elements.overlay&&i.elements.overlay.addClass("qtipmodal-ie6fix")&&(i._bind(t,["scroll","resize"],this._scroll,this._ns,this),i._bind(o,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var t,e,i=this.qtip.tooltip,n={height:i.outerHeight(I),width:i.outerWidth(I)},o=this.qtip.plugins.tip,s=this.qtip.elements.tip;e=parseInt(i.css("borderLeftWidth"),10)||0,e={left:-e,top:-e},o&&s&&(t="x"===o.corner.precedance?[j,O]:[M,N],e[t[1]]-=s[t[0]]()),this.bgiframe.css(e).css(n)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var t,e,i,n,o=this.qtip.tooltip,s=this.qtip.options.style,r=this.qtip.options.position.container;return this.qtip.drawing=1,s.height&&o.css(M,s.height),s.width?o.css(j,s.width):(o.css(j,"").appendTo(this.redrawContainer),e=o.width(),1>e%2&&(e+=1),i=o.css("maxWidth")||"",n=o.css("minWidth")||"",t=(i+n).indexOf("%")>-1?r.width()/100:0,i=(i.indexOf("%")>-1?t:1)*parseInt(i,10)||e,n=(n.indexOf("%")>-1?t:1)*parseInt(n,10)||0,e=i+n?Math.min(Math.max(e,n),i):e,o.css(j,Math.round(e)).appendTo(r)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([t,this.qtip.tooltip],this._ns)}}),Te=B.ie6=function(t){return 6===ne.ie?new k(t):I},Te.initialize="render",E.ie6={"^content|style$":function(){this.redraw()}}})}(window,document),/*!
 * Copyright 2012, Chris Wanstrath
 * Released under the MIT License
 * https://github.com/defunkt/jquery-pjax
 */
function(t){function e(e,n,o){var s=this;return this.on("click.pjax",e,function(e){var r=t.extend({},p(n,o));r.container||(r.container=t(this).attr("data-pjax")||s),i(e,r)})}function i(e,i,n){n=p(i,n);var s=e.currentTarget;if("A"!==s.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==s.protocol||location.hostname!==s.hostname||s.href.indexOf("#")>-1&&d(s)==d(location)||e.isDefaultPrevented())){var r={url:s.href,container:t(s).attr("data-pjax"),target:s},a=t.extend({},r,n),l=t.Event("pjax:click");t(s).trigger(l,[a]),l.isDefaultPrevented()||(o(a),e.preventDefault(),t(s).trigger("pjax:clicked",[a]))}}function n(e,i,n){n=p(i,n);var s=e.currentTarget;if("FORM"!==s.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var r={type:s.method.toUpperCase(),url:s.action,container:t(s).attr("data-pjax"),target:s};if("GET"!==r.type&&void 0!==window.FormData)r.data=new FormData(s),r.processData=!1,r.contentType=!1;else{if(t(s).find(":file").length)return;r.data=t(s).serializeArray()}o(t.extend({},r,n)),e.preventDefault()}function o(e){function i(e,i,o){o||(o={}),o.relatedTarget=n;var s=t.Event(e,o);return a.trigger(s,i),!s.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,o.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var n=e.target,s=u(e.url).hash,a=e.context=f(e.container);e.data||(e.data={}),t.isArray(e.data)?e.data.push({name:"_pjax",value:a.selector}):e.data._pjax=a.selector;var l;e.beforeSend=function(t,n){return"GET"!==n.type&&(n.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",a.selector),i("pjax:beforeSend",[t,n])?(n.timeout>0&&(l=setTimeout(function(){i("pjax:timeout",[t,e])&&t.abort("timeout")},n.timeout),n.timeout=0),void(e.requestUrl=u(n.url).href)):!1},e.complete=function(t,n){l&&clearTimeout(l),i("pjax:complete",[t,n,e]),i("pjax:end",[t,e])},e.error=function(t,n,o){var s=v("",t,e),a=i("pjax:error",[t,n,o,e]);"GET"==e.type&&"abort"!==n&&a&&r(s.url)},e.success=function(n,l,h){var d=o.state,p="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,f=h.getResponseHeader("X-PJAX-Version"),m=v(n,h,e);if(p&&f&&p!==f)return void r(m.url);if(!m.contents)return void r(m.url);o.state={id:e.id||c(),url:m.url,title:m.title,container:a.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(o.state,m.title,m.url);try{document.activeElement.blur()}catch(g){}m.title&&(document.title=m.title),i("pjax:beforeReplace",[m.contents,e],{state:o.state,previousState:d}),a.html(m.contents);var b=a.find("input[autofocus], textarea[autofocus]").last()[0];if(b&&document.activeElement!==b&&b.focus(),y(m.scripts),"number"==typeof e.scrollTo&&t(window).scrollTop(e.scrollTo),""!==s){var w=u(m.url);w.hash=s,o.state.url=w.href,window.history.replaceState(o.state,m.title,w.href);var _=document.getElementById(w.hash.slice(1));_&&t(window).scrollTop(t(_).offset().top)}i("pjax:success",[n,l,h,e])},o.state||(o.state={id:c(),url:window.location.href,title:document.title,container:a.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(o.state,document.title));var d=o.xhr;d&&d.readyState<4&&(d.onreadystatechange=t.noop,d.abort()),o.options=e;var d=o.xhr=t.ajax(e);return d.readyState>0&&(e.push&&!e.replace&&(b(o.state.id,a.clone().contents()),window.history.pushState(null,"",h(e.requestUrl))),i("pjax:start",[d,e]),i("pjax:send",[d,e])),o.xhr}function s(e,i){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return o(t.extend(n,p(e,i)))}function r(t){window.history.replaceState(null,"",o.state.url),window.location.replace(t)}function a(e){var i=o.state,n=e.state;if(n&&n.container){if(S&&T==n.url)return;if(o.state&&o.state.id===n.id)return;var s=t(n.container);if(s.length){var a,l=$[n.id];o.state&&(a=o.state.id<n.id?"forward":"back",w(a,o.state.id,s.clone().contents()));var c=t.Event("pjax:popstate",{state:n,direction:a});s.trigger(c);var h={id:n.id,url:n.url,container:s,push:!1,fragment:n.fragment,timeout:n.timeout,scrollTo:!1};if(l){s.trigger("pjax:start",[null,h]),o.state=n,n.title&&(document.title=n.title);var u=t.Event("pjax:beforeReplace",{state:n,previousState:i});s.trigger(u,[l,h]),s.html(l),s.trigger("pjax:end",[null,h])}else o(h);s[0].offsetHeight}else r(location.href)}S=!1}function l(e){var i=t.isFunction(e.url)?e.url():e.url,n=e.type?e.type.toUpperCase():"GET",o=t("<form>",{method:"GET"===n?"GET":"POST",action:i,style:"display:none"});"GET"!==n&&"POST"!==n&&o.append(t("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var s=e.data;if("string"==typeof s)t.each(s.split("&"),function(e,i){var n=i.split("=");o.append(t("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if("object"==typeof s)for(key in s)o.append(t("<input>",{type:"hidden",name:key,value:s[key]}));t(document.body).append(o),o.submit()}function c(){return(new Date).getTime()}function h(t){return t.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function u(t){var e=document.createElement("a");return e.href=t,e}function d(t){return t.href.replace(/#.*/,"")}function p(e,i){return e&&i?i.container=e:i=t.isPlainObject(e)?e:{container:e},i.container&&(i.container=f(i.container)),i}function f(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function m(t,e){return t.filter(e).add(t.find(e))}function g(e){return t.parseHTML(e,document,!0)}function v(e,i,n){var o={},s=/<html/i.test(e);if(o.url=h(i.getResponseHeader("X-PJAX-URL")||n.requestUrl),s)var r=t(g(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),a=t(g(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var r=a=t(g(e));if(0===a.length)return o;if(o.title=m(r,"title").last().text(),n.fragment){if("body"===n.fragment)var l=a;else var l=m(a,n.fragment).first();l.length&&(o.contents="body"===n.fragment?l:l.contents(),o.title||(o.title=l.attr("title")||l.data("title")))}else s||(o.contents=a);return o.contents&&(o.contents=o.contents.not(function(){return t(this).is("title")}),o.contents.find("title").remove(),o.scripts=m(o.contents,"script[src]").remove(),o.contents=o.contents.not(o.scripts)),o.title&&(o.title=t.trim(o.title)),o}function y(e){if(e){var i=t("script[src]");e.each(function(){var e=this.src,n=i.filter(function(){return this.src===e});if(!n.length){var o=document.createElement("script"),s=t(this).attr("type");s&&(o.type=s),o.src=t(this).attr("src"),document.head.appendChild(o)}})}}function b(t,e){$[t]=e,I.push(t),_(A,0),_(I,o.defaults.maxCacheLength)}function w(t,e,i){var n,s;$[e]=i,"forward"===t?(n=I,s=A):(n=A,s=I),n.push(e),(e=s.pop())&&delete $[e],_(n,o.defaults.maxCacheLength)}function _(t,e){for(;t.length>e;)delete $[t.shift()]}function x(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function k(){t.fn.pjax=e,t.pjax=o,t.pjax.enable=t.noop,t.pjax.disable=C,t.pjax.click=i,t.pjax.submit=n,t.pjax.reload=s,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:x},t(window).on("popstate.pjax",a)}function C(){t.fn.pjax=function(){return this},t.pjax=l,t.pjax.enable=k,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",a)}var S=!0,T=window.location.href,E=window.history.state;E&&E.container&&(o.state=E),"state"in window.history&&(S=!1);var $={},A=[],I=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),t.support.pjax?k():C()}(jQuery),function(t){t.fn.fontFlex=function(e,i,n){var o=this;t(window).resize(function(){var t=window.innerWidth/n;e>t&&(t=e),t>i&&(t=i),o.css("font-size",t+"px")}).trigger("resize")}}(jQuery);/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
var Handlebars={};!function(t,e){t.VERSION="1.0.0",t.COMPILER_REVISION=4,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},t.helpers={},t.partials={};var i=Object.prototype.toString,n="[object Function]",o="[object Object]";t.registerHelper=function(e,n,s){if(i.call(e)===o){if(s||n)throw new t.Exception("Arg not supported with multiple helpers");t.Utils.extend(this.helpers,e)}else s&&(n.not=s),this.helpers[e]=n},t.registerPartial=function(e,n){i.call(e)===o?t.Utils.extend(this.partials,e):this.partials[e]=n},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return e;throw new Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,o){var s=o.inverse||function(){},r=o.fn,a=i.call(e);return a===n&&(e=e.call(this)),e===!0?r(this):e===!1||null==e?s(this):"[object Array]"===a?e.length>0?t.helpers.each(e,o):s(this):r(e)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var i=new t.K;return t.K.prototype=null,i},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,i){if(t.logger.level<=e){var n=t.logger.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,i)}}},t.log=function(e,i){t.logger.log(e,i)},t.registerHelper("each",function(e,o){var s,r=o.fn,a=o.inverse,l=0,c="",h=i.call(e);if(h===n&&(e=e.call(this)),o.data&&(s=t.createFrame(o.data)),e&&"object"==typeof e)if(e instanceof Array)for(var u=e.length;u>l;l++)s&&(s.index=l),c+=r(e[l],{data:s});else for(var d in e)e.hasOwnProperty(d)&&(s&&(s.key=d),c+=r(e[d],{data:s}),l++);return 0===l&&(c=a(this)),c}),t.registerHelper("if",function(e,o){var s=i.call(e);return s===n&&(e=e.call(this)),!e||t.Utils.isEmpty(e)?o.inverse(this):o.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn})}),t.registerHelper("with",function(e,o){var s=i.call(e);return s===n&&(e=e.call(this)),t.Utils.isEmpty(e)?void 0:o.fn(e)}),t.registerHelper("log",function(e,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(n,e)});var s=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(t,e,i,n,o,s){var r=s.length-1;switch(o){case 1:return s[r-1];case 2:this.$=new n.ProgramNode([],s[r]);break;case 3:this.$=new n.ProgramNode(s[r-2],s[r]);break;case 4:this.$=new n.ProgramNode(s[r-1],[]);break;case 5:this.$=new n.ProgramNode(s[r]);break;case 6:this.$=new n.ProgramNode([],[]);break;case 7:this.$=new n.ProgramNode([]);break;case 8:this.$=[s[r]];break;case 9:s[r-1].push(s[r]),this.$=s[r-1];break;case 10:this.$=new n.BlockNode(s[r-2],s[r-1].inverse,s[r-1],s[r]);break;case 11:this.$=new n.BlockNode(s[r-2],s[r-1],s[r-1].inverse,s[r]);break;case 12:this.$=s[r];break;case 13:this.$=s[r];break;case 14:this.$=new n.ContentNode(s[r]);break;case 15:this.$=new n.CommentNode(s[r]);break;case 16:this.$=new n.MustacheNode(s[r-1][0],s[r-1][1]);break;case 17:this.$=new n.MustacheNode(s[r-1][0],s[r-1][1]);break;case 18:this.$=s[r-1];break;case 19:this.$=new n.MustacheNode(s[r-1][0],s[r-1][1],"&"===s[r-2][2]);break;case 20:this.$=new n.MustacheNode(s[r-1][0],s[r-1][1],!0);break;case 21:this.$=new n.PartialNode(s[r-1]);break;case 22:this.$=new n.PartialNode(s[r-2],s[r-1]);break;case 23:break;case 24:this.$=[[s[r-2]].concat(s[r-1]),s[r]];break;case 25:this.$=[[s[r-1]].concat(s[r]),null];break;case 26:this.$=[[s[r-1]],s[r]];break;case 27:this.$=[[s[r]],null];break;case 28:this.$=[[s[r]],null];break;case 29:s[r-1].push(s[r]),this.$=s[r-1];break;case 30:this.$=[s[r]];break;case 31:this.$=s[r];break;case 32:this.$=new n.StringNode(s[r]);break;case 33:this.$=new n.IntegerNode(s[r]);break;case 34:this.$=new n.BooleanNode(s[r]);break;case 35:this.$=s[r];break;case 36:this.$=new n.HashNode(s[r]);break;case 37:s[r-1].push(s[r]),this.$=s[r-1];break;case 38:this.$=[s[r]];break;case 39:this.$=[s[r-2],s[r]];break;case 40:this.$=[s[r-2],new n.StringNode(s[r])];break;case 41:this.$=[s[r-2],new n.IntegerNode(s[r])];break;case 42:this.$=[s[r-2],new n.BooleanNode(s[r])];break;case 43:this.$=[s[r-2],s[r]];break;case 44:this.$=new n.PartialNameNode(s[r]);break;case 45:this.$=new n.PartialNameNode(new n.StringNode(s[r]));break;case 46:this.$=new n.PartialNameNode(new n.IntegerNode(s[r]));break;case 47:this.$=new n.DataNode(s[r]);break;case 48:this.$=new n.IdNode(s[r]);break;case 49:s[r-2].push({part:s[r],separator:s[r-1]}),this.$=s[r-2];break;case 50:this.$=[{part:s[r]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,n=[0],o=[null],s=[],r=this.table,a="",l=0,c=0,h=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;s.push(u);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,y,b,w,_,x={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===p||"undefined"==typeof p)&&(p=e()),g=r[m]&&r[m][p]),"undefined"==typeof g||!g.length||!g[0]){var k="";if(!h){_=[];for(y in r[m])this.terminals_[y]&&y>2&&_.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:_})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:n.push(p),o.push(this.lexer.yytext),s.push(this.lexer.yylloc),n.push(g[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,h>0&&h--);break;case 2:if(b=this.productions_[g[1]][1],x.$=o[o.length-b],x._$={first_line:s[s.length-(b||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(b||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(b||1)].range[0],s[s.length-1].range[1]]),v=this.performAction.call(x,a,c,l,this.yy,g[1],o,s),"undefined"!=typeof v)return v;b&&(n=n.slice(0,-1*b*2),o=o.slice(0,-1*b),s=s.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),o.push(x.$),s.push(x._$),w=r[n[n.length-2]][n[n.length-1]],n.push(w);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,o;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),r=0;r<s.length&&(i=this._input.match(this.rules[s[r]]),!i||e&&!(i[0].length>e[0].length)||(e=i,n=r,this.options.flex));r++);return e?(o=e[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,s[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){switch(i){case 0:return e.yytext="\\",14;case 1:if("\\"!==e.yytext.slice(-1)&&this.begin("mu"),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1),this.begin("emu")),e.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1)),14;case 4:return e.yytext=e.yytext.substr(0,e.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return e.yytext=e.yytext.substr(3,e.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\"/g,'"'),31;case 23:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;case 28:return 36;case 29:return e.yytext=e.yytext.substr(1,e.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},t.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}},t}();return e.lexer=i,t.prototype=e,e.Parser=t,new t}();t.Parser=s,t.parse=function(e){return e.constructor===t.AST.ProgramNode?e:(t.Parser.yy=t.AST,t.Parser.parse(e))},t.AST={},t.AST.ProgramNode=function(e,i){this.type="program",this.statements=e,i&&(this.inverse=new t.AST.ProgramNode(i))},t.AST.MustacheNode=function(t,e,i){this.type="mustache",this.escaped=!i,this.hash=e;var n=this.id=t[0],o=this.params=t.slice(1),s=this.eligibleHelper=n.isSimple;this.isHelper=s&&(o.length||e)},t.AST.PartialNode=function(t,e){this.type="partial",this.partialName=t,this.context=e},t.AST.BlockNode=function(e,i,n,o){var s=function(e,i){if(e.original!==i.original)throw new t.Exception(e.original+" doesn't match "+i.original)};s(e.id,o),this.type="block",this.mustache=e,this.program=i,this.inverse=n,this.inverse&&!this.program&&(this.isInverse=!0)},t.AST.ContentNode=function(t){this.type="content",this.string=t},t.AST.HashNode=function(t){this.type="hash",this.pairs=t},t.AST.IdNode=function(e){this.type="ID";for(var i="",n=[],o=0,s=0,r=e.length;r>s;s++){var a=e[s].part;if(i+=(e[s].separator||"")+a,".."===a||"."===a||"this"===a){if(n.length>0)throw new t.Exception("Invalid path: "+i);".."===a?o++:this.isScoped=!0}else n.push(a)}this.original=i,this.parts=n,this.string=n.join("."),this.depth=o,this.isSimple=1===e.length&&!this.isScoped&&0===o,this.stringModeValue=this.string},t.AST.PartialNameNode=function(t){this.type="PARTIAL_NAME",this.name=t.original},t.AST.DataNode=function(t){this.type="DATA",this.id=t},t.AST.StringNode=function(t){this.type="STRING",this.original=this.string=this.stringModeValue=t},t.AST.IntegerNode=function(t){this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},t.AST.BooleanNode=function(t){this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},t.AST.CommentNode=function(t){this.type="comment",this.comment=t};var r=["description","fileName","lineNumber","message","name","number","stack"];t.Exception=function(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;e<r.length;e++)this[r[e]]=t[r[e]]},t.Exception.prototype=new Error,t.SafeString=function(t){this.string=t},t.SafeString.prototype.toString=function(){return this.string.toString()};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/,h=function(t){return a[t]||"&amp;"};t.Utils={extend:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},escapeExpression:function(e){return e instanceof t.SafeString?e.toString():null==e||e===!1?"":(e=e.toString(),c.test(e)?e.replace(l,h):e)},isEmpty:function(t){return t||0===t?"[object Array]"===i.call(t)&&0===t.length?!0:!1:!0}};var u=t.Compiler=function(){},d=t.JavaScriptCompiler=function(){};u.prototype={compiler:u,disassemble:function(){for(var t,e,i,n=this.opcodes,o=[],s=0,r=n.length;r>s;s++)if(t=n[s],"DECLARE"===t.opcode)o.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;a<t.args.length;a++)i=t.args[a],"string"==typeof i&&(i='"'+i.replace("\n","\\n")+'"'),e.push(i);o.push(t.opcode+" "+e.join(" "))}return o.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;e>i;i++){var n=this.opcodes[i],o=t.opcodes[i];if(n.opcode!==o.opcode||n.args.length!==o.args.length)return!1;for(var s=0;s<n.args.length;s++)if(n.args[s]!==o.args[s])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(i=0;e>i;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){this.children=[],this.depths={list:[]},this.options=e;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(var n in i)this.options.knownHelpers[n]=i[n];return this.program(t)},accept:function(t){return this[t.type](t)},program:function(t){var e,i=t.statements;this.opcodes=[];for(var n=0,o=i.length;o>n;n++)e=i[n],this[e.type](e);return this.isSimple=1===o,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,i=(new this.compiler).compile(t,this.options),n=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[n]=i;for(var o=0,s=i.depths.list.length;s>o;o++)e=i.depths.list[o],2>e||this.addDepth(e-1);return n},block:function(t){var e=t.mustache,i=t.program,n=t.inverse;i&&(i=this.compileProgram(i)),n&&(n=this.compileProgram(n));var o=this.classifyMustache(e);"helper"===o?this.helperMustache(e,i,n):"simple"===o?(this.simpleMustache(e),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(e,i,n),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,i,n=t.pairs;this.opcode("pushHash");for(var o=0,s=n.length;s>o;o++)e=n[o],i=e[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type)):this.accept(i),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,i=this.classifyMustache(t);"simple"===i?this.simpleMustache(t):"helper"===i?this.helperMustache(t):this.ambiguousMustache(t),this.opcode(t.escaped&&!e.noEscape?"appendEscaped":"append")},ambiguousMustache:function(t,e,i){var n=t.id,o=n.parts[0],s=null!=e||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",o,s)},simpleMustache:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,i){var n=this.setupFullMustacheParams(t,e,i),o=t.id.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",n.length,o);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+o);this.opcode("invokeHelper",n.length,o)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var i=1,n=t.parts.length;n>i;i++)this.opcode("lookup",t.parts[i])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new t.Exception("Scoped data references are not supported: "+e.original);this.opcode("lookupData");for(var i=e.id.parts,n=0,o=i.length;o>n;n++)this.opcode("lookup",i[n])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw new Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,i=t.eligibleHelper,n=this.options;if(i&&!e){var o=t.id.parts[0];n.knownHelpers[o]?e=!0:n.knownHelpersOnly&&(i=!1)}return e?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e,i=t.length;i--;)e=t[i],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),e},setupFullMustacheParams:function(t,e,i){var n=t.params;return this.pushParams(n),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.hash(t.hash):this.opcode("emptyHash"),n}};var p=function(t){this.value=t};d.prototype={nameLookup:function(t,e){return/^[0-9]+$/.test(e)?t+"["+e+"]":d.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,i,n,o){this.environment=e,this.options=i||{},t.log(t.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,i);var s,r=e.opcodes;for(this.i=0,v=r.length;this.i<v;this.i++)s=r[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args);return this.createFunctionContext(o)},nextOpcode:function(){var t=this.environment.opcodes;return t[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,i="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(i+=" data = data || {};"),t.push(i)}t.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(e){var i=this.stackVars.concat(this.registers.list);if(i.length>0&&(this.source[1]=this.source[1]+", "+i.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var o=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,r=this.environment.depths.list.length;r>s;s++)o.push("depth"+this.environment.depths.list[s]);var a=this.mergeSource();if(!this.isChild){var l=t.COMPILER_REVISION,c=t.REVISION_CHANGES[l];a="this.compilerInfo = ["+l+",'"+c+"'];\n"+a}if(e)return o.push(a),Function.apply(this,o);var h="function "+(this.name||"")+"("+o.join(",")+") {\n  "+a+"}";return t.log(t.logger.DEBUG,h+"\n\n"),h},mergeSource:function(){for(var t,i="",n=0,o=this.source.length;o>n;n++){var s=this.source[n];s.appendToBuffer?t=t?t+"\n    + "+s.content:s.content:(t&&(i+="buffer += "+t+";\n  ",t=e),i+=s+"\n  ")}return i},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),t[t.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.source.push(this.appendToBuffer(this.quotedString(t)))},append:function(){this.flushInline();var t=this.popStack();this.source.push("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"string"==typeof t?this.pushString(t):this.pushStackLiteral(t)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=e,this.options.stringParams&&(this.register("hashContexts","{"+t.contexts.join(",")+"}"),this.register("hashTypes","{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){this.pushStackLiteral(null!=t?this.programExpression(t):null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var i=this.lastHelper=this.setupHelper(t,e,!0),n=this.nameLookup("depth"+this.lastContext,e,"context");this.push(i.name+" || "+n),this.replaceStack(function(t){return t+" ? "+t+".call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+")"})},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var i=this.setupHelper(0,t,e),n=this.lastHelper=this.nameLookup("helpers",t,"helper"),o=this.nameLookup("depth"+this.lastContext,t,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+n+") { "+s+" = "+s+".call("+i.callParams+"); }"),this.source.push("else { "+s+" = "+o+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,i,n=this.popStack();this.options.stringParams&&(i=this.popStack(),e=this.popStack());var o=this.hash;e&&o.contexts.push("'"+t+"': "+e),i&&o.types.push("'"+t+"': "+i),o.values.push("'"+t+"': ("+n+")")},compiler:d,compileChildren:function(t,e){for(var i,n,o=t.children,s=0,r=o.length;r>s;s++){i=o[s],n=new this.compiler;var a=this.matchExistingProgram(i);null==a?(this.context.programs.push(""),a=this.context.programs.length,i.index=a,i.name="program"+a,this.context.programs[a]=n.compile(i,e,this.context),this.context.environments[a]=i):(i.index=a,i.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;i>e;e++){var n=this.context.environments[e];
if(n&&n.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,i=this.environment.children[t],n=i.depths.list,o=[i.index,i.name,"data"],s=0,r=n.length;r>s;s++)e=n[s],o.push(1===e?"depth0":"depth"+(e-1));return(0===n.length?"self.program(":"self.programWithDepth(")+o.join(", ")+")"},register:function(t,e){this.useRegister(t),this.source.push(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new p(t))},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.source.push(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,i="",n=this.isInline();if(n){var o=this.popStack(!0);if(o instanceof p)e=o.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();i="("+this.push(s)+" = "+o+"),",e=this.topStack()}}else e=this.topStack();var r=t.call(this,e);return n?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+i+r+")")):(/^stack/.test(e)||(e=this.nextStack()),this.source.push(e+" = ("+i+r+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;i>e;e++){var n=t[e];n instanceof p?this.compileStack.push(n):this.pushStack(n)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();return!t&&i instanceof p?i.value:(e||this.stackSlot--,i)},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof p?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,i){var n=[];this.setupParams(t,n,i);var o=this.nameLookup("helpers",e,"helper");return{params:n,name:o,callParams:["depth0"].concat(n).join(", "),helperMissingParams:i&&["depth0",this.quotedString(e)].concat(n).join(", ")}},setupParams:function(t,e,i){var n,o,s,r=[],a=[],l=[];r.push("hash:"+this.popStack()),o=this.popStack(),s=this.popStack(),(s||o)&&(s||(this.context.aliases.self="this",s="self.noop"),o||(this.context.aliases.self="this",o="self.noop"),r.push("inverse:"+o),r.push("fn:"+s));for(var c=0;t>c;c++)n=this.popStack(),e.push(n),this.options.stringParams&&(l.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+a.join(",")+"]"),r.push("types:["+l.join(",")+"]"),r.push("hashContexts:hashContexts"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",i?(this.register("options",r),e.push("options")):e.push(r),e.join(", ")}};for(var f="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),m=d.RESERVED_WORDS={},g=0,v=f.length;v>g;g++)m[f[g]]=!0;d.isValidJavaScriptVariableName=function(t){return!d.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t)?!0:!1},t.precompile=function(e,i){if(null==e||"string"!=typeof e&&e.constructor!==t.AST.ProgramNode)throw new t.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);i=i||{},"data"in i||(i.data=!0);var n=t.parse(e),o=(new u).compile(n,i);return(new d).compile(o,i)},t.compile=function(i,n){function o(){var o=t.parse(i),s=(new u).compile(o,n),r=(new d).compile(s,n,e,!0);return t.template(r)}if(null==i||"string"!=typeof i&&i.constructor!==t.AST.ProgramNode)throw new t.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+i);n=n||{},"data"in n||(n.data=!0);var s;return function(t,e){return s||(s=o()),s.call(this,t,e)}},t.VM={template:function(e){var i={escapeExpression:t.Utils.escapeExpression,invokePartial:t.VM.invokePartial,programs:[],program:function(e,i,n){var o=this.programs[e];return n?o=t.VM.program(e,i,n):o||(o=this.programs[e]=t.VM.program(e,i)),o},merge:function(e,i){var n=e||i;return e&&i&&(n={},t.Utils.extend(n,i),t.Utils.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,o){o=o||{};var s=e.call(i,t,n,o.helpers,o.partials,o.data),r=i.compilerInfo||[],a=r[0]||1,l=t.COMPILER_REVISION;if(a!==l){if(l>a){var c=t.REVISION_CHANGES[l],h=t.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+c+") or downgrade your runtime to an older version ("+h+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+r[1]+")."}return s}},programWithDepth:function(t,e,i){var n=Array.prototype.slice.call(arguments,3),o=function(t,o){return o=o||{},e.apply(this,[t,o.data||i].concat(n))};return o.program=t,o.depth=n.length,o},program:function(t,e,i){var n=function(t,n){return n=n||{},e(t,n.data||i)};return n.program=t,n.depth=0,n},noop:function(){return""},invokePartial:function(i,n,o,s,r,a){var l={helpers:s,partials:r,data:a};if(i===e)throw new t.Exception("The partial "+n+" could not be found");if(i instanceof Function)return i(o,l);if(t.compile)return r[n]=t.compile(i,{data:a!==e}),r[n](o,l);throw new t.Exception("The partial "+n+" could not be compiled when running in runtime-only mode")}},t.template=t.VM.template}(Handlebars),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,o){t.Backbone=e(t,o,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){{var o=t.Backbone,s=[],r=(s.push,s.slice);s.splice}e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var o=this,s=i.once(function(){o.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,n)},off:function(t,e,n){var o,s,r,a,l,h,u,d;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(a=t?[t]:i.keys(this._events),l=0,h=a.length;h>l;l++)if(t=a[l],r=this._events[t]){if(this._events[t]=o=[],e||n)for(u=0,d=r.length;d>u;u++)s=r[u],(e&&e!==s.callback&&e!==s.callback._callback||n&&n!==s.context)&&o.push(s);o.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&h(i,e),n&&h(n,arguments),this},stopListening:function(t,e,n){var o=this._listeningTo;if(!o)return this;var s=!e&&!n;n||"object"!=typeof e||(n=this),t&&((o={})[t._listenId]=t);for(var r in o)t=o[r],t.off(e,n,this),(s||i.isEmpty(t._events))&&delete this._listeningTo[r];return this}},l=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)t[e].apply(t,[o,i[o]].concat(n));return!1}if(l.test(i)){for(var s=i.split(l),r=0,a=s.length;a>r;r++)t[e].apply(t,[s[r]].concat(n));return!1}return!0},h=function(t,e){var i,n=-1,o=t.length,s=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++n<o;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s,r);return;case 3:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s,r,a);return;default:for(;++n<o;)(i=t[n]).callback.apply(i.ctx,e);return}},u={listenTo:"on",listenToOnce:"once"};i.each(u,function(t,e){a[e]=function(e,n,o){var s=this._listeningTo||(this._listeningTo={}),r=e._listenId||(e._listenId=i.uniqueId("l"));return s[r]=e,o||"object"!=typeof n||(o=this),e[t](n,o,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(e,a);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var o,s,r,a,l,c,h,u;if(null==t)return this;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;r=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),u=this.attributes,h=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(o in s)e=s[o],i.isEqual(u[o],e)||a.push(o),i.isEqual(h[o],e)?delete this.changed[o]:this.changed[o]=e,r?delete u[o]:u[o]=e;if(!l){a.length&&(this._pending=n);for(var d=0,p=a.length;p>d;d++)this.trigger("change:"+a[d],this,u[a[d]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,o=this._changing?this._previousAttributes:this.attributes;for(var s in t)i.isEqual(o[s],e=t[s])||((n||(n={}))[s]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},O(this,t),this.sync("read",this,t)},save:function(t,e,n){var o,s,r,a=this.attributes;if(null==t||"object"==typeof t?(o=t,n=e):(o={})[t]=e,n=i.extend({validate:!0},n),o&&!n.wait){if(!this.set(o,n))return!1}else if(!this._validate(o,n))return!1;o&&n.wait&&(this.attributes=i.extend({},a,o)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(t){l.attributes=a;var e=l.parse(t,n);return n.wait&&(e=i.extend(o||{},e)),i.isObject(e)&&!l.set(e,n)?!1:(c&&c(l,t,n),void l.trigger("sync",l,t,n))},O(this,n),s=this.isNew()?"create":n.patch?"patch":"update","patch"===s&&(n.attrs=o),r=this.sync(s,this,n),o&&n.wait&&(this.attributes=a),r},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,o=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&o(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;O(this,t);var s=this.sync("delete",this,t);return t.wait||o(),s},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||N();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(t){d.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,g))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var o,s,r,a;for(o=0,s=t.length;s>o;o++)a=t[o]=this.get(t[o]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,e.silent||(e.index=r,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,m),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var o,s,r,a,l,c,h,u=e.at,p=this.model,f=this.comparator&&null==u&&e.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=e.add,_=e.merge,x=e.remove,k=!f&&w&&x?[]:!1;for(o=0,s=t.length;s>o;o++){if(l=t[o]||{},r=l instanceof d?a=l:l[p.prototype.idAttribute||"id"],c=this.get(r))x&&(b[c.cid]=!0),_&&(l=l===a?a.attributes:l,e.parse&&(l=c.parse(l,e)),c.set(l,e),f&&!h&&c.hasChanged(g)&&(h=!0)),t[o]=c;else if(w){if(a=t[o]=this._prepareModel(l,e),!a)continue;v.push(a),this._addReference(a,e)}a=c||a,!k||!a.isNew()&&b[a.id]||k.push(a),b[a.id]=!0}if(x){for(o=0,s=this.length;s>o;++o)b[(a=this.models[o]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||k&&k.length)if(f&&(h=!0),this.length+=v.length,null!=u)for(o=0,s=v.length;s>o;o++)this.models.splice(u+o,0,v[o]);else{k&&(this.models.length=0);var C=k||v;for(o=0,s=C.length;s>o;o++)this.models.push(C[o])}if(h&&this.sort({silent:!0}),!e.silent){for(o=0,s=v.length;s>o;o++)(a=v[o]).trigger("add",a,this,e);(h||k&&k.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,o=this.models.length;o>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return r.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var o=t.reset?"reset":"set";n[o](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},O(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,o=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),o&&o(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(t){f.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){f.prototype[t]=function(e,n){var o=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,o,n)}});var b=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];i.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var o=e.match(w),s=o[1],r=o[2];n=i.bind(n,this),s+=".delegateEvents"+this.cid,""===r?this.$el.on(s,n):this.$el.on(s,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,o){var s=k[t];i.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:s,dataType:"json"};if(o.url||(r.url=i.result(n,"url")||N()),null!=o.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),o.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){r.type="POST",o.emulateJSON&&(r.data._method=s);var a=o.beforeSend;o.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",s),a?a.apply(this,arguments):void 0}}"GET"===r.type||o.emulateJSON||(r.processData=!1),"PATCH"===r.type&&x&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=e.ajax(i.extend(r,o));return n.trigger("request",n,l,o),l};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var C=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,E=/\*\w+/g,$=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(C.prototype,a,{initialize:function(){},route:function(t,n,o){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var s=this;return e.history.route(t,function(i){var r=s._extractParameters(t,i);s.execute(o,r),s.trigger.apply(s,["route:"+n].concat(r)),s.trigger("route",n,r),e.history.trigger("route",s,n,r)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace($,"\\$&").replace(S,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/?]+)"}).replace(E,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var A=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,L=/msie [\w.]+/,D=/\/$/,j=/#.*$/;A.started=!1,i.extend(A.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(D,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(I,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),o=document.documentMode,s=L.exec(navigator.userAgent.toLowerCase())&&(!o||7>=o);if(this.root=("/"+this.root+"/").replace(P,"/"),s&&this._wantsHashChange){var r=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!A.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(j,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new A;var M=function(t,e){var n,o=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,e);var s=function(){this.constructor=n};return s.prototype=o.prototype,n.prototype=new s,t&&i.extend(n.prototype,t),n.__super__=o.prototype,n};d.extend=f.extend=C.extend=b.extend=A.extend=M;var N=function(){throw new Error('A "url" property or function must be specified')},O=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e}),/*!
 * typeahead.js 0.9.3
 * https://github.com/twitter/typeahead
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 */
function(t){var e="0.9.3",i={isMsie:function(){var t=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return t?parseInt(t[2],10):!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},bind:t.proxy,bindAll:function(e){var i;for(var n in e)t.isFunction(i=e[n])&&(e[n]=t.proxy(i,e))},indexOf:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},each:t.each,map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,o){return(n=i.call(null,o,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,o){return(n=i.call(null,o,t,e))?!1:void 0}),!!n):n},mixin:t.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,o;return function(){var s,r,a=this,l=arguments;return s=function(){n=null,i||(o=t.apply(a,l))},r=i&&!n,clearTimeout(n),n=setTimeout(s,e),r&&(o=t.apply(a,l)),o}},throttle:function(t,e){var i,n,o,s,r,a;return r=0,a=function(){r=new Date,o=null,s=t.apply(i,n)},function(){var l=new Date,c=e-(l-r);return i=this,n=arguments,0>=c?(clearTimeout(o),o=null,r=l,s=t.apply(i,n)):o||(o=setTimeout(a,c)),s}},tokenizeQuery:function(e){return t.trim(e).toLowerCase().split(/[\s]+/)},tokenizeText:function(e){return t.trim(e).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},n=function(){var t=/\s+/;return{on:function(e,i){var n;if(!i)return this;for(this._callbacks=this._callbacks||{},e=e.split(t);n=e.shift();)this._callbacks[n]=this._callbacks[n]||[],this._callbacks[n].push(i);return this},trigger:function(e,i){var n,o;if(!this._callbacks)return this;for(e=e.split(t);n=e.shift();)if(o=this._callbacks[n])for(var s=0;s<o.length;s+=1)o[s].call(this,{type:n,data:i});return this}}}(),o=function(){function e(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n="typeahead:";return i.mixin(e.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(n+t,e)}}),e}(),s=function(){function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function e(){return(new Date).getTime()}function n(t){return JSON.stringify(i.isUndefined(t)?null:t)}function o(t){return JSON.parse(t)}var s,r;try{s=window.localStorage,s.setItem("~~~","!"),s.removeItem("~~~")}catch(a){s=null}return r=s&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),o(s.getItem(this._prefix(t)))},set:function(t,o,r){return i.isNumber(r)?s.setItem(this._ttlKey(t),n(e()+r)):s.removeItem(this._ttlKey(t)),s.setItem(this._prefix(t),n(o))},remove:function(t){return s.removeItem(this._ttlKey(t)),s.removeItem(this._prefix(t)),this},clear:function(){var t,e,i=[],n=s.length;for(t=0;n>t;t++)(e=s.key(t)).match(this.keyMatcher)&&i.push(e.replace(this.keyMatcher,""));for(t=i.length;t--;)this.remove(i[t]);return this},isExpired:function(t){var n=o(s.getItem(this._ttlKey(t)));return i.isNumber(n)&&e()>n?!0:!1}}:{get:i.noop,set:i.noop,remove:i.noop,clear:i.noop,isExpired:i.noop},i.mixin(t.prototype,r),t}(),r=function(){function t(t){i.bindAll(this),t=t||{},this.sizeLimit=t.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return i.mixin(t.prototype,{get:function(t){return this.cache[t]},set:function(t,e){var i;this.cachedKeysByAge.length===this.sizeLimit&&(i=this.cachedKeysByAge.shift(),delete this.cache[i]),this.cache[t]=e,this.cachedKeysByAge.push(t)}}),t}(),a=function(){function e(t){i.bindAll(this),t=i.isString(t)?{url:t}:t,l=l||new r,a=i.isNumber(t.maxParallelRequests)?t.maxParallelRequests:a||6,this.url=t.url,this.wildcard=t.wildcard||"%QUERY",this.filter=t.filter,this.replace=t.replace,this.ajaxSettings={type:"get",cache:t.cache,timeout:t.timeout,dataType:t.dataType||"json",beforeSend:t.beforeSend},this._get=(/^throttle$/i.test(t.rateLimitFn)?i.throttle:i.debounce)(this._get,t.rateLimitWait||300)}function n(){c++}function o(){c--}function s(){return a>c}var a,l,c=0,h={};return i.mixin(e.prototype,{_get:function(t,e){function i(i){var o=n.filter?n.filter(i):i;e&&e(o),l.set(t,i)}var n=this;s()?this._sendRequest(t).done(i):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(e){function i(){o(),h[e]=null,s.onDeckRequestArgs&&(s._get.apply(s,s.onDeckRequestArgs),s.onDeckRequestArgs=null)}var s=this,r=h[e];return r||(n(),r=h[e]=t.ajax(e,this.ajaxSettings).always(i)),r},get:function(t,e){var n,o,s=this,r=encodeURIComponent(t||"");return e=e||i.noop,n=this.replace?this.replace(this.url,r):this.url.replace(this.wildcard,r),(o=l.get(n))?i.defer(function(){e(s.filter?s.filter(o):o)}):this._get(n,e),!!o}}),e}(),l=function(){function n(e){i.bindAll(this),i.isString(e.template)&&!e.engine&&t.error("no template engine specified"),e.local||e.prefetch||e.remote||t.error("one of local, prefetch, or remote is required"),this.name=e.name||i.getUniqueId(),this.limit=e.limit||5,this.minLength=e.minLength||1,this.header=e.header,this.footer=e.footer,this.valueKey=e.valueKey||"value",this.template=o(e.template,e.engine,this.valueKey),this.local=e.local,this.prefetch=e.prefetch,this.remote=e.remote,this.itemHash={},this.adjacencyList={},this.storage=e.name?new s(e.name):null}function o(t,e,n){var o,s;return i.isFunction(t)?o=t:i.isString(t)?(s=e.compile(t),o=i.bind(s.render,s)):o=function(t){return"<p>"+t[n]+"</p>"},o}var r={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return i.mixin(n.prototype,{_processLocalData:function(t){this._mergeProcessedData(this._processData(t))},_loadPrefetchData:function(n){function o(t){var e=n.filter?n.filter(t):t,o=d._processData(e),s=o.itemHash,a=o.adjacencyList;d.storage&&(d.storage.set(r.itemHash,s,n.ttl),d.storage.set(r.adjacencyList,a,n.ttl),d.storage.set(r.thumbprint,p,n.ttl),d.storage.set(r.protocol,i.getProtocol(),n.ttl)),d._mergeProcessedData(o)}var s,a,l,c,h,u,d=this,p=e+(n.thumbprint||"");return this.storage&&(s=this.storage.get(r.thumbprint),a=this.storage.get(r.protocol),l=this.storage.get(r.itemHash),c=this.storage.get(r.adjacencyList)),h=s!==p||a!==i.getProtocol(),n=i.isString(n)?{url:n}:n,n.ttl=i.isNumber(n.ttl)?n.ttl:864e5,l&&c&&!h?(this._mergeProcessedData({itemHash:l,adjacencyList:c}),u=t.Deferred().resolve()):u=t.getJSON(n.url).done(o),u},_transformDatum:function(t){var e=i.isString(t)?t:t[this.valueKey],n=t.tokens||i.tokenizeText(e),o={value:e,tokens:n};return i.isString(t)?(o.datum={},o.datum[this.valueKey]=t):o.datum=t,o.tokens=i.filter(o.tokens,function(t){return!i.isBlankString(t)}),o.tokens=i.map(o.tokens,function(t){return t.toLowerCase()}),o},_processData:function(t){var e=this,n={},o={};return i.each(t,function(t,s){var r=e._transformDatum(s),a=i.getUniqueId(r.value);n[a]=r,i.each(r.tokens,function(t,e){var n=e.charAt(0),s=o[n]||(o[n]=[a]);!~i.indexOf(s,a)&&s.push(a)})}),{itemHash:n,adjacencyList:o}},_mergeProcessedData:function(t){var e=this;i.mixin(this.itemHash,t.itemHash),i.each(t.adjacencyList,function(t,i){var n=e.adjacencyList[t];e.adjacencyList[t]=n?n.concat(i):i})},_getLocalSuggestions:function(t){var e,n=this,o=[],s=[],r=[];return i.each(t,function(t,e){var n=e.charAt(0);!~i.indexOf(o,n)&&o.push(n)}),i.each(o,function(t,i){var o=n.adjacencyList[i];return o?(s.push(o),void((!e||o.length<e.length)&&(e=o))):!1}),s.length<o.length?[]:(i.each(e,function(e,o){var a,l,c=n.itemHash[o];a=i.every(s,function(t){return~i.indexOf(t,o)}),l=a&&i.every(t,function(t){return i.some(c.tokens,function(e){return 0===e.indexOf(t)})}),l&&r.push(c)}),r)},initialize:function(){var e;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new a(this.remote):null,e=this.prefetch?this._loadPrefetchData(this.prefetch):t.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return e},e},getSuggestions:function(t,e){function n(t){s=s.slice(0),i.each(t,function(t,e){var n,o=r._transformDatum(e);return n=i.some(s,function(t){return o.value===t.value}),!n&&s.push(o),s.length<r.limit}),e&&e(s)}var o,s,r=this,a=!1;t.length<this.minLength||(o=i.tokenizeQuery(t),s=this._getLocalSuggestions(o).slice(0,this.limit),s.length<this.limit&&this.transport&&(a=this.transport.get(t,n)),!a&&e&&e(s))}}),n}(),c=function(){function e(e){var n=this;i.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=t(e.hint),this.$input=t(e.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),i.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){n.specialKeyCodeMap[t.which||t.keyCode]||i.defer(n._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=o(this.$input)}function o(e){return t("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function s(t,e){return t=(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),e=(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),t===e}return i.mixin(e.prototype,n,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(t){var e=this.specialKeyCodeMap[t.which||t.keyCode];e&&this.trigger(e+"Keyed",t)},_compareQueryToInputValue:function(){var t=this.getInputValue(),e=s(this.query,t),i=e?this.query.length!==t.length:!1;i?this.trigger("whitespaceChanged",{value:this.query}):e||this.trigger("queryChanged",{value:this.query=t})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),!e&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(t){this.$hint.val(t)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var t,e=this.$input.val().length,n=this.$input[0].selectionStart;return i.isNumber(n)?n===e:document.selection?(t=document.selection.createRange(),t.moveStart("character",-e),e===t.text.length):!0}}),e}(),h=function(){function e(e){i.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=t(e.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function o(t){return t.data("suggestion")}var s={suggestionsList:'<span class="tt-suggestions"></span>'},r={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};return i.mixin(e.prototype,n,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(e){var i=t(e.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),i.addClass("tt-is-under-cursor")},_handleSelection:function(e){var i=t(e.currentTarget);this.trigger("suggestionSelected",o(i))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(t){var e,i,n,s;if(this.isVisible()){if(e=this._getSuggestions(),i=e.filter(".tt-is-under-cursor"),i.removeClass("tt-is-under-cursor"),n=e.index(i)+t,n=(n+1)%(e.length+1)-1,-1===n)return void this.trigger("cursorRemoved");-1>n&&(n=e.length-1),s=e.eq(n).addClass("tt-is-under-cursor"),this._ensureVisibility(s),this.trigger("cursorMoved",o(s))}},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(t){var e=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),i=this.$menu.scrollTop(),n=t.position().top,o=n+t.outerHeight(!0);0>n?this.$menu.scrollTop(i+n):o>e&&this.$menu.scrollTop(i+(o-e))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){var e={left:"0",right:"auto"},i={left:"auto",right:" 0"};this.$menu.css("ltr"===t?e:i)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var t=this._getSuggestions().filter(".tt-is-under-cursor").first();return t.length>0?o(t):null},getFirstSuggestion:function(){var t=this._getSuggestions().first();return t.length>0?o(t):null},renderSuggestions:function(e,n){var o,a,l,c,h,u="tt-dataset-"+e.name,d='<div class="tt-suggestion">%body</div>',p=this.$menu.find("."+u);0===p.length&&(a=t(s.suggestionsList).css(r.suggestionsList),p=t("<div></div>").addClass(u).append(e.header).append(a).append(e.footer).appendTo(this.$menu)),n.length>0?(this.isEmpty=!1,this.isOpen&&this._show(),l=document.createElement("div"),c=document.createDocumentFragment(),i.each(n,function(i,n){n.dataset=e.name,o=e.template(n.datum),l.innerHTML=d.replace("%body",o),h=t(l.firstChild).css(r.suggestion).data("suggestion",n),h.children().each(function(){t(this).css(r.suggestionChild)}),c.appendChild(h[0])}),p.show().find(".tt-suggestions").html(c)):this.clearSuggestions(e.name),this.trigger("suggestionsRendered")},clearSuggestions:function(t){var e=this.$menu.find(t?".tt-dataset-"+t:'[class^="tt-dataset-"]'),i=e.find(".tt-suggestions");e.hide(),i.empty(),0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}}),e}(),u=function(){function e(t){var e,n,s;i.bindAll(this),this.$node=o(t.input),this.datasets=t.datasets,this.dir=null,this.eventBus=t.eventBus,e=this.$node.find(".tt-dropdown-menu"),n=this.$node.find(".tt-query"),s=this.$node.find(".tt-hint"),this.dropdownView=new h({menu:e}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=new c({input:n,hint:s}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function o(e){var i=t(r.wrapper),n=t(r.dropdown),o=t(e),s=t(r.hint);i=i.css(a.wrapper),n=n.css(a.dropdown),s.css(a.hint).css({backgroundAttachment:o.css("background-attachment"),backgroundClip:o.css("background-clip"),backgroundColor:o.css("background-color"),backgroundImage:o.css("background-image"),backgroundOrigin:o.css("background-origin"),backgroundPosition:o.css("background-position"),backgroundRepeat:o.css("background-repeat"),backgroundSize:o.css("background-size")}),o.data("ttAttrs",{dir:o.attr("dir"),autocomplete:o.attr("autocomplete"),spellcheck:o.attr("spellcheck"),style:o.attr("style")}),o.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(a.query);try{!o.attr("dir")&&o.attr("dir","auto")}catch(l){}return o.wrap(i).parent().prepend(s).append(n)}function s(t){var e=t.find(".tt-query");i.each(e.data("ttAttrs"),function(t,n){i.isUndefined(n)?e.removeAttr(t):e.attr(t,n)}),e.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(t),t.remove()}var r={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return i.isMsie()&&i.mixin(a.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),i.isMsie()&&i.isMsie()<=7&&(i.mixin(a.wrapper,{display:"inline",zoom:"1"}),i.mixin(a.query,{marginTop:"-1px"})),i.mixin(e.prototype,n,{_managePreventDefault:function(t){var e,i,n=t.data,o=!1;switch(t.type){case"tabKeyed":e=this.inputView.getHintValue(),i=this.inputView.getInputValue(),o=e&&e!==i;break;case"upKeyed":case"downKeyed":o=!n.shiftKey&&!n.ctrlKey&&!n.metaKey}o&&n.preventDefault()},_setLanguageDirection:function(){var t=this.inputView.getLanguageDirection();t!==this.dir&&(this.dir=t,this.$node.css("direction",t),this.dropdownView.setLanguageDirection(t))},_updateHint:function(){var t,e,n,o,s,r=this.dropdownView.getFirstSuggestion(),a=r?r.value:null,l=this.dropdownView.isVisible(),c=this.inputView.isOverflow();a&&l&&!c&&(t=this.inputView.getInputValue(),e=t.replace(/\s{2,}/g," ").replace(/^\s+/g,""),n=i.escapeRegExChars(e),o=new RegExp("^(?:"+n+")(.*$)","i"),s=o.exec(a),this.inputView.setHintValue(t+(s?s[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(t){var e=t.data;this.inputView.setInputValue(e.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(t){this.dropdownView["blured"===t.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(t){var e=t.data;e.shiftKey||e.ctrlKey||e.metaKey||this.dropdownView["upKeyed"===t.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(t){var e="suggestionSelected"===t.type,n=e?t.data:this.dropdownView.getSuggestionUnderCursor();n&&(this.inputView.setInputValue(n.value),e?this.inputView.focus():t.data.preventDefault(),e&&i.isMsie()?i.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",n.datum,n.dataset))},_getSuggestions:function(){var t=this,e=this.inputView.getQuery();i.isBlankString(e)||i.each(this.datasets,function(i,n){n.getSuggestions(e,function(i){e===t.inputView.getQuery()&&t.dropdownView.renderSuggestions(n,i)})})},_autocomplete:function(t){var e,i,n,o,s;("rightKeyed"!==t.type&&"leftKeyed"!==t.type||(e=this.inputView.isCursorAtEnd(),i="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===t.type:"rightKeyed"===t.type,e&&!i))&&(n=this.inputView.getQuery(),o=this.inputView.getHintValue(),""!==o&&n!==o&&(s=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(s.value),this.eventBus.trigger("autocompleted",s.datum,s.dataset)))},_propagateEvent:function(t){this.eventBus.trigger(t.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),s(this.$node),this.$node=null},setQuery:function(t){this.inputView.setQuery(t),this.inputView.setInputValue(t),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),e}();!function(){var e,n={},s="ttView";e={initialize:function(e){function r(){var e,n=t(this),r=new o({el:n});e=i.map(a,function(t){return t.initialize()}),n.data(s,new u({input:n,eventBus:r=new o({el:n}),datasets:a})),t.when.apply(t,e).always(function(){i.defer(function(){r.trigger("initialized")})})}var a;return e=i.isArray(e)?e:[e],0===e.length&&t.error("no datasets provided"),a=i.map(e,function(t){var e=n[t.name]?n[t.name]:new l(t);return t.name&&(n[t.name]=e),e}),this.each(r)},destroy:function(){function e(){var e=t(this),i=e.data(s);i&&(i.destroy(),e.removeData(s))}return this.each(e)},setQuery:function(e){function i(){var i=t(this).data(s);i&&i.setQuery(e)}return this.each(i)}},jQuery.fn.typeahead=function(t){return e[t]?e[t].apply(this,[].slice.call(arguments,1)):e.initialize.apply(this,arguments)}}()}(window.jQuery),function(){"use strict";function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,o=this,s=o.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if(t instanceof RegExp){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,o=this.getListenersAsObject(t),s="object"==typeof i;for(n in o)o.hasOwnProperty(n)&&-1===e(o[n],i)&&o[n].push(s?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,o,s=this.getListenersAsObject(t);for(o in s)s.hasOwnProperty(o)&&(n=e(s[o],i),-1!==n&&s[o].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,o,s=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)s.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?s.call(this,n,o):r.call(this,n,o));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,o,s,r,a=this.getListenersAsObject(t);for(s in a)if(a.hasOwnProperty(s))for(i=a[s].slice(0),o=i.length;o--;)n=i[o],n.once===!0&&this.removeListener(t,n.listener),r=n.listener.apply(this,e||[]),r===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return o.EventEmitter=s,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:o.EventEmitter=t}.call(this),function(t){"use strict";function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var o=function(){};i.removeEventListener?o=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(o=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var s={bind:n,unbind:o};"function"==typeof define&&define.amd?define(s):"object"==typeof exports?module.exports=s:t.eventie=s}(window),function(t){"use strict";function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===l.call(t)}function n(t){var e=[];if(i(t))e=t;else if("number"==typeof t.length)for(var n=0,o=t.length;o>n;n++)e.push(t[n]);else e.push(t);return e}function o(t,i){function o(t,i,r){if(!(this instanceof o))return new o(t,i);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=e({},this.options),"function"==typeof i?r=i:e(this.options,i),r&&this.on("always",r),this.getImages(),s&&(this.jqDeferred=new s.Deferred);var a=this;setTimeout(function(){a.check()})}function l(t){this.img=t}o.prototype=new t,o.prototype.options={},o.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var i=this.elements[t];"IMG"===i.nodeName&&this.addImage(i);for(var n=i.querySelectorAll("img"),o=0,s=n.length;s>o;o++){var r=n[o];this.addImage(r)}}},o.prototype.addImage=function(t){var e=new l(t);this.images.push(e)},o.prototype.check=function(){function t(t,o){return e.options.debug&&a&&r.log("confirm",t,o),e.progress(t),i++,i===n&&e.complete(),!0}var e=this,i=0,n=this.images.length;if(this.hasAnyBroken=!1,!n)return void this.complete();for(var o=0;n>o;o++){var s=this.images[o];s.on("confirm",t),s.check()}},o.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify(e,t)})},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var i=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[i](e)}})},s&&(s.fn.imagesLoaded=function(t,e){var i=new o(this,t,e);return i.jqDeferred.promise(s(this))});var c={};return l.prototype=new t,l.prototype.check=function(){var t=c[this.img.src];if(t)return void this.useCached(t);if(c[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this.proxyImage=new Image;i.bind(e,"load",this),i.bind(e,"error",this),e.src=this.img.src},l.prototype.useCached=function(t){if(t.isConfirmed)this.confirm(t.isLoaded,"cached was confirmed");else{var e=this;t.on("confirm",function(t){return e.confirm(t.isLoaded,"cache emitted confirmed"),!0})}},l.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},l.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},l.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},l.prototype.unbindProxyEvents=function(){i.unbind(this.proxyImage,"load",this),i.unbind(this.proxyImage,"error",this)},o}var s=t.jQuery,r=t.console,a="undefined"!=typeof r,l=Object.prototype.toString;"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],o):t.imagesLoaded=o(t.EventEmitter,t.eventie)}(window),/*!
jQuery Waypoints - v2.0.5
Copyright (c) 2011-2014 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
*/
function(){var t=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},e=[].slice;!function(t,e){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(i){return e(i,t)}):e(t.jQuery,t)}(window,function(i,n){var o,s,r,a,l,c,h,u,d,p,f,m,g,v,y,b;return o=i(n),u=t.call(n,"ontouchstart")>=0,a={horizontal:{},vertical:{}},l=1,h={},c="waypoints-context-id",f="resize.waypoints",m="scroll.waypoints",g=1,v="waypoints-waypoint-ids",y="waypoint",b="waypoints",s=function(){function t(t){var e=this;this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+l++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[c]=this.id,h[this.id]=this,t.bind(m,function(){var t;return e.didScroll||u?void 0:(e.didScroll=!0,t=function(){return e.doScroll(),e.didScroll=!1},n.setTimeout(t,i[b].settings.scrollThrottle))}),t.bind(f,function(){var t;return e.didResize?void 0:(e.didResize=!0,t=function(){return i[b]("refresh"),e.didResize=!1},n.setTimeout(t,i[b].settings.resizeThrottle))})}return t.prototype.doScroll=function(){var t,e=this;return t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!u||t.vertical.oldScroll&&t.vertical.newScroll||i[b]("refresh"),i.each(t,function(t,n){var o,s,r;return r=[],s=n.newScroll>n.oldScroll,o=s?n.forward:n.backward,i.each(e.waypoints[t],function(t,e){var i,o;return n.oldScroll<(i=e.offset)&&i<=n.newScroll?r.push(e):n.newScroll<(o=e.offset)&&o<=n.oldScroll?r.push(e):void 0}),r.sort(function(t,e){return t.offset-e.offset}),s||r.reverse(),i.each(r,function(t,e){return e.options.continuous||t===r.length-1?e.trigger([o]):void 0})}),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.refresh=function(){var t,e,n,o=this;return n=i.isWindow(this.element),e=this.$element.offset(),this.doScroll(),t={horizontal:{contextOffset:n?0:e.left,contextScroll:n?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:n?0:e.top,contextScroll:n?0:this.oldScroll.y,contextDimension:n?i[b]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},i.each(t,function(t,e){return i.each(o.waypoints[t],function(t,n){var o,s,r,a,l;return o=n.options.offset,r=n.offset,s=i.isWindow(n.element)?0:n.$element.offset()[e.offsetProp],i.isFunction(o)?o=o.apply(n.element):"string"==typeof o&&(o=parseFloat(o),n.options.offset.indexOf("%")>-1&&(o=Math.ceil(e.contextDimension*o/100))),n.offset=s-e.contextOffset+e.contextScroll-o,n.options.onlyOnScroll&&null!=r||!n.enabled?void 0:null!==r&&r<(a=e.oldScroll)&&a<=n.offset?n.trigger([e.backward]):null!==r&&r>(l=e.oldScroll)&&l>=n.offset?n.trigger([e.forward]):null===r&&e.oldScroll>=n.offset?n.trigger([e.forward]):void 0})})},t.prototype.checkEmpty=function(){return i.isEmptyObject(this.waypoints.horizontal)&&i.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([f,m].join(" ")),delete h[this.id]):void 0},t}(),r=function(){function t(t,e,n){var o,s;"bottom-in-view"===n.offset&&(n.offset=function(){var t;return t=i[b]("viewportHeight"),i.isWindow(e.element)||(t=e.$element.height()),t-i(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=n.horizontal?"horizontal":"vertical",this.callback=n.handler,this.context=e,this.enabled=n.enabled,this.id="waypoints"+g++,this.offset=null,this.options=n,e.waypoints[this.axis][this.id]=this,a[this.axis][this.id]=this,o=null!=(s=this.element[v])?s:[],o.push(this.id),this.element[v]=o}return t.prototype.trigger=function(t){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,t),this.options.triggerOnce?this.destroy():void 0):void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},t.prototype.destroy=function(){return delete a[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},t.getWaypointsByElement=function(t){var e,n;return(n=t[v])?(e=i.extend({},a.horizontal,a.vertical),i.map(n,function(t){return e[t]})):[]},t}(),p={init:function(t,e){var n;return e=i.extend({},i.fn[y].defaults,e),null==(n=e.handler)&&(e.handler=t),this.each(function(){var t,n,o,a;return t=i(this),o=null!=(a=e.context)?a:i.fn[y].defaults.context,i.isWindow(o)||(o=t.closest(o)),o=i(o),n=h[o[0][c]],n||(n=new s(o)),new r(t,n,e)}),i[b]("refresh"),this},disable:function(){return p._invoke.call(this,"disable")},enable:function(){return p._invoke.call(this,"enable")},destroy:function(){return p._invoke.call(this,"destroy")},prev:function(t,e){return p._traverse.call(this,t,e,function(t,e,i){return e>0?t.push(i[e-1]):void 0})},next:function(t,e){return p._traverse.call(this,t,e,function(t,e,i){return e<i.length-1?t.push(i[e+1]):void 0})},_traverse:function(t,e,o){var s,r;return null==t&&(t="vertical"),null==e&&(e=n),r=d.aggregate(e),s=[],this.each(function(){var e;return e=i.inArray(this,r[t]),o(s,e,r[t])}),this.pushStack(s)},_invoke:function(t){return this.each(function(){var e;return e=r.getWaypointsByElement(this),i.each(e,function(e,i){return i[t](),!0})}),this}},i.fn[y]=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],p[n]?p[n].apply(this,t):i.isFunction(n)?p.init.apply(this,arguments):i.isPlainObject(n)?p.init.apply(this,[null,n]):i.error(n?"The "+n+" method does not exist in jQuery Waypoints.":"jQuery Waypoints needs a callback function or handler option.")},i.fn[y].defaults={context:n,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},d={refresh:function(){return i.each(h,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return null!=(t=n.innerHeight)?t:o.height()},aggregate:function(t){var e,n,o;return e=a,t&&(e=null!=(o=h[i(t)[0][c]])?o.waypoints:void 0),e?(n={horizontal:[],vertical:[]},i.each(n,function(t,o){return i.each(e[t],function(t,e){return o.push(e)}),o.sort(function(t,e){return t.offset-e.offset}),n[t]=i.map(o,function(t){return t.element}),n[t]=i.unique(n[t])}),n):[]},above:function(t){return null==t&&(t=n),d._filter(t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){return null==t&&(t=n),d._filter(t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){return null==t&&(t=n),d._filter(t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){return null==t&&(t=n),d._filter(t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return d._invoke("enable")},disable:function(){return d._invoke("disable")},destroy:function(){return d._invoke("destroy")},extendFn:function(t,e){return p[t]=e},_invoke:function(t){var e;return e=i.extend({},a.vertical,a.horizontal),i.each(e,function(e,i){return i[t](),!0})},_filter:function(t,e,n){var o,s;return(o=h[i(t)[0][c]])?(s=[],i.each(o.waypoints[e],function(t,e){return n(o,e)?s.push(e):void 0}),s.sort(function(t,e){return t.offset-e.offset}),i.map(s,function(t){return t.element})):[]}},i[b]=function(){var t,i;return i=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],d[i]?d[i].apply(null,t):d.aggregate.call(null,i)},i[b].settings={resizeThrottle:100,scrollThrottle:30},o.on("load.waypoints",function(){return i[b]("refresh")})})}.call(this),function(){"use strict";function t(t){return"/"===t[0]?t=document.location.protocol+"//"+document.location.host+t:t.match(/^.{2,5}:\/\//)||(t=document.location.protocol+"//"+document.location.host+document.location.pathname+"/"+t),t}function e(t,e,i){return t=t.replace(/\{\{(.*?)\}\}/g,function(t,i){return e[i]||""}),i&&(t=t.replace(/\{(.*?)\}/g,function(t,e){return i[e]||""})),t}function i(t){var e,i;try{e=JSON.parse(t.data)}catch(n){}if(e&&e.provider&&(!t.provider||e.provider.toLowerCase()===t.provider.toLowerCase())){if("error"===e.status||"fail"===e.status)return i=new Error(e.message),i.body=e.data,t.callback(i);if("success"!==e.status||!e.data)return i=new Error,i.body=e.data,t.callback(i);if(!e.state||-1==T.indexOf(e.state))return t.callback(new Error("State is not matching"));t.provider||(e.data.provider=e.provider);var o=e.data,s=o.request;delete o.request;var r;if(o.access_token?r={token:o.access_token}:o.oauth_token&&o.oauth_token_secret&&(r={oauth_token:o.oauth_token,oauth_token_secret:o.oauth_token_secret}),s.required)for(var a in s.required)r[s.required[a]]=o[s.required[a]];var l=function(t,i){return function(n){var o={};if("string"==typeof n)o={url:n};else if("object"==typeof n)for(var s in n)o[s]=n[s];return o.type=o.type||i,o.oauthio={provider:e.provider,tokens:r,request:t},OAuth.http(o)}};return o.get=l(s,"GET"),o.post=l(s,"POST"),o.put=l(s,"PUT"),o.patch=l(s,"PATCH"),o.del=l(s,"DELETE"),t.callback(null,o,s)}}function n(n){window.OAuth={initialize:function(t){b.key=t},setOAuthdURL:function(e){b.oauthd_url=e,b.oauthd_base=t(b.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0]},popup:function(e,n,s){function r(t){return t.source===a&&t.origin===b.oauthd_base?(n.data=t.data,i(n)):void 0}var a;if(!b.key)return s(new Error("OAuth object must be initialized"));2==arguments.length&&(s=n,n={}),n.state||(n.state=o(),n.state_type="client"),T.push(n.state);var l=b.oauthd_url+"/auth/"+e+"?k="+b.key;l+="&d="+encodeURIComponent(t("/")),n&&(l+="&opts="+encodeURIComponent(JSON.stringify(n)));var c={width:Math.floor(.8*window.outerWidth),height:Math.floor(.5*window.outerHeight)};c.height<350&&(c.height=350),c.width<800&&(c.width=800),c.left=window.screenX+(window.outerWidth-c.width)/2,c.top=window.screenY+(window.outerHeight-c.height)/8;var h="width="+c.width+",height="+c.height;h+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0",h+=",left="+c.left+",top="+c.top,n={provider:e},n.callback=function(t,e){return window.removeEventListener?window.removeEventListener("message",r,!1):window.detachEvent?window.detachEvent("onmessage",r):document.detachEvent&&document.detachEvent("onmessage",r),n.callback=function(){},s(t,e)},window.attachEvent?window.attachEvent("onmessage",r):document.attachEvent?document.attachEvent("onmessage",r):window.addEventListener&&window.addEventListener("message",r,!1),setTimeout(function(){n.callback(new Error("Authorization timed out"))},6e5),a=window.open(l,"Authorization",h),a&&a.focus()},redirect:function(e,i,n){2==arguments.length&&(n=i,i={}),i.state||(i.state=o(),i.state_type="client"),s("oauthio_state",i.state);var r=encodeURIComponent(t(n));n=b.oauthd_url+"/auth/"+e+"?k="+b.key,n+="&redirect_uri="+r,i&&(n+="&opts="+encodeURIComponent(JSON.stringify(i))),document.location.href=n},callback:function(t,e){return S?i(1===arguments.length?{data:S,callback:t}:{data:S,provider:t,callback:e}):void 0},http:function(t){var i,o={};for(i in t)o[i]=t[i];if(!o.oauthio.request.cors){o.url=encodeURIComponent(o.url),"/"!=o.url[0]&&(o.url="/"+o.url),o.url=b.oauthd_url+"/request/"+o.oauthio.provider+o.url,o.headers=o.headers||{},o.headers.oauthio="k="+b.key,o.oauthio.tokens.oauth_token&&o.oauthio.tokens.oauth_token_secret&&(o.headers.oauthio+="&oauthv=1");for(var s in o.oauthio.tokens)o.headers.oauthio+="&"+encodeURIComponent(s)+"="+encodeURIComponent(o.oauthio.tokens[s]);return delete o.oauthio,n.ajax(o)}if(o.oauthio.tokens.token){if(o.url.match(/^[a-z]{2,16}:\/\//)||("/"!==o.url[0]&&(o.url="/"+o.url),o.url=o.oauthio.request.url+o.url),o.oauthio.request.query){var r=[];for(i in o.oauthio.request.query)r.push(encodeURIComponent(i)+"="+encodeURIComponent(e(o.oauthio.request.query[i],o.oauthio.tokens,o.oauthio.request.parameters)));r=r.join("&"),o.url+=-1!==o.url.indexOf("?")?"&"+r:"?"+r}if(o.oauthio.request.headers){o.headers=o.headers||{};for(i in o.oauthio.request.headers)o.headers[i]=e(o.oauthio.request.headers[i],o.oauthio.tokens,o.oauthio.request.parameters)}return delete o.oauthio,n.ajax(o)}}}}function o(){var t=l((new Date).getTime()+":"+Math.floor(9999999*Math.random()));return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}function s(t,e){a(t);var i=new Date;i.setTime(i.getTime()+6e5);var n="; expires="+i.toGMTString();document.cookie=t+"="+e+n+"; path=/"}function r(t){for(var e=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null}function a(t){var e=new Date;e.setTime(e.getTime()-864e5),document.cookie=t+"=; expires="+e.toGMTString()+"; path=/"}function l(t){return h(c(u(t)))}function c(t){return p(f(d(t),8*t.length))}function h(t){try{}catch(e){E=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",o=t.length,s=0;o>s;s+=3)for(var r=t.charCodeAt(s)<<16|(o>s+1?t.charCodeAt(s+1)<<8:0)|(o>s+2?t.charCodeAt(s+2):0),a=0;4>a;a++)n+=8*s+6*a>8*t.length?E:i.charAt(r>>>6*(3-a)&63);return n}function u(t){for(var e,i,n="",o=-1;++o<t.length;)e=t.charCodeAt(o),i=o+1<t.length?t.charCodeAt(o+1):0,e>=55296&&56319>=e&&i>=56320&&57343>=i&&(e=65536+((1023&e)<<10)+(1023&i),o++),127>=e?n+=String.fromCharCode(e):2047>=e?n+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n}function d(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(var i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<24-i%32;return e}function p(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>24-i%32&255);return e}function f(t,e){t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e;for(var i=Array(80),n=1732584193,o=-271733879,s=-1732584194,r=271733878,a=-1009589776,l=0;l<t.length;l+=16){for(var c=n,h=o,u=s,d=r,p=a,f=0;80>f;f++){i[f]=16>f?t[l+f]:y(i[f-3]^i[f-8]^i[f-14]^i[f-16],1);var b=v(v(y(n,5),m(f,o,s,r)),v(v(a,i[f]),g(f)));a=r,r=s,s=y(o,30),o=n,n=b}n=v(n,c),o=v(o,h),s=v(s,u),r=v(r,d),a=v(a,p)}return Array(n,o,s,r,a)}function m(t,e,i,n){return 20>t?e&i|~e&n:40>t?e^i^n:60>t?e&i|e&n|i&n:e^i^n}function g(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function v(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i}function y(t,e){return t<<e|t>>>32-e}var b={oauthd_url:"https://oauth.io"};if(!window.OAuth)if("undefined"==typeof jQuery){var w=[],_=document.createElement("script");_.src="http://code.jquery.com/jquery.min.js",_.type="text/javascript",_.onload=function(){n(jQuery);for(var t in w)window.OAuth[w[t].method].apply(window.OAuth,w[t].args)},document.getElementsByTagName("head")[0].appendChild(_);var x=["initialize","setOAuthdURL","popup","redirect","callback","http"];window.OAuth={};var k=function(t){window.OAuth[t]=function(){var e=[];for(var i in arguments)e[i]=arguments[i];w.push({method:t,args:e})}};for(var C in x)k(x[C])}else n(jQuery);b.oauthd_base=t(b.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0];var S,T=[];!function(){var t=/[\\#&]oauthio=([^&]*)/.exec(document.location.hash);if(t){document.location.hash="",S=decodeURIComponent(t[1].replace(/\+/g," "));var e=r("oauthio_state");e&&(T.push(e),a("oauthio_state"))}}();/*
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined
 * in FIPS 180-1
 * Version 2.2 Copyright Paul Johnston 2000 - 2009.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for details.
 */
var E=""}(),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.info_overlay=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var o,s,r="function",a=e.helperMissing,l=this.escapeExpression,c='<div class="info-overlay overlay" id="'+l((s=null!=(s=e.id||(null!=t?t.id:t))?s:a,typeof s===r?s.call(t,{name:"id",hash:{},data:n}):s))+'">\n	<div class="mid">\n		<div class="inner">\n			<div class="overlay-content">\n				<a href="#" class="ib white-close overlay-close">Close</a>\n				';return s=null!=(s=e.content||(null!=t?t.content:t))?s:a,o=typeof s===r?s.call(t,{name:"content",hash:{},data:n}):s,null!=o&&(c+=o),c+"\n			</div>\n		</div>\n	</div>\n</div>"},useData:!0}),this.HandlebarsTemplates.info_overlay}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["question_creation/existing_message"]=Handlebars.template({1:function(){return" selected"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var o,s,r="function",a=e.helperMissing,l=this.escapeExpression,c='<section class="message';return o=e["if"].call(t,null!=t?t.active:t,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=o&&(c+=o),c+'">\n	<form class="existing-question-form" data-remote="true" action="'+l((s=null!=(s=e.edit_url||(null!=t?t.edit_url:t))?s:a,typeof s===r?s.call(t,{name:"edit_url",hash:{},data:n}):s))+'" method="post">\n	  <i class="action-icon">Selected</i>\n	  <p>'+l((s=null!=(s=e.text||(null!=t?t.text:t))?s:a,typeof s===r?s.call(t,{name:"text",hash:{},data:n}):s))+'</p>\n	  <input name="question[body]" type="text" class="edit-question-input" value="'+l((s=null!=(s=e.text||(null!=t?t.text:t))?s:a,typeof s===r?s.call(t,{name:"text",hash:{},data:n}):s))+'">\n	  <ul class="question-actions default-question-actions">\n	  	<li><a href="#" class="ib edit-question-btn small-save">Edit</a></li>\n	  	<li><a href="'+l((s=null!=(s=e.edit_url||(null!=t?t.edit_url:t))?s:a,typeof s===r?s.call(t,{name:"edit_url",hash:{},data:n}):s))+'" class="ib delete-question-btn small-delete">Delete</a></li>\n	  </ul>\n	  <ul class="question-actions save-question-actions">\n	  	<li><button type="submit" class="ib save-question-btn small-save">Save</button></li>\n	  	<li><a href="#" class="cancel-edit-btn">Cancel</a></li>\n	  </ul>\n	</form>\n</section>'},useData:!0}),this.HandlebarsTemplates["question_creation/existing_message"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["question_creation/flash"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var o,s="function",r=e.helperMissing,a=this.escapeExpression;return'<div class="flash-message">\n	<i class="action-icon"></i>\n	'+a((o=null!=(o=e.message||(null!=t?t.message:t))?o:r,typeof o===s?o.call(t,{name:"message",hash:{},data:n}):o))+"\n</div>"},useData:!0}),this.HandlebarsTemplates["question_creation/flash"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["question_creation/message_preview"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var o,s="function",r=e.helperMissing,a=this.escapeExpression;return'<div>\n	<section class="message selected" data-id="'+a((o=null!=(o=e.id||(null!=t?t.id:t))?o:r,typeof o===s?o.call(t,{name:"id",hash:{},data:n}):o))+'">\n	  <img class="avatar" src="'+a((o=null!=(o=e.image_path||(null!=t?t.image_path:t))?o:r,typeof o===s?o.call(t,{name:"image_path",hash:{},data:n}):o))+'" alt="'+a((o=null!=(o=e.company_name||(null!=t?t.company_name:t))?o:r,typeof o===s?o.call(t,{name:"company_name",hash:{},data:n}):o))+'">\n	  <a href="'+a((o=null!=(o=e.edit_url||(null!=t?t.edit_url:t))?o:r,typeof o===s?o.call(t,{name:"edit_url",hash:{},data:n}):o))+'" class="ib remove-action">Remove</a>\n	  <p>'+a((o=null!=(o=e.text||(null!=t?t.text:t))?o:r,typeof o===s?o.call(t,{name:"text",hash:{},data:n}):o))+'</p>\n		<input type="hidden" name="active_questions[]" value="'+a((o=null!=(o=e.id||(null!=t?t.id:t))?o:r,typeof o===s?o.call(t,{name:"id",hash:{},data:n}):o))+'">\n	</section>\n</div>'},useData:!0}),this.HandlebarsTemplates["question_creation/message_preview"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["question_creation/shape_link"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var o,s="function",r=e.helperMissing,a=this.escapeExpression;return'<a href="'+a((o=null!=(o=e.url||(null!=t?t.url:t))?o:r,typeof o===s?o.call(t,{name:"url",hash:{},data:n}):o))+'" class="choice" data-remote="true" data-id="'+a((o=null!=(o=e.id||(null!=t?t.id:t))?o:r,typeof o===s?o.call(t,{name:"id",hash:{},data:n}):o))+'">'+a((o=null!=(o=e.name||(null!=t?t.name:t))?o:r,typeof o===s?o.call(t,{name:"name",hash:{},data:n}):o))+"</a>"},useData:!0}),this.HandlebarsTemplates["question_creation/shape_link"]}.call(this),$(function(){if($("body").hasClass("questions-page")){var t=".shape-step",e=$(".js-question-form"),n=$("#new-question-form"),o=$(".question-preview"),s=o.find(".conversation-list"),r=$("#new-shape-form"),a=$('#new-question-form input[type="hidden"]:first, #arrange_shape_id input[type="hidden"]'),l=$("#question-arrange-url").html(),c=$("#question-edit-url").html(),h=$(".choice-nav"),u=h.find(".new-input"),d=h.find(".action a"),p=u.find("input:text"),f=h.closest(t).next(t);r.data("success-msg")&&$.subscribe("shape/add",function(){$.publish("flash",[{message:r.data("success-msg")}])});var m=function(){this._fields=[]};m.prototype={get:function(t){return this._fields[t]},set:function(t,e){this._fields[t]=e,$.publish("state/change",[{field:t,val:e}])}};var g=new m,v=function(){this._models=[],this._shape=null};v.prototype={add:function(t){this._models.push({id:t.id,text:t.text,edit_url:t.edit_url}),$.publish("questions/add",[t])},remove:function(t,e){var i=this;e=e||!1,$.each(i._models,function(n,o){if(o.id===t){var s=_.clone(o);return i._models.splice(n,1),e||$.publish("questions/remove",[s]),!1}})},flush:function(t){var e=this;if(e._models&&e._models.length){var n;for(i=0;i<e._models.length;i++)n=_.clone(e._models[i]),e._models.splice(i,1),$.publish("questions/remove",[n]),i--}t&&t.length&&$.each(t,function(t,i){e.add(i)})},find:function(){return this._models}};var y=new v;$.subscribe("state/change",function(t,e){"shape_name"===e.field&&$(".js-shape-name").html(e.val)}),$.subscribe("state/change",function(t,e){"shape_id"===e.field&&a.val(e.val)});var b=function(t){return c.replace("/*","/"+t)+"?shape_id="+g.get("shape_id")};g.set("team_name",$("#team-name").html()),g.set("team_thumb",$("#team-thumb").attr("src")),d.click(function(t){t.preventDefault(),d.hide(),u.show(),p.val(" ").focus().keyup().val("")}),p.autoGrowInput({comfortZone:20,minWidth:100,maxWidth:300}),$.subscribe("shape/add",function(t,e){e.url=$("#shape-select-url").html().replace("*",encodeURIComponent(e.id)),u.before($("<li>"+HandlebarsTemplates["question_creation/shape_link"](e)+"</li>"))}),r.on("ajax:beforeSend",function(){}).on("ajax:complete",function(t,e,i){if("error"===i)$.publish("flash",[{message:"Your shape could not be saved",type:"error"}]);else{var n=JSON.parse(e.responseText);$.publish("shape/add",[{name:n.name,id:n.id}]),u.find(".cancel").trigger("click")}}),u.find(".cancel").click(function(t){t.preventDefault(),u.val("").hide(),d.show()}),h.on("ajax:beforeSend",".choice",function(){h.find(".choice").removeClass("current"),$(this).addClass("current")}).on("ajax:complete",".choice",function(t,e,i){"error"===i?$.publish("flash",[{message:"Your shape couldn't be selected. Please try again.",type:"error"}]):(e.questions=JSON.parse(e.responseText),g.set("shape_id",$(this).data("id")),g.set("shape_name",$(this).html()),$.each(e.questions,function(t,e){e.edit_url=b(e.id)}),y.flush(e.questions),f.trigger("panel:progress"))}),$(window).load(function(){h.find(".choice.current").length&&f.trigger("panel:progress")}),e.find("textarea").each(function(){var i=$(this);i.focus(function(){e.addClass("focus")}).blur(function(){e.removeClass("focus")}),i.closest(t).bind("panel:progress",function(){!function(t){setTimeout(function(){t.trigger("focus")},1e3)}(i)})}),$(t).each(function(){var e=$(this);e.bind("panel:progress",function(){setTimeout(function(){$(t).removeClass("current"),e.addClass("current");var i=e.offset().top;$("html,body").animate({scrollTop:i},{duration:1e3,easing:"easeOutExpo",complete:function(){}})},200)}),e.hasClass("current")&&e.trigger("panel:progress"),e.find(".js-shape-back-link").click(function(t){t.preventDefault(),e.trigger("panel:progress")})}),e.each(function(){var t=$(this),e=(t.find('button[type="submit"]'),t.find("textarea"));t.find("form").on("ajax:beforeSend",function(){}).on("ajax:complete",function(t,i,o){if("error"===o)$.publish("flash",[{message:"Your question could not be added. Please try again.",type:"error"}]);else{var s=JSON.parse(i.responseText);y.add({id:s.id,text:s.text,edit_url:b(s.id)}),e.val(""),n.data("success-msg")&&$.publish("flash",[{message:n.data("success-msg")}])}})});var w=function(t){var e=_.extend({team_name:g.get("team_name"),image_path:g.get("team_thumb")},t),i=$(HandlebarsTemplates["question_creation/message_preview"](e));i.data("question",t),s.append(i),k(),s.sortable("destroy").sortable()},x=function(t){var e=t.data("question").id;t.remove(),k(),s.sortable("destroy").sortable(),y.remove(e,!0)},k=function(){var t=y.find();o.toggleClass("populated",!!t.length)};$.subscribe("questions/add",function(t,e){w(e)}),$.subscribe("questions/remove",function(t,e){s.children("div").each(function(){return $(this).data("question").id===e.id?(x($(this)),!1):void 0})}),o.on("click",".remove-action",function(t){t.preventDefault();var e=$(this).closest(".message").parent("div"),i=confirm("Are you sure you want to delete this question?");if(i){$.post(this.href,{_method:"delete"},null,"script").error(function(){$.publish("flash",[{message:"Your question could not be deleted. Please try again.",type:"error"}])}).success(function(){$.publish("flash",[{message:"Your question was deleted."}]),e.animate({opacity:0},{duration:300,complete:function(){e.slideUp(function(){x(e)})}})})}}),s.sortable().bind("sortupdate",function(){{var t=$.map(s.children("div"),function(t){return $(t).data("question").id});$.post(l,{_method:"put",ids:JSON.stringify(t),shape_id:g.get("shape_id")},null,"script").error(function(){$.publish("flash",[{message:"Your questions could not be arranged. Please try again.",type:"error"}])}).success(function(){$.publish("flash",[{message:"Your questions have been rearranged."}])})}})}}),$("[data-behave=add_to_collection]").click(function(){$.ajax({type:"POST",url:"/admin/collections/"+$(this).data("collection-id")+"/add_spark",data:{spark_item_id:$(this).data("spark-item-id")}})}),$("[data-behave=switch_company]").click(function(){$.ajax({type:"POST",url:"/admin/switch_company/"+$(this).data("company-short-name")})}),$("[data-behave=feature_collection]").click(function(){$.ajax({type:"POST",url:"/admin/collections/"+$(this).data("id")+"/feature"})}),window.S=window.S||{},window.S.changer={},S.changer.changers=[["tag-changer",["#product","#design","#founder","#creative","#dreamer"]]],S.changer.randnth=function(t){return t[Math.floor(Math.random()*t.length)]},S.changer.swap=function(t){document.getElementById(t[0]).innerText;document.getElementById(t[0]).innerText=S.changer.randnth(t[1]),setTimeout(function(){S.changer.swap(t)},2e3)},$(function(){"use strict";function t(t){t.parentNode.removeChild(t),t.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",console.log("image src reset"),window.setTimeout(function(){t=null,console.log("image set to null")},3e3)}0!=$("#onboarding .choose-username").length,$("#onboarding form.choose-username").on("ajax:success",function(){}),$("#onboarding .choose-username").on("submit",function(){$("#people").addClass("animated fadeInUp"),$("#tags-col").addClass("animated fadeInRight"),$(this).closest(".surface").fadeOut(600),$(this).closest(".surface").next(".surface").fadeIn(600),setTimeout(function(){S.changer.swap(S.changer.changers[0])},300),$("#user_tags").focus()}),$("#onboarding .choose-username").on("ajax:error",function(){alert("Something went wrong when we tried to save your username, please try again"),window.location="/welcome"}),$("#onboarding .recommended-users").delegate("a","click",function(t){t.preventDefault()}),$("#onboarding .choose-tags").on("submit",function(){$("input[type=submit]",this).replaceWith('<div style="margin-top: -50px; height: 40px"><div class="spinner-animation"></div></div>')}),$("#onboarding form.choose-tags").on("ajax:success",function(){var t=$(this).closest(".surface");$.get("/people/recommended_people",function(e){console.log(e),$("#suggested .row").html(e);var i=$(e).data("ids");$("#follow_recommended").attr("href","/track/User?ids="+i),0!=$(".isotope").length&&(S.SparkGroups=_.map($(".isotope"),function(t){var e=new S.Views.SparkGroup({el:t,isotope:!0});return e})),$(t).fadeOut(500),$(t).next(".surface").fadeIn(400)})}),$("[data-behave=validate_username]").keyup(function(t){var e=t.target.value.replace(/\s+/g,"");t.target.value=e,$("#vanity_segment").text(e)}),$("[data-behave=validate_username]").keyup(_.debounce(function(t){$.get("/validate_username.json",{username:t.target.value},function(e){$(t.target).removeClass().addClass(e.valid===!0?"valid":"invalid")})},300)),$("[data-behave=next_surface]").on("click",function(){$(this).closest(".surface").fadeOut(600),_.map($("img",$(this).closest(".surface")),t),$(this).closest(".surface").next(".surface").fadeIn(600),S.trigger("relayout")}),$(".tags-field").on("keyup",function(t){var e=$(t.target);e.val().split(" ").length>3&&e.val(e.val().split(" ").slice(0,3).join(" ")),null!=e.val().match(/(?:(^[^#])|(\s[^#]))/)?$(t.target).addClass("invalid"):$(t.target).removeClass("invalid")})}),$(function(){OAuth.initialize("djUkQtaiVGe2CWx4v3l-5qD2ILs");var t=function(t,e){$.post("/find_friends",{names:t},function(){window.location="/find_friends?s="+e})};$("[data-behave=find_friends_on_linkedin]").click(function(){OAuth.popup("linkedin",function(e,i){i.get("/v1/people/~/connections").done(function(e){$.publish("flash",{message:"Hang on, we're getting the data from LinkedIn",persistent:!0});var e=$("person ",e).map(function(){return $("first-name",this).text()+" "+$("last-name",this).text()}).get();t(e,"LinkedIn")})})}),$("[data-behave=find_friends_on_twitter]").click(function(){OAuth.popup("twitter",function(e,i){var n=[];i.get("/1.1/friends/list.json?cursor=-1&skip_status=true&include_user_entities=false&count=200").done(function(e){$.publish("flash",{message:"Hang on, we're getting the data from Twitter",persistent:!0}),n=e.users.map(function(t){return t.name}),t(n,"Twitter")})})})}),$(function(){"use strict";$(".spark-teaser .spark").each(function(){var t=$('<div data-behave="hovercard"></div>').css({background:"white",position:"absolute",overflow:"hidden",width:"100%","z-index":-1,bottom:0}).append($(".spark__author, .spark__description, .spark__like",this));$(".spark__author",t).css("padding-bottom","1.3em"),$(this).append(t)}),$(".spark-teaser").delegate(".spark__image","click",function(t){t.preventDefault()}),$(".spark-teaser").delegate(".spark__image","mouseover touchstart",function(t){$(t.delegateTarget).css("overflow","visible");var e=$(t.target).parent().parent().siblings("[data-behave=hovercard]");$(".spark__description, .spark__like",e).show(),$(".spark__author",e).css("display","table"),$(e).css("height","inherit");var i=$(e).outerHeight()+$(t.target).height();$(e).stop().animate({height:i},300,"easeOutQuart")}),$(".spark-teaser").delegate(".spark__image","mouseleave touchend",function(t){var e=$(t.target).parent().parent().siblings("[data-behave=hovercard]"),i=$(t.target).height();$(e).stop().animate({height:i},300,"easeInQuart",function(){$(".spark__author, .spark__description, .spark__like",e).hide()})})}),window.S=window.S||{},window.S.Models=window.S.Models||{},window.S.Sets=window.S.Sets||{},window.S.Views=window.S.Views||{},S.initialize=function(){$(window).resize(function(){try{_.debounce(S.trigger("relayout"),300)}catch(t){console.log("caught a debounce exception"),console.log(t)}})},S.loadMore=function(){$($(".isotope")[0]).trigger("loadMore")},$(function(){"use strict";_.extend(S,Backbone.Events),S.initialize(),$(document.body).delegate("[data-behave=replace_provocation]","click",function(t){if("/provocations"!==window.location.pathname.substring(0,13)){t.preventDefault();var e;e=$("[data-behave=replace_provocation]").data("category")?$("[data-behave=replace_provocation]").data("id")?"/provocations/next?category="+$("[data-behave=replace_provocation]").data("category")+"&id="+$("[data-behave=replace_provocation]").data("id"):"/provocations/next?category="+$("[data-behave=replace_provocation]").data("category"):$("[data-behave=replace_provocation]").data("shareyourwork")?"/shareyourwork/next":$("[data-behave=replace_provocation]").data("organisationdesign")?"/organisation-design/next":$("[data-behave=replace_provocation]").data("category")?"/share/"+$("[data-behave=replace_provocation]").data("category")+"?id="+$("[data-behave=replace_provocation]").data("id"):$("[data-behave=replace_provocation]").data("tag")?"/share/"+$("[data-behave=replace_provocation]").data("tag")+"?id="+$("[data-behave=replace_provocation]").data("id"):"/provocations/next",$.get(e).success(function(e){$(t.target).closest(".provocation-large").fadeOut(function(){var t=$(e).hide();$(this).replaceWith(t),$(".provocation-large").fadeIn()})})}}),$(document.body).delegate("[data-behave=replace_vcv_provocation]","click",function(t){if("/provocations"!==window.location.pathname.substring(0,13)){t.preventDefault();var e;e=$("[data-behave=replace_vcv_provocation]").data("tag")?$("[data-behave=replace_vcv_provocation]").data("id")?"/provocations/next?tag="+$("[data-behave=replace_vcv_provocation]").data("tag")+"&id="+$("[data-behave=replace_vcv_provocation]").data("tag"):"/provocations/next?tag="+$("[data-behave=replace_vcv_provocation]").data("tag"):"/provocations/next",$.get(e).success(function(e){$(t.target).closest(".provocation-large").fadeOut(function(){var t=$(e).hide();$(this).replaceWith(t),$(".provocation-large").fadeIn()})})}}),$("[data-behave=edit_spark]").click(function(t){S.SparkForm&&S.SparkForm.remove();var e=new S.Models.Spark({id:$(t.target).data("spark-id"),mentioned_company_ids:$(t.target).data("company-ids"),style:$(t.target).data("style"),post_as_company:$(t.target).data("post-as-company")});S.SparkForm=new S.Views.SparkForm({model:e}),"opportunity"==e.get("style")&&(S.SparkForm.model.set("editing_opportunity",!0),S.SparkForm.model.set("max_length","")),e.fetch({success:function(){$("body").append(S.SparkForm.render().el),S.SparkForm.show(),S.SparkForm.model.toggleCategorySelection();new MediumEditor("#text_content",{buttons:["bold","italic","anchor"],buttonLabels:"fontawesome",anchor:{linkValidation:!0},autoLink:!0,imageDragging:!1,placeholder:{text:"Tell us about the person you're looking for, feel free to use @mentions and #hashtags"}})}})}),$(document.body).delegate("[data-behave=add_opportunity]","click",function(){S.SparkForm&&S.SparkForm.remove(),S.SparkForm=new S.Views.SparkForm({model:new S.Models.Spark({style:"opportunity"})}),S.SparkForm.model.set("pay_now_copy","Next"),$("body").append(S.SparkForm.render().el),S.SparkForm.show();new MediumEditor("#text_content",{buttons:["bold","italic","anchor"],buttonLabels:"fontawesome",anchor:{linkValidation:!0},autoLink:!0,imageDragging:!1,placeholder:{text:"Tell us about the person you're looking for, feel free to use @mentions and #hashtags"}})}),$(document.body).delegate("[data-behave=add_event]","click",function(){S.SparkForm&&S.SparkForm.remove(),S.SparkForm=new S.Views.SparkForm({model:new S.Models.Spark({style:"event"})}),$("body").append(S.SparkForm.render().el),S.SparkForm.show();new MediumEditor("#text_content",{buttons:["bold","italic","anchor"],buttonLabels:"fontawesome",anchor:{linkValidation:!0},autoLink:!0,imageDragging:!1,placeholder:{text:"Tell us about the event you're planning, feel free to use @mentions and #hashtags"}})}),$(document.body).delegate("[data-behave=add_spark]","click",function(t){S.SparkForm&&S.SparkForm.remove(),S.SparkForm=new S.Views.SparkForm({model:new S.Models.Spark});var e=$(t.target).closest("[data-behave=add_spark]");$(e).data("collection-id")&&S.SparkForm.model.set("collection_id",$(e).data("collection-id")),$(e).data("opportunity-id")&&S.SparkForm.model.set("opportunity_id",$(e).data("opportunity-id")),$(e).data("screening-provocation-id")&&S.SparkForm.model.set("screening_provocation_id",$(e).data("screening-provocation-id")),$(e).data("trigger-type")&&S.SparkForm.model.set("trigger_type",$(e).data("trigger-type")),$(e).data("trigger-id")&&S.SparkForm.model.set("trigger_id",$(e).data("trigger-id")),$(e).data("reply-to-id")&&S.SparkForm.model.set("in_reply_to_id",$(e).data("reply-to-id")),$("body").append(S.SparkForm.render().el),S.SparkForm.show()}),0!=$(".isotope").length&&($(window).width()<769&&$("body").addClass("webview"),S.SparkGroups=_.map($(".isotope"),function(t){var e=new S.Views.SparkGroup({el:t,isotope:!$("body").hasClass("webview")});return e})),$(document).on("ready pjax:success",function(){$(".sidebar__inner--spark [data-behave=like], .collection-header [data-behave=like], .spark__permalink [data-behave=like]").click(function(t){t.preventDefault();var e=$(this);if(e.hasClass("active"))e.toggleClass("active"),$.ajax({url:e.attr("href"),type:"DELETE",success:function(t){e.text(t.count)}});else{e.toggleClass("active"),e.addClass("animated tada");var i=$(e.closest(".spark"));i.find(".spark__image").addClass("animated pulse"),$.ajax({url:e.attr("href"),type:"POST",success:function(t){e.text(t.count)}})}})}),$(document.body).delegate("[data-behave=show_more]","click",function(t){t.preventDefault();var e=$(this),i=e.attr("data-id"),n=$(".modal-"+i);n.hasClass("active")?(n.toggleClass("active"),n.hide()):(n.toggleClass("active"),n.show(),$("body").click(function(t){n.toggleClass("active"),n.hide(),$(this).off(t)}))}),$("[data-behave=follow]").hover(function(){var t=$(this);t.hasClass("active")&&t.html("unfollow")}),$("[data-behave=follow]").mouseleave(function(){var t=$(this);t.hasClass("active")&&t.html("following")}),$("[data-behave=follow]").click(function(t){t.preventDefault();var e=$(this);return $.ajax(e.hasClass("active")?{url:e.attr("href"),type:"DELETE",success:function(){e.toggleClass("active"),e.html("follow")}}:{url:e.attr("href"),type:"POST",success:function(){e.toggleClass("active"),e.html("following")}}),!1}),$("[data-behave=update_header]").click(function(){$("#user_header_image").click(),$("input#user_header_image").change(function(){$("form#update_header").submit()})}),$("[data-behave=update_avatar]").click(function(){$("#user_avatar_image").click(),$("input#user_avatar_image").change(function(){$("form#update_avatar").submit()})}),$("[data-behave=load_more]").click(function(t){{var e=$(t.target).attr("data-page");$("div.notifications").append('<div class="spinner-animation"></div>')}$.get(window.location,{page:++e},function(i){$(t.target).attr("data-page",e),$("ol.notifications").append(i),$(".spinner-animation").remove()})}),$("[data-behave=ng_load_more]").click(function(t){$(t.target).parent().prev().prev(".isotope").trigger("loadMore")}),$("[data-behave=hide_bar]").click(function(t){$(t.target).closest(".bar").fadeOut(200)}),$("[data-behave=track]").click(function(){}),$("[data-behave=suggest_tags]").atwho({at:"#",data:"/tag/list.json"}),$("textarea#comment_comment").atwho({at:"@",data:S.user_completions}),$("[data-behave=suggest_tags]").on("keyup",function(t){var e=$(t.target);if(e.val().split(" ").length>3&&e.val(e.val().split(" ").slice(0,3).join(" ")),null!=e.val().match(/(?:(^[^#])|(\s[^#]))/)){var i=$("small",e.parent());i.replaceWith('<small class="error-msg">Tags have to start with a hashmark (#)</small>')}}),$("[data-behave=replace]").on("click",function(t){$(t.target).hide(),$(t.target).next().fadeIn()}),$(document.body).delegate("[data-behave=show_profile_card]","mouseenter",function(){$(this).siblings(".spark__authorcard").fadeIn(100),$(".spark__description, .spark__image",$(this).parent()).stop().animate({opacity:.35})}),$(document.body).delegate(".spark__authorcard, .spark__author","mouseleave",function(t){var e=t.relatedTarget.className,i=$(t.relatedTarget).parent()[0].className;if("spark__authorcard"!=e&&"spark__author"!=e&&"spark__author"!=i){var n=$(".spark__authorcard",$(this).parent());$(n).fadeOut(100),$(".spark__description, .spark__image",$(this).parent()).stop().animate({opacity:1})}}),$("[data-behave=filter]").bind("click",function(){$(this).siblings(".active").toggleClass("active"),$(this).toggleClass("active")}),$("[data-behave=toggle_for_screening]").on("click",function(t){t.preventDefault();{var e=$(this);e.attr("data-id")}if($(this).closest(".provocation-item").toggleClass("selected_provocation"),3==$(".selected_provocation").length){var i=[];i=$(".selected_provocation").map(function(){return $(this).data("id")}).get(),$("#save_and_continue").attr("href","/screening-provocations/save?provocation_ids="+i),$("#save_and_continue").show()}else $("#save_and_continue").hide();$(".selected_provocation").length>3&&alert("Please select only 3 provocations to continue")}),$(".comms .comms__toggle, .comms__inner--hidden a").click(function(){$(".comms").toggleClass("comms--hidden"),S.trigger("relayout")}),$("[data-behave=sparks_filter]").bind("click",function(){$("div.sparks_filter").toggle(),$("[data-behave=sparks_filter]").toggleClass("active")})}),function(){"use strict";S.Models.Provocation=Backbone.Model.extend({initialize:function(){S.Provocations.add(this)}}),S.Models.Collection=Backbone.Model.extend({initialize:function(){S.Collections.add(this)}}),S.Models.Spark=Backbone.Model.extend({defaults:{style:"spark",opportunity:!1,event:!1,mentioned_company_ids:!1,placeholder:"Share your story here, feel free to use #hashtags and @replies",job_link:"",job_title:"",event_link:"",max_length:"250",editing_opportunity:!1,galleryPos:0,galleryImage:"",pay_now_copy:"Next",post_to_twitter:!0,post_to_linkedin:!1,post_as_company:!1,"public":!1,can_pick_category:!1,category_name:"",context:""},initialize:function(){this.bind("change:collection_id",this.fetchCollection),this.bind("change:trigger_id",this.fetchProvocation),this.bind("change:category_id",this.setBarTitle),this.bind("change:category_id",this.setContext),S.Sparks.add(this),this.get("id")&&0==this.get("mentioned_company_ids").length?this.set("mention_company",!1):this.set("mention_company",!0),"opportunity"==this.get("style")&&(this.set("opportunity",!0),this.setBarTitle()),"event"==this.get("style")&&(this.set("event",!0),this.setBarTitle()),this.setContext()},validate:function(t){if("opportunity"==this.get("style")){if(!t.text_content||!t.job_title)return"A job title, description, link and an image are required to create an opportunity"}else if(!t.text_content)return"A description is required to create a spark"},fetchCollection:function(){var t=this;this.set("collection",new S.Models.Collection({id:this.get("collection_id")})),this.get("collection").fetch().complete(function(){t.setBarTitle()})},fetchProvocation:function(){var t=this;this.set("trigger",new S.Models.Provocation({id:this.get("trigger_id")})),this.get("trigger").fetch().complete(function(){t.setBarTitle(),t.toggleCategorySelection(),t.setContext()})},toggleCategorySelection:function(){"151"==this.get("trigger").get("id")||0==this.get("trigger").get("id")&&"11"==this.get("category_id")?this.set("can_pick_category",!0):this.set("can_pick_category",!1)},setBarTitle:function(){var t="Create a new "+this.get("style");this.get("collection")&&this.get("collection").get("name")&&(t="Add a spark to <strong>"+this.get("collection").get("name")+"</strong>"),this.get("trigger")&&this.get("trigger").get("title")&&(t="<strong>"+this.get("trigger").get("title")+"</strong>"),this.get("id")&&(t=this.get("style")?"Edit your "+this.get("style"):"Edit your Spark"),console.log("setting bar title: "+t),this.set("barTitle",t)},setContext:function(){this.get("trigger")&&this.get("trigger").get("header")?this.set("context",this.get("trigger").get("header")):this.get("category_name")?this.set("context",this.get("category_name")):this.get("trigger")&&this.get("trigger").get("category_name")?this.set("context",this.get("trigger").get("category_name")):"event"==this.get("style")?this.set("context","Event"):this.set("context","Personal")}})}(),function(){"use strict";S.Sets.Provocations=Backbone.Collection.extend({model:S.Models.Provocation,url:"/provocations"}),S.Sets.Collections=Backbone.Collection.extend({model:S.Models.Collection,url:"/collections"}),S.Sets.Sparks=Backbone.Collection.extend({model:S.Models.Spark,url:"/sparks"}),S.Collections=new S.Sets.Collections,S.Provocations=new S.Sets.Provocations,S.Sparks=new S.Sets.Sparks}(),function(){"use strict";S.Views.Spark=Backbone.View.extend({tagName:"section",className:"spark isotope-item",initialize:function(){this.template=Handlebars.compile($("#spark-template").html())},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}(),function(){"use strict";S.Views.SparkForm=Backbone.View.extend({tagName:"div",id:"spark-creator",className:"surface",events:{'click [data-behave="save_spark"].enabled':"persistSpark",'click [data-behave="save_spark_add_another"].enabled':"persistSpark",'click [data-behave="save_spark_pay_now"].enabled':"persistSpark",'click [data-behave="show_content"]':"hide",'click [data-behave="change_category"]':"change_category","click #mention_company":"toggleCompany","click #post_as_company":"togglePostAsCompany","click #public":"togglePublic","click input#post_to_twitter":"toggleTwitterSharing","click input#post_to_linkedin":"toggleLinkedInSharing","click .spark__dropzone":"showFilepicker","keyup textarea#text_content":"updateCharacterCount","keyup input#job_title":"saveJobTitleAndValidate","keyup input#job_link":"saveJobLinkAndValidate","keyup input#event_link":"saveEventLinkAndValidate","keyup .spark__description [contenteditable=true]":"updateCharacterCount","blur .spark__description [contenteditable=true]":"updateCharacterCount"},initialize:function(){this.template=Handlebars.compile($("#spark-form").html()),this.listenTo(this.model,"change",this.render)},render:function(){this.$el.html(this.template(this.model));new MediumEditor("#text_content",{buttons:["bold","italic","anchor"],buttonLabels:"fontawesome",anchor:{linkValidation:!0},autoLink:!0,imageDragging:!1,placeholder:{text:"Share your story here, feel free to use #hashtags or @mentions too..."}});null==this.model.get("image_content")&&this.initializeDropzone(),this.model.set("post_as_company",this.model.get("post_as_company"),{silent:!0}),this.$("input#post_as_company").prop("checked",this.model.get("post_as_company")),this.model.set("public",this.model.get("public"),{silent:!0}),this.$("input#public").prop("checked",this.model.get("public")),this.$(".bar .bar__title",this.el).show(),this.$(".spark__description #text_content").focus().val("").val(this.model.get("text_content"));try{null!=this.model.get("text_content")&&(document.querySelector(".spark__description [contenteditable=true]").innerHTML=this.model.get("text_content"))}catch(t){}"opportunity"==this.model.get("style")&&this.$(".spark__job_title #job_title").focus().val("").val(this.model.get("job_title")),"event"==this.model.get("style")&&this.$(".spark__event_link #event_link").focus().val("").val(this.model.get("event_link")),this.updateCharacterCount(),this.validate();try{var e=this.model.get("category_id")||this.model.get("trigger").get("category").id;this.$("[data-category-id="+e+"]").addClass("active")}catch(t){e=8,this.$("[data-category-id="+e+"]").addClass("active")}var i,n=this;this.$("#owl").owlCarousel({navigation:!0,lazyLoad:!0,singleItem:!0,autoHeight:!0,afterMove:function(){try{this.owl.currentItem?(i=$(".lazyOwl")[this.owl.currentItem-1].getAttribute("src"),i&&n.model.set("galleryImage",i),this.owl.currentItem&&n.model.set("galleryPos",this.owl.currentItem)):(n.model.unset("galleryPos",{silent:!0}),n.model.unset("galleryImage",{silent:!0}),n.validate())}catch(t){console.log(t)}}});var o=this.$("#owl").data("owlCarousel");return o&&this.model.get("galleryPos")&&o.jumpTo(this.model.get("galleryPos")),this},show:function(){$("#content.surface").hide(),this.$el.fadeIn(200),$("body").scrollTop(0)},hide:function(){this.hide_surface(),"/opportunities"==window.location.pathname&&(window.location.href="/home")
},hide_surface:function(){S.Collections.reset(),S.Provocations.reset(),$("#spark-creator.surface").hide(),$("#content.surface").fadeIn(200),S.trigger("relayout")},change_category:function(t){this.$("[data-behave=change_category]").removeClass("active"),this.model.set("category_id",$(t.target).data("category-id")),this.model.set("category_name",$(t.target).data("category-name")),this.model.setBarTitle(),this.model.setContext()},showFilepicker:function(){var t=this;console.log("show filepicker"),this.undelegateEvents();var e=new Spinner(sparkSpinnerOpts).spin(),i=$("#uploadcare-spinner");i[0].appendChild(e.el),uploadcare.openDialog(null,{crop:"free, 16:9, 4:3, 5:4, 1:1"}).done(function(i){i.progress(function(t){try{$("#progress").progressbar("value",t.progress)}catch(e){console.log(e)}}),i.promise().done(function(i){var n=["mp4","avi","mov","webm","wmv","flv","mkv","qt","mpeg","ogg"],o=i.name.substring(i.name.lastIndexOf(".")+1);0==$.inArray(o,n)?t.model.set("video_content",i.cdnUrl):t.model.set("video_content",null),t.model.set("image_content",i.cdnUrl),t.model.set("filepicker_filename",i.name),e.stop()})}).fail(function(){e.stop()}),this.delegateEvents()},setImage:function(t){this.model.set("image_content",t)},toggleCompany:function(){this.model.set("mention_company",!this.model.get("mention_company"),{silent:!0})},togglePostAsCompany:function(){this.model.set("post_as_company",!this.model.get("post_as_company"),{silent:!0})},togglePublic:function(){this.model.set("public",!this.model.get("public"),{silent:!0})},toggleTwitterSharing:function(){this.model.set("post_to_twitter",!this.model.get("post_to_twitter"),{silent:!0}),this.$("input#post_to_twitter").prop("checked",this.model.get("post_to_twitter"))},toggleLinkedInSharing:function(){this.model.set("post_to_linkedin",!this.model.get("post_to_linkedin"),{silent:!0}),this.$("input#post_to_linkedin").prop("checked",this.model.get("post_to_linkedin"))},setCompany:function(){this.model.get("mention_company")&&this.model.set({company_name:this.$("#company").val()})},persistSpark:function(){this.setCompany();var t=arguments[0].currentTarget.id;console.log(t),this.model.get("image_content")||this.model.set("image_content",this.model.get("galleryImage")),this.$('[data-behave="save_spark"]').text("Uploading..."),this.model.isNew()?this.model.save(null,{success:function(e,i){console.log("successfully saved new spark"),console.log(i),window.location.href=i.login_required?"/signin":"pay_now"==t?"/screening-provocations/select":"add_another"==t?"/sparks/new?opportunity=true":i.company_onboarding?"/manage/guide":i.opportunity_url?i.opportunity_url+"/apply-with-somewhere":i.visual_cv_building?"/visualcv/next":i.shareyourwork_building?"/shareyourwork/next":i.organisation_design_building?"/organisation-design/next":e.get("post_to_twitter")||e.get("post_to_linkedin")?e.get("permalink")+"?sharing=1":i.edition_spark&&!i.published?"/account/editions":e.get("permalink")+"?sharing=1"},error:function(t,e){console.log("error saving new spark, redirecting"),console.log(t),console.log(e),window.location.href="/provocations"==window.location.pathname.substring(0,13)?"/provocations/next":"/home"},silent:!0}):(console.log("spark is existant"),this.model.save(null,{success:function(){console.log("successfully updated existing spark"),location.reload()}}))},inPlaceUpdate:function(){$("#spark .spark__description p").text(this.model.get("text_content")),""==this.model.get("company_name")?$("#permalink .header .company").hide():($("#permalink .header .company").show(),$("#permalink .header .company a").text(this.model.get("company_name")),$("#permalink .header .company a").attr("href","/"+this.model.get("company_url"))),this.hide(),this.$(".spark__submit span.submit").text("Save")},updateCharacterCount:function(){""!=this.$(".spark__description #text_content").val()&&this.model.set("text_content",this.$(".spark__description #text_content").val(),{silent:!0}),this.$(".spark__description .count .actual").text(this.$(".spark__description #text_content").val().length);var t,e,i;try{t=document.querySelector(".spark__description [contenteditable=true]"),e=t.textContent,i=t.innerHTML}catch(n){e="",i=""}""!=i&&(this.model.set("text_content",i,{silent:!0}),this.$(".spark__description .count .actual").text(e.length)),this.validate()},saveJobTitleAndValidate:function(){"opportunity"==this.model.get("style")&&(this.model.set("job_title",this.$(".spark__job_title #job_title").val(),{silent:!0}),this.validate())},saveJobLinkAndValidate:function(){"opportunity"==this.model.get("style")&&(this.model.set("job_link",this.$(".spark__job_link #job_link").val(),{silent:!0}),this.validate())},saveEventLinkAndValidate:function(){"event"==this.model.get("style")&&(this.model.set("event_link",this.$(".spark__event_link #event_link").val(),{silent:!0}),this.validate())},validate:function(){this.model.isValid()?(this.$(".spark__save").addClass("enabled"),this.$(".spark__pay").addClass("enabled"),this.$(".spark__another").addClass("enabled")):(this.$(".spark__pay").removeClass("enabled"),this.$(".spark__another").removeClass("enabled"),this.$(".spark__save").removeClass("enabled"))},initializeDropzone:function(){0!=this.$(".spark__dropzone",this.el).length&&(this.$(".spark__dropzone",this.el).show(),this.$(".spark__image",this.el).hide(),console.log("dropzone initialized"))}})}(),function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function o(e,i){t.fn[e]=function(o){if("string"==typeof o){for(var r=n.call(arguments,1),a=0,l=this.length;l>a;a++){var c=this[a],h=t.data(c,e);if(h)if(t.isFunction(h[o])&&"_"!==o.charAt(0)){var u=h[o].apply(h,r);if(void 0!==u)return u}else s("no such method '"+o+"' for "+e+" instance");else s("cannot call methods on "+e+" prior to initialization; attempted to call '"+o+"'")}return this}return this.each(function(){var n=t.data(this,e);n?(n.option(o),n._init()):(n=new i(this,o),t.data(this,e,n))})}}if(t){var s="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),o(t,e)},t.bridget}}var n=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):i("object"==typeof exports?require("jquery"):t.jQuery)}(window),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var o=function(){};i.removeEventListener?o=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(o=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var s={bind:n,unbind:o};"function"==typeof define&&define.amd?define("eventie/eventie",s):"object"==typeof exports?module.exports=s:t.eventie=s}(this),function(t){function e(t){"function"==typeof t&&(e.isReady?t():r.push(t))}function i(t){var i="readystatechange"===t.type&&"complete"!==s.readyState;e.isReady||i||n()}function n(){e.isReady=!0;for(var t=0,i=r.length;i>t;t++){var n=r[t];n()}}function o(o){return"complete"===s.readyState?n():(o.bind(s,"DOMContentLoaded",i),o.bind(s,"readystatechange",i),o.bind(t,"load",i)),e}var s=t.document,r=[];e.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],o):"object"==typeof exports?module.exports=o(require("eventie")):t.docReady=o(t.eventie)}(window),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,o=this,s=o.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if(t instanceof RegExp){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;t.length>e;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,o=this.getListenersAsObject(t),s="object"==typeof i;for(n in o)o.hasOwnProperty(n)&&-1===e(o[n],i)&&o[n].push(s?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;t.length>e;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,o,s=this.getListenersAsObject(t);for(o in s)s.hasOwnProperty(o)&&(n=e(s[o],i),-1!==n&&s[o].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,o,s=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)s.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?s.call(this,n,o):r.call(this,n,o));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,o,s,r=this.getListenersAsObject(t);for(o in r)if(r.hasOwnProperty(o))for(n=r[o].length;n--;)i=r[o][n],i.once===!0&&this.removeListener(t,i.listener),s=i.listener.apply(this,e||[]),s===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return o.EventEmitter=s,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:o.EventEmitter=t}.call(this),function(t){function e(t){if(t){if("string"==typeof n[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,o=0,s=i.length;s>o;o++)if(e=i[o]+t,"string"==typeof n[e])return e}}var i="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),function(t){function e(t){var e=parseFloat(t),i=-1===t.indexOf("%")&&!isNaN(e);return i&&e}function i(){}function n(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=r.length;i>e;e++){var n=r[e];t[n]=0}return t}function o(i){function o(){if(!d){d=!0;var n=t.getComputedStyle;if(c=function(){var t=n?function(t){return n(t,null)}:function(t){return t.currentStyle};return function(e){var i=t(e);return i||s("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),i}}(),h=i("boxSizing")){var o=document.createElement("div");o.style.width="200px",o.style.padding="1px 2px 3px 4px",o.style.borderStyle="solid",o.style.borderWidth="1px 2px 3px 4px",o.style[h]="border-box";var r=document.body||document.documentElement;r.appendChild(o);var a=c(o);u=200===e(a.width),r.removeChild(o)}}}function a(t){if(o(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var i=c(t);if("none"===i.display)return n();var s={};s.width=t.offsetWidth,s.height=t.offsetHeight;for(var a=s.isBorderBox=!(!h||!i[h]||"border-box"!==i[h]),d=0,p=r.length;p>d;d++){var f=r[d],m=i[f];m=l(t,m);var g=parseFloat(m);s[f]=isNaN(g)?0:g}var v=s.paddingLeft+s.paddingRight,y=s.paddingTop+s.paddingBottom,b=s.marginLeft+s.marginRight,w=s.marginTop+s.marginBottom,_=s.borderLeftWidth+s.borderRightWidth,x=s.borderTopWidth+s.borderBottomWidth,k=a&&u,C=e(i.width);C!==!1&&(s.width=C+(k?0:v+_));var S=e(i.height);return S!==!1&&(s.height=S+(k?0:y+x)),s.innerWidth=s.width-(v+_),s.innerHeight=s.height-(y+x),s.outerWidth=s.width+b,s.outerHeight=s.height+w,s}}function l(e,i){if(t.getComputedStyle||-1===i.indexOf("%"))return i;var n=e.style,o=n.left,s=e.runtimeStyle,r=s&&s.left;return r&&(s.left=e.currentStyle.left),n.left=i,i=n.pixelLeft,n.left=o,r&&(s.left=r),i}var c,h,u,d=!1;return a}var s="undefined"==typeof console?i:function(t){console.error(t)},r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],o):"object"==typeof exports?module.exports=o(require("desandro-get-style-property")):t.getSize=o(t.getStyleProperty)}(window),function(t){function e(t,e){return t[r](e)}function i(t){if(!t.parentNode){var e=document.createDocumentFragment();e.appendChild(t)}}function n(t,e){i(t);for(var n=t.parentNode.querySelectorAll(e),o=0,s=n.length;s>o;o++)if(n[o]===t)return!0;return!1}function o(t,n){return i(t),e(t,n)}var s,r=function(){if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0,n=e.length;n>i;i++){var o=e[i],s=o+"MatchesSelector";if(t[s])return s}}();if(r){var a=document.createElement("div"),l=e(a,"div");s=l?e:o}else s=n;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return s}):"object"==typeof exports?module.exports=s:window.matchesSelector=s}(Element.prototype),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){for(var e in t)return!1;return e=null,!0}function n(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function o(t,o,s){function a(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var l=s("transition"),c=s("transform"),h=l&&c,u=!!s("perspective"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[l],p=["transform","transition","transitionDuration","transitionProperty"],f=function(){for(var t={},e=0,i=p.length;i>e;e++){var n=p[e],o=s(n);o&&o!==n&&(t[n]=o)}return t}();e(a.prototype,t.prototype),a.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.getSize=function(){this.size=o(this.element)},a.prototype.css=function(t){var e=this.element.style;for(var i in t){var n=f[i]||i;e[n]=t[i]}},a.prototype.getPosition=function(){var t=r(this.element),e=this.layout.options,i=e.isOriginLeft,n=e.isOriginTop,o=parseInt(t[i?"left":"right"],10),s=parseInt(t[n?"top":"bottom"],10);o=isNaN(o)?0:o,s=isNaN(s)?0:s;var a=this.layout.size;o-=i?a.paddingLeft:a.paddingRight,s-=n?a.paddingTop:a.paddingBottom,this.position.x=o,this.position.y=s},a.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,i={};e.isOriginLeft?(i.left=this.position.x+t.paddingLeft+"px",i.right=""):(i.right=this.position.x+t.paddingRight+"px",i.left=""),e.isOriginTop?(i.top=this.position.y+t.paddingTop+"px",i.bottom=""):(i.bottom=this.position.y+t.paddingBottom+"px",i.top=""),this.css(i),this.emitEvent("layout",[this])};var m=u?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};a.prototype._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(t,10),s=parseInt(e,10),r=o===this.position.x&&s===this.position.y;if(this.setPosition(t,e),r&&!this.isTransitioning)return void this.layoutPosition();var a=t-i,l=e-n,c={},h=this.layout.options;a=h.isOriginLeft?a:-a,l=h.isOriginTop?l:-l,c.transform=m(a,l),this.transition({to:c,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},a.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},a.prototype.moveTo=h?a.prototype._transitionTo:a.prototype.goTo,a.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},a.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},a.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var n=this.element.offsetHeight;n=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var g=c&&n(c)+",opacity";a.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:g,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(d,this,!1))},a.prototype.transition=a.prototype[l?"_transition":"_nonTransition"],a.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},a.prototype.onotransitionend=function(t){this.ontransitionend(t)};var v={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};a.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=v[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd){var o=e.onEnd[n];o.call(this),delete e.onEnd[n]}this.emitEvent("transitionEnd",[this])}},a.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(d,this,!1),this.isTransitioning=!1},a.prototype._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var y={transitionProperty:"",transitionDuration:""};return a.prototype.removeTransitionStyles=function(){this.css(y)},a.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},a.prototype.remove=function(){if(!l||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var t=this;this.on("transitionEnd",function(){return t.removeElem(),!0}),this.hide()},a.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0})},a.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},a.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}var s=t.getComputedStyle,r=s?function(t){return s(t,null)}:function(t){return t.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],o):"object"==typeof exports?module.exports=o(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property")):(t.Outlayer={},t.Outlayer.Item=o(t.EventEmitter,t.getSize,t.getStyleProperty))}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===u.call(t)}function n(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0,o=t.length;o>n;n++)e.push(t[n]);else e.push(t);return e}function o(t,e){var i=p(e,t);-1!==i&&e.splice(i,1)}function s(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()}function r(i,r,u,p,f,m){function g(t,i){if("string"==typeof t&&(t=a.querySelector(t)),!t||!d(t))return void(l&&l.error("Bad "+this.constructor.namespace+" element: "+t));this.element=t,this.options=e({},this.constructor.defaults),this.option(i);var n=++v;this.element.outlayerGUID=n,y[n]=this,this._create(),this.options.isInitLayout&&this.layout()}var v=0,y={};return g.namespace="outlayer",g.Item=m,g.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e(g.prototype,u.prototype),g.prototype.option=function(t){e(this.options,t)},g.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},g.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},g.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0,s=e.length;s>o;o++){var r=e[o],a=new i(r,this);n.push(a)}return n},g.prototype._filterFindItemElements=function(t){t=n(t);for(var e=this.options.itemSelector,i=[],o=0,s=t.length;s>o;o++){var r=t[o];if(d(r))if(e){f(r,e)&&i.push(r);for(var a=r.querySelectorAll(e),l=0,c=a.length;c>l;l++)i.push(a[l])}else i.push(r)}return i},g.prototype.getItemElements=function(){for(var t=[],e=0,i=this.items.length;i>e;e++)t.push(this.items[e].element);return t},g.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},g.prototype._init=g.prototype.layout,g.prototype._resetLayout=function(){this.getSize()},g.prototype.getSize=function(){this.size=p(this.element)},g.prototype._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):d(n)&&(i=n),this[t]=i?p(i)[e]:n):this[t]=0},g.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},g.prototype._getItemsForLayout=function(t){for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i];o.isIgnored||e.push(o)}return e},g.prototype._layoutItems=function(t,e){function i(){n.emitEvent("layoutComplete",[n,t])}var n=this;if(!t||!t.length)return void i();this._itemsOn(t,"layout",i);for(var o=[],s=0,r=t.length;r>s;s++){var a=t[s],l=this._getItemLayoutPosition(a);l.item=a,l.isInstant=e||a.isLayoutInstant,o.push(l)}this._processLayoutQueue(o)},g.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},g.prototype._processLayoutQueue=function(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];this._positionItem(n.item,n.x,n.y,n.isInstant)}},g.prototype._positionItem=function(t,e,i,n){n?t.goTo(e,i):t.moveTo(e,i)},g.prototype._postLayout=function(){this.resizeContainer()},g.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},g.prototype._getContainerSize=h,g.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},g.prototype._itemsOn=function(t,e,i){function n(){return o++,o===s&&i.call(r),!0}for(var o=0,s=t.length,r=this,a=0,l=t.length;l>a;a++){var c=t[a];c.on(e,n)}},g.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},g.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},g.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,i=t.length;i>e;e++){var n=t[e];this.ignore(n)}}},g.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,i=t.length;i>e;e++){var n=t[e];o(n,this.stamps),this.unignore(n)}},g.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n(t)):void 0},g.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var i=this.stamps[t];this._manageStamp(i)}}},g.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},g.prototype._manageStamp=h,g.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,n=p(t),o={left:e.left-i.left-n.marginLeft,top:e.top-i.top-n.marginTop,right:i.right-e.right-n.marginRight,bottom:i.bottom-e.bottom-n.marginBottom};return o},g.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},g.prototype.bindResize=function(){this.isResizeBound||(i.bind(t,"resize",this),this.isResizeBound=!0)},g.prototype.unbindResize=function(){this.isResizeBound&&i.unbind(t,"resize",this),this.isResizeBound=!1},g.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},g.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},g.prototype.needsResizeLayout=function(){var t=p(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},g.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},g.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},g.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},g.prototype.reveal=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){var n=t[i];n.reveal()}},g.prototype.hide=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){var n=t[i];n.hide()}},g.prototype.getItem=function(t){for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e];if(n.element===t)return n}},g.prototype.getItems=function(t){if(t&&t.length){for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i],s=this.getItem(o);s&&e.push(s)}return e}},g.prototype.remove=function(t){t=n(t);var e=this.getItems(t);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var i=0,s=e.length;s>i;i++){var r=e[i];r.remove(),o(r,this.items)}}},g.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e];n.destroy()}this.unbindResize();var o=this.element.outlayerGUID;delete y[o],delete this.element.outlayerGUID,c&&c.removeData(this.element,this.constructor.namespace)},g.data=function(t){var e=t&&t.outlayerGUID;return e&&y[e]},g.create=function(t,i){function n(){g.apply(this,arguments)}return Object.create?n.prototype=Object.create(g.prototype):e(n.prototype,g.prototype),n.prototype.constructor=n,n.defaults=e({},g.defaults),e(n.defaults,i),n.prototype.settings={},n.namespace=t,n.data=g.data,n.Item=function(){m.apply(this,arguments)},n.Item.prototype=new m,r(function(){for(var e=s(t),i=a.querySelectorAll(".js-"+e),o="data-"+e+"-options",r=0,h=i.length;h>r;r++){var u,d=i[r],p=d.getAttribute(o);try{u=p&&JSON.parse(p)}catch(f){l&&l.error("Error parsing "+o+" on "+d.nodeName.toLowerCase()+(d.id?"#"+d.id:"")+": "+f);continue}var m=new n(d,u);c&&c.data(d,t,m)}}),c&&c.bridget&&c.bridget(t,n),n},g.Item=m,g}var a=t.document,l=t.console,c=t.jQuery,h=function(){},u=Object.prototype.toString,d="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},p=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],r):"object"==typeof exports?module.exports=r(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item")):t.Outlayer=r(t.eventie,t.docReady,t.EventEmitter,t.getSize,t.matchesSelector,t.Outlayer.Item)}(window),function(t){function e(t){function e(){t.Item.apply(this,arguments)}e.prototype=new t.Item,e.prototype._create=function(){this.id=this.layout.itemGUID++,t.Item.prototype._create.call(this),this.sortData={}},e.prototype.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var t=this.layout.options.getSortData,e=this.layout._sorters;for(var i in t){var n=e[i];this.sortData[i]=n(this.element,this)}}};var i=e.prototype.destroy;return e.prototype.destroy=function(){i.apply(this,arguments),this.css({display:""})},e}"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],e):"object"==typeof exports?module.exports=e(require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.Item=e(t.Outlayer))}(window),function(t){function e(t,e){function i(t){this.isotope=t,t&&(this.options=t.options[this.namespace],this.element=t.element,this.items=t.filteredItems,this.size=t.size)}return function(){function t(t){return function(){return e.prototype[t].apply(this.isotope,arguments)}}for(var n=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"],o=0,s=n.length;s>o;o++){var r=n[o];i.prototype[r]=t(r)}}(),i.prototype.needsVerticalResizeLayout=function(){var e=t(this.isotope.element),i=this.isotope.size&&e;return i&&e.innerHeight!==this.isotope.size.innerHeight},i.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},i.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")},i.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")},i.prototype.getSegmentSize=function(t,e){var i=t+e,n="outer"+e;if(this._getMeasurement(i,n),!this[i]){var o=this.getFirstItemSize();this[i]=o&&o[n]||this.isotope.size["inner"+e]}},i.prototype.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)},i.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},i.prototype.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},i.modes={},i.create=function(t,e){function n(){i.apply(this,arguments)}return n.prototype=new i,e&&(n.options=e),n.prototype.namespace=t,i.modes[t]=n,n},i}"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],e):"object"==typeof exports?module.exports=e(require("get-size"),require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.LayoutMode=e(t.getSize,t.Outlayer))}(window),function(t){function e(t,e){var n=t.create("masonry");return n.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},n.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},n.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},n.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,n=e&&1>e?"round":"ceil",o=Math[n](t.size.outerWidth/this.columnWidth);o=Math.min(o,this.cols);for(var s=this._getColGroup(o),r=Math.min.apply(Math,s),a=i(s,r),l={x:this.columnWidth*a,y:r},c=r+t.size.outerHeight,h=this.cols+1-s.length,u=0;h>u;u++)this.colYs[a+u]=c;return l},n.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++){var o=this.colYs.slice(n,n+t);e[n]=Math.max.apply(Math,o)}return e},n.prototype._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),o=this.options.isOriginLeft?n.left:n.right,s=o+i.outerWidth,r=Math.floor(o/this.columnWidth);
r=Math.max(0,r);var a=Math.floor(s/this.columnWidth);a-=s%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var l=(this.options.isOriginTop?n.top:n.bottom)+i.outerHeight,c=r;a>=c;c++)this.colYs[c]=Math.max(l,this.colYs[c])},n.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},n.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!==this.containerWidth},n}var i=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++){var o=t[i];if(o===e)return i}return-1};"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size"],e):"object"==typeof exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t,i){var n=t.create("masonry"),o=n.prototype._getElementOffset,s=n.prototype.layout,r=n.prototype._getMeasurement;e(n.prototype,i.prototype),n.prototype._getElementOffset=o,n.prototype.layout=s,n.prototype._getMeasurement=r;var a=n.prototype.measureColumns;n.prototype.measureColumns=function(){this.items=this.isotope.filteredItems,a.call(this)};var l=n.prototype._manageStamp;return n.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,l.apply(this,arguments)},n}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],i):"object"==typeof exports?module.exports=i(require("../layout-mode"),require("masonry-layout")):i(t.Isotope.LayoutMode,t.Masonry)}(window),function(t){function e(t){var e=t.create("fitRows");return e.prototype._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},e.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth+this.gutter,i=this.isotope.size.innerWidth+this.gutter;0!==this.x&&e+this.x>i&&(this.x=0,this.y=this.maxY);var n={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+t.size.outerHeight),this.x+=e,n},e.prototype._getContainerSize=function(){return{height:this.maxY}},e}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window),function(t){function e(t){var e=t.create("vertical",{horizontalAlignment:0});return e.prototype._resetLayout=function(){this.y=0},e.prototype._getItemLayoutPosition=function(t){t.getSize();var e=(this.isotope.size.innerWidth-t.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=t.size.outerHeight,{x:e,y:i}},e.prototype._getContainerSize=function(){return{height:this.y}},e}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===h.call(t)}function n(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0,o=t.length;o>n;n++)e.push(t[n]);else e.push(t);return e}function o(t,e){var i=u(e,t);-1!==i&&e.splice(i,1)}function s(t,i,s,l,h){function u(t,e){return function(i,n){for(var o=0,s=t.length;s>o;o++){var r=t[o],a=i.sortData[r],l=n.sortData[r];if(a>l||l>a){var c=void 0!==e[r]?e[r]:e,h=c?1:-1;return(a>l?1:-1)*h}}return 0}}var d=t.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});d.Item=l,d.LayoutMode=h,d.prototype._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),t.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var e in h.modes)this._initLayoutMode(e)},d.prototype.reloadItems=function(){this.itemGUID=0,t.prototype.reloadItems.call(this)},d.prototype._itemize=function(){for(var e=t.prototype._itemize.apply(this,arguments),i=0,n=e.length;n>i;i++){var o=e[i];o.id=this.itemGUID++}return this._updateItemsSortData(e),e},d.prototype._initLayoutMode=function(t){var i=h.modes[t],n=this.options[t]||{};this.options[t]=i.options?e(i.options,n):n,this.modes[t]=new i(this)},d.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?void this.arrange():void this._layout()},d.prototype._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},d.prototype.arrange=function(t){this.option(t),this._getIsInstant(),this.filteredItems=this._filter(this.items),this._sort(),this._layout()},d.prototype._init=d.prototype.arrange,d.prototype._getIsInstant=function(){var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=t,t},d.prototype._filter=function(t){function e(){u.reveal(o),u.hide(s)}var i=this.options.filter;i=i||"*";for(var n=[],o=[],s=[],r=this._getFilterTest(i),a=0,l=t.length;l>a;a++){var c=t[a];if(!c.isIgnored){var h=r(c);h&&n.push(c),h&&c.isHidden?o.push(c):h||c.isHidden||s.push(c)}}var u=this;return this._isInstant?this._noTransition(e):e(),n},d.prototype._getFilterTest=function(t){return r&&this.options.isJQueryFiltering?function(e){return r(e.element).is(t)}:"function"==typeof t?function(e){return t(e.element)}:function(e){return s(e.element,t)}},d.prototype.updateSortData=function(t){var e;t?(t=n(t),e=this.getItems(t)):e=this.items,this._getSorters(),this._updateItemsSortData(e)},d.prototype._getSorters=function(){var t=this.options.getSortData;for(var e in t){var i=t[e];this._sorters[e]=p(i)}},d.prototype._updateItemsSortData=function(t){for(var e=t&&t.length,i=0;e&&e>i;i++){var n=t[i];n.updateSortData()}};var p=function(){function t(t){if("string"!=typeof t)return t;var i=a(t).split(" "),n=i[0],o=n.match(/^\[(.+)\]$/),s=o&&o[1],r=e(s,n),l=d.sortDataParsers[i[1]];return t=l?function(t){return t&&l(r(t))}:function(t){return t&&r(t)}}function e(t,e){var i;return i=t?function(e){return e.getAttribute(t)}:function(t){var i=t.querySelector(e);return i&&c(i)}}return t}();d.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},d.prototype._sort=function(){var t=this.options.sortBy;if(t){var e=[].concat.apply(t,this.sortHistory),i=u(e,this.options.sortAscending);this.filteredItems.sort(i),t!==this.sortHistory[0]&&this.sortHistory.unshift(t)}},d.prototype._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw Error("No layout mode: "+t);return e.options=this.options[t],e},d.prototype._resetLayout=function(){t.prototype._resetLayout.call(this),this._mode()._resetLayout()},d.prototype._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},d.prototype._manageStamp=function(t){this._mode()._manageStamp(t)},d.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},d.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},d.prototype.appended=function(t){var e=this.addItems(t);if(e.length){var i=this._filterRevealAdded(e);this.filteredItems=this.filteredItems.concat(i)}},d.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps();var n=this._filterRevealAdded(e);this.layoutItems(i),this.filteredItems=n.concat(this.filteredItems)}},d.prototype._filterRevealAdded=function(t){var e=this._noTransition(function(){return this._filter(t)});return this.layoutItems(e,!0),this.reveal(e),t},d.prototype.insert=function(t){var e=this.addItems(t);if(e.length){var i,n,o=e.length;for(i=0;o>i;i++)n=e[i],this.element.appendChild(n.element);var s=this._filter(e);for(this._noTransition(function(){this.hide(s)}),i=0;o>i;i++)e[i].isLayoutInstant=!0;for(this.arrange(),i=0;o>i;i++)delete e[i].isLayoutInstant;this.reveal(s)}};var f=d.prototype.remove;return d.prototype.remove=function(t){t=n(t);var e=this.getItems(t);if(f.call(this,t),e&&e.length)for(var i=0,s=e.length;s>i;i++){var r=e[i];o(r,this.filteredItems)}},d.prototype.shuffle=function(){for(var t=0,e=this.items.length;e>t;t++){var i=this.items[t];i.sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},d.prototype._noTransition=function(t){var e=this.options.transitionDuration;this.options.transitionDuration=0;var i=t.call(this);return this.options.transitionDuration=e,i},d.prototype.getFilteredItemElements=function(){for(var t=[],e=0,i=this.filteredItems.length;i>e;e++)t.push(this.filteredItems[e].element);return t},d}var r=t.jQuery,a=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},l=document.documentElement,c=l.textContent?function(t){return t.textContent}:function(t){return t.innerText},h=Object.prototype.toString,u=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],s):"object"==typeof exports?module.exports=s(require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("./item"),require("./layout-mode"),require("./layout-modes/masonry"),require("./layout-modes/fit-rows"),require("./layout-modes/vertical")):t.Isotope=s(t.Outlayer,t.getSize,t.matchesSelector,t.Isotope.Item,t.Isotope.LayoutMode)}(window),function(){"use strict";S.Views.SparkGroup=Backbone.View.extend({el:".isotope",page:1,isotope:!0,events:{"click [data-behave=like]":"likeSpark","click [data-behave=follow]":"followUser",loadMore:"loadMore"},initialize:function(t){var e=this;e.isotope=t.isotope,e.isotope&&this.$el.imagesLoaded(function(){e.isotopeIt(),S.on("relayout",function(){e.relayout()})})},render:function(){this.collection.each(function(t){this.renderSpark(t)},this)},loadMore:function(){var t=this;t.page=++t.page;var e=$(".ngspinner:last");$("[data-behave=ng_load_more]").hide(),$(e).show(),$.get(window.location,{page:t.page},function(i){try{ga("send","pageview",window.location.pathname+"?page="+t.page)}catch(n){console.log(n)}t.isotope?(t.$el.isotope("insert",$(i)),imagesLoaded(t.el,function(){t.relayout()}),window.setTimeout(t.relayout(),3e3)):t.$el.append(i),$(".text_spark").fontFlex(24,36,70),window.setTimeout(function(){$(e).hide(),$("[data-behave=ng_load_more]").fadeIn("fast")},700)})},relayout:function(){$(this.el).isotope("layout"),console.log("relayouted "+this.cid)},isotopeIt:function(){this.$el.isotope({layoutMode:"masonry"})},likeSpark:function(t){t.preventDefault();var e=$(t.target);if(e.hasClass("active"))e.toggleClass("active"),$.ajax({url:e.attr("href"),type:"DELETE",success:function(t){e.text(t.count)}});else{e.toggleClass("active"),e.addClass("animated tada");var i=$(e.closest(".spark"));i.find(".spark__image").addClass("animated pulse"),$.ajax({url:e.attr("href"),type:"POST",success:function(t){e.text(t.count)}})}},followUser:function(t){t.preventDefault();var e=$(t.target);$.ajax(e.hasClass("active")?{url:e.attr("href"),type:"DELETE",success:function(){e.toggleClass("active"),e.html("follow")}}:{url:e.attr("href"),type:"POST",success:function(){e.toggleClass("active"),e.html("following")}})}})}(),$(document).ajaxSuccess(function(t,e){msg=e.getResponseHeader("X-Message"),null!=msg&&""!=msg&&$.publish("flash",[{message:msg}])}),$.subscribe("flash",function(t,e){var i=Handlebars.compile('<div class="flash-message"><i class="action-icon"></i>{{ message }}&nbsp;&nbsp;&nbsp;&nbsp;<span id="spinner"></span></div>'),n=$($.parseHTML(i(e))[0]);if($("body").append(n),n.click(function(){n.fadeOut(300,function(){$(this).remove()})}),e.persistent){var o={lines:9,length:4,width:2,radius:3,className:"spinner",top:"auto",right:"10"},s=document.getElementById("spinner");new Spinner(o).spin(s)}else setTimeout(function(){n=$(".flash-message"),n.length&&n.fadeOut(300,function(){$(this).remove()})},2e3)}),$(document).ready(function(){$(document.body).delegate("a","click",function(){return link_host=this.href.split("/")[2],document_host=document.location.href.split("/")[2],link_host&&link_host!=document_host?(window.open(this.href),!1):void 0})}),"classList"in document.createElement("_")||!function(t){"use strict";if("Element"in t){var e="classList",i="prototype",n=t.Element[i],o=Object,s=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array[i].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(t,e)},c=function(t){for(var e=s.call(t.getAttribute("class")||""),i=e?e.split(/\s+/):[],n=0,o=i.length;o>n;n++)this.push(i[n]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},h=c[i]=[],u=function(){return new c(this)};if(a[i]=Error[i],h.item=function(t){return this[t]||null},h.contains=function(t){return t+="",-1!==l(this,t)},h.add=function(){var t,e=arguments,i=0,n=e.length,o=!1;do t=e[i]+"",-1===l(this,t)&&(this.push(t),o=!0);while(++i<n);o&&this._updateClassName()},h.remove=function(){var t,e,i=arguments,n=0,o=i.length,s=!1;do for(t=i[n]+"",e=l(this,t);-1!==e;)this.splice(e,1),s=!0,e=l(this,t);while(++n<o);s&&this._updateClassName()},h.toggle=function(t,e){t+="";var i=this.contains(t),n=i?e!==!0&&"remove":e!==!1&&"add";return n&&this[n](t),e===!0||e===!1?e:!i},h.toString=function(){return this.join(" ")},o.defineProperty){var d={get:u,enumerable:!0,configurable:!0};try{o.defineProperty(n,e,d)}catch(p){-2146823252===p.number&&(d.enumerable=!1,o.defineProperty(n,e,d))}}else o[i].__defineGetter__&&n.__defineGetter__(e,u)}}(self),function(t){"use strict";if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(e){}var i=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},n=function(t,e,i){this.data=t,this.size=t.length,this.type=e,this.encoding=i},o=i.prototype,s=n.prototype,r=t.FileReaderSync,a=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,h=t.URL||t.webkitURL||t,u=h.createObjectURL,d=h.revokeObjectURL,p=h,f=t.btoa,m=t.atob,g=t.ArrayBuffer,v=t.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=s.fake=!0;c--;)a.prototype[l[c]]=c+1;return h.createObjectURL||(p=t.URL=function(t){var e,i=document.createElementNS("http://www.w3.org/1999/xhtml","a");return i.href=t,"origin"in i||("data:"===i.protocol.toLowerCase()?i.origin=null:(e=t.match(y),i.origin=e&&e[1])),i}),p.createObjectURL=function(t){var e,i=t.type;return null===i&&(i="application/octet-stream"),t instanceof n?(e="data:"+i,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):f?e+";base64,"+f(t.data):e+","+encodeURIComponent(t.data)):u?u.call(h,t):void 0},p.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&d&&d.call(h,t)},o.append=function(t){var i=this.data;if(v&&(t instanceof g||t instanceof v)){for(var o="",s=new v(t),l=0,c=s.length;c>l;l++)o+=String.fromCharCode(s[l]);i.push(o)}else if("Blob"===e(t)||"File"===e(t)){if(!r)throw new a("NOT_READABLE_ERR");var h=new r;i.push(h.readAsBinaryString(t))}else t instanceof n?"base64"===t.encoding&&m?i.push(m(t.data)):"URI"===t.encoding?i.push(decodeURIComponent(t.data)):"raw"===t.encoding&&i.push(t.data):("string"!=typeof t&&(t+=""),i.push(unescape(encodeURIComponent(t))))},o.getBlob=function(t){return arguments.length||(t=null),new n(this.data.join(""),t,"raw")},o.toString=function(){return"[object BlobBuilder]"},s.slice=function(t,e,i){var o=arguments.length;return 3>o&&(i=null),new n(this.data.slice(t,o>1?e:this.data.length),i,this.encoding)},s.toString=function(){return"[object Blob]"},s.close=function(){this.size=0,delete this.data},i}(t);t.Blob=function(t,e){var n=e?e.type||"":"",o=new i;if(t)for(var s=0,r=t.length;r>s;s++)o.append(Uint8Array&&t[s]instanceof Uint8Array?t[s].buffer:t[s]);var a=o.getBlob(n);return!a.slice&&a.webkitSlice&&(a.slice=a.webkitSlice),a};var n=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=n(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(t,e){"use strict";"object"==typeof module?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.MediumEditor=e}(this,function(){"use strict";function t(t,e){return this.init(t,e)}var e;!function(t){function i(e,i,n){n||(n=t);try{for(var o=0;o<e.length;o++){var s=e[o];if(!(s in n)){if(!i)return;n[s]={}}n=n[s]}return n}catch(r){}}function n(t,e){var i,n=Array.prototype.slice.call(arguments,2);e=e||{};for(var o=0;o<n.length;o++){var s=n[o];if(s)for(i in s)s.hasOwnProperty(i)&&"undefined"!=typeof s[i]&&(t||e.hasOwnProperty(i)===!1)&&(e[i]=s[i])}return e}e={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isMac:t.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46},isMetaCtrlKey:function(t){return this.isMac&&t.metaKey||!this.isMac&&t.ctrlKey?!0:!1},parentElements:["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],extend:function(){var t=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,t)},defaults:function(){var t=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,t)},derives:function(t,e){function i(){}var o=e.prototype;return i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=t,e.prototype=n(!1,e.prototype,o),e},findAdjacentTextNodeWithContent:function(t,e,i){var n,o=!1,s=i.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1);for(n=s.nextNode();n;){if(n===e)o=!0;else if(o&&3===n.nodeType&&n.nodeValue&&n.nodeValue.trim().length>0)break;n=s.nextNode()}return n},isDescendant:function(t,e,i){if(!t||!e)return!1;if(i&&t===e)return!0;for(var n=e.parentNode;null!==n;){if(n===t)return!0;n=n.parentNode}return!1},isElement:function(t){return!(!t||1!==t.nodeType)},now:Date.now,throttle:function(t,e){var i,n,o,s=50,r=null,a=0,l=function(){a=Date.now(),r=null,o=t.apply(i,n),r||(i=n=null)};return e||0===e||(e=s),function(){var s=Date.now(),c=e-(s-a);return i=this,n=arguments,0>=c||c>e?(r&&(clearTimeout(r),r=null),a=s,o=t.apply(i,n),r||(i=n=null)):r||(r=setTimeout(l,c)),o}},traverseUp:function(t,e){if(!t)return!1;do{if(1===t.nodeType){if(e(t))return t;if(t.getAttribute("data-medium-element"))return!1}t=t.parentNode}while(t);return!1},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(t,e){var i,n,o,s,r,a,l;if(t.queryCommandSupported("insertHTML"))try{return t.execCommand("insertHTML",!1,e)}catch(c){}if(i=t.defaultView.getSelection(),i.getRangeAt&&i.rangeCount){if(n=i.getRangeAt(0),l=n.commonAncestorContainer,3===l.nodeType&&l.nodeValue===n.toString()||3!==l.nodeType&&l.innerHTML===n.toString()){for(;l.parentNode&&1===l.parentNode.childNodes.length&&!l.parentNode.getAttribute("data-medium-element");)l=l.parentNode;n.selectNode(l)}for(n.deleteContents(),o=t.createElement("div"),o.innerHTML=e,s=t.createDocumentFragment();o.firstChild;)r=o.firstChild,a=s.appendChild(r);n.insertNode(s),a&&(n=n.cloneRange(),n.setStartAfter(a),n.collapse(!0),i.removeAllRanges(),i.addRange(n))}},getSelectionRange:function(t){var e=t.getSelection();return 0===e.rangeCount?null:e.getRangeAt(0)},getSelectionStart:function(t){var e=t.getSelection().anchorNode,i=e&&3===e.nodeType?e.parentNode:e;return i},getSelectionData:function(t){var e;for(t&&t.tagName&&(e=t.tagName.toLowerCase());t&&-1===this.parentElements.indexOf(e);)t=t.parentNode,t&&t.tagName&&(e=t.tagName.toLowerCase());return{el:t,tagName:e}},execFormatBlock:function(t,e){var i=this.getSelectionData(this.getSelectionStart(t));if("blockquote"===e&&i.el&&"blockquote"===i.el.parentNode.tagName.toLowerCase())return t.execCommand("outdent",!1,null);if(i.tagName===e&&(e="p"),this.isIE){if("blockquote"===e)return t.execCommand("indent",!1,e);e="<"+e+">"}return t.execCommand("formatBlock",!1,e)},setTargetBlank:function(t,e){var i,n=e||!1;if("a"===t.tagName.toLowerCase())t.target="_blank";else for(t=t.getElementsByTagName("a"),i=0;i<t.length;i+=1)(!1===n||n===t[i].attributes.href.value)&&(t[i].target="_blank")},addClassToAnchors:function(t,e){var i,n,o=e.split(" ");if("a"===t.tagName.toLowerCase())for(n=0;n<o.length;n+=1)t.classList.add(o[n]);else for(t=t.getElementsByTagName("a"),i=0;i<t.length;i+=1)for(n=0;n<o.length;n+=1)t[i].classList.add(o[n])},isListItem:function(t){if(!t)return!1;if("li"===t.tagName.toLowerCase())return!0;for(var e=t.parentNode,i=e.tagName.toLowerCase();-1===this.parentElements.indexOf(i)&&"div"!==i;){if("li"===i)return!0;if(e=e.parentNode,!e||!e.tagName)return!1;i=e.tagName.toLowerCase()}return!1},cleanListDOM:function(t,e){if("li"===e.tagName.toLowerCase()){var i=e.parentElement;"p"===i.parentElement.tagName.toLowerCase()&&(this.unwrap(i.parentElement,t),s.moveCursor(t,e.firstChild,e.firstChild.textContent.length))}},unwrapElement:function(t){this.deprecated("unwrapElement","unwrap","v5.0.0"),this.unwrap(t,t.ownerDocument)},splitOffDOMTree:function(t,e,i){for(var n=e,o=null,s=!i;n!==t;){var r,a=n.parentNode,l=a.cloneNode(!1),c=s?n:a.firstChild;for(o&&(s?l.appendChild(o):r=o),o=l;c;){var h=c.nextSibling;c===n?(c.hasChildNodes()?c=c.cloneNode(!1):c.parentNode.removeChild(c),c.textContent&&o.appendChild(c),c=s?h:null):(c.parentNode.removeChild(c),(c.hasChildNodes()||c.textContent)&&o.appendChild(c),c=h)}r&&o.appendChild(r),n=a}return o},moveTextRangeIntoElement:function(t,i,n){if(!t||!i)return!1;var o=this.findCommonRoot(t,i);if(!o)return!1;if(i===t){var s=t.parentNode,r=t.nextSibling;return s.removeChild(t),n.appendChild(t),r?s.insertBefore(n,r):s.appendChild(n),n.hasChildNodes()}for(var a,l,c,h=[],u=0;u<o.childNodes.length;u++)if(c=o.childNodes[u],a){if(this.isDescendant(c,i,!0)){l=c;break}h.push(c)}else e.isDescendant(c,t,!0)&&(a=c);var d=l.nextSibling,p=document.createDocumentFragment();return a===t?(a.parentNode.removeChild(a),p.appendChild(a)):p.appendChild(this.splitOffDOMTree(a,t)),h.forEach(function(t){t.parentNode.removeChild(t),p.appendChild(t)}),l===i?(l.parentNode.removeChild(l),p.appendChild(l)):p.appendChild(this.splitOffDOMTree(l,i,!0)),n.appendChild(p),l.parentNode===o?o.insertBefore(n,l):d?o.insertBefore(n,d):o.appendChild(n),n.hasChildNodes()},depthOfNode:function(t){for(var e=0,i=t;null!==i.parentNode;)i=i.parentNode,e++;return e},findCommonRoot:function(t,e){for(var i=this.depthOfNode(t),n=this.depthOfNode(e),o=t,s=e;i!==n;)i>n?(o=o.parentNode,i-=1):(s=s.parentNode,n-=1);for(;o!==s;)o=o.parentNode,s=s.parentNode;return o},ensureUrlHasProtocol:function(t){return-1===t.indexOf("://")?"http://"+t:t},warn:function(){void 0!==t.console&&"function"==typeof t.console.warn&&t.console.warn.apply(console,arguments)},deprecated:function(t,i,n){var o=t+" is deprecated, please use "+i+" instead.";n&&(o+=" Will be removed in "+n),e.warn(o)},deprecatedMethod:function(t,i,n,o){e.deprecated(t,i,o),"function"==typeof this[i]&&this[i].apply(this,n)},cleanupAttrs:function(t,e){e.forEach(function(e){t.removeAttribute(e)})},cleanupTags:function(t,e){e.forEach(function(e){t.tagName.toLowerCase()===e&&t.parentNode.removeChild(t)},this)},getClosestTag:function(t,i){return e.traverseUp(t,function(t){return t.tagName.toLowerCase()===i.toLowerCase()})},unwrap:function(t,e){for(var i=e.createDocumentFragment(),n=Array.prototype.slice.call(t.childNodes),o=0;o<n.length;o++)i.appendChild(n[o]);i.childNodes.length?t.parentNode.replaceChild(i,t):t.parentNode.removeChild(t)},setObject:function(t,e,n){var o=t.split("."),s=o.pop(),r=i(o,!0,n);return r&&s?r[s]=e:void 0},getObject:function(t,e,n){return i(t?t.split("."):[],e,n)}}}(window);var i;!function(){i={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>',key:"b"},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>',key:"i"},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>',key:"u"},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},header1:{name:"header1",action:function(t){return"append-"+t.firstHeader},aria:function(t){return t.firstHeader},tagNames:function(t){return[t.firstHeader]},contentDefault:"<b>H1</b>"},header2:{name:"header2",action:function(t){return"append-"+t.secondHeader},aria:function(t){return t.secondHeader},tagNames:function(t){return[t.secondHeader]},contentDefault:"<b>H2</b>"},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'}}}();var n;!function(){n={allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","header1","header2","quote"],buttonLabels:!1,delay:0,diffLeft:0,diffTop:-10,disableReturn:!1,disableDoubleReturn:!1,disableToolbar:!1,disableEditing:!1,autoLink:!1,toolbarAlign:"center",elementsContainer:!1,imageDragging:!0,standardizeSelectionStart:!1,contentWindow:window,ownerDocument:document,firstHeader:"h3",secondHeader:"h4",targetBlank:!1,extensions:{},activeButtonClass:"medium-editor-button-active",firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",spellcheck:!0}}();var o;!function(){o=function(t){e.extend(this,t)},o.extend=function(t){var i,n=this;i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return n.apply(this,arguments)},e.extend(i,n);var o=function(){this.constructor=i};return o.prototype=n.prototype,i.prototype=new o,t&&e.extend(i.prototype,t),i},o.prototype={init:function(){},parent:!0,base:null,name:null,checkState:null,queryCommandState:null,isActive:null,isAlreadyApplied:null,setActive:null,setInactive:null,onHide:null}}();var s;!function(){s={findMatchingSelectionParent:function(t,i){var n,o,s=i.getSelection();return 0===s.rangeCount?!1:(n=s.getRangeAt(0),o=n.commonAncestorContainer,e.traverseUp(o,t))},getSelectionElement:function(t){return this.findMatchingSelectionParent(function(t){return t.getAttribute("data-medium-element")},t)},importSelectionMoveCursorPastAnchor:function(t,i){var n=function(t){return"a"===t.nodeName.toLowerCase()};if(t.start===t.end&&3===i.startContainer.nodeType&&i.startOffset===i.startContainer.nodeValue.length&&e.traverseUp(i.startContainer,n)){for(var o=i.startContainer,s=i.startContainer.parentNode;null!==s&&"a"!==s.nodeName.toLowerCase();)s.childNodes[s.childNodes.length-1]!==o?s=null:(o=s,s=s.parentNode);if(null!==s&&"a"===s.nodeName.toLowerCase()){for(var r=null,a=0;null===r&&a<s.parentNode.childNodes.length;a++)s.parentNode.childNodes[a]===s&&(r=a);i.setStart(s.parentNode,r+1),i.collapse(!0)}}return i},selectionInContentEditableFalse:function(t){var e,i=this.findMatchingSelectionParent(function(t){var i=t&&t.getAttribute("contenteditable");return"true"===i&&(e=!0),"#text"!==t.nodeName&&"false"===i},t);return!e&&i},getSelectionHtml:function(){var t,e,i,n="",o=this.options.contentWindow.getSelection();if(o.rangeCount){for(i=this.options.ownerDocument.createElement("div"),t=0,e=o.rangeCount;e>t;t+=1)i.appendChild(o.getRangeAt(t).cloneContents());n=i.innerHTML}return n},getCaretOffsets:function(t,e){var i,n;return e||(e=window.getSelection().getRangeAt(0)),i=e.cloneRange(),n=e.cloneRange(),i.selectNodeContents(t),i.setEnd(e.endContainer,e.endOffset),n.selectNodeContents(t),n.setStart(e.endContainer,e.endOffset),{left:i.toString().length,right:n.toString().length}},rangeSelectsSingleNode:function(t){var e=t.startContainer;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(t){var e=null;return e=this.rangeSelectsSingleNode(t)&&3!==t.startContainer.childNodes[t.startOffset].nodeType?t.startContainer.childNodes[t.startOffset]:3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer},getSelectedElements:function(t){var e,i,n,o=t.getSelection();if(!o.rangeCount||!o.getRangeAt(0).commonAncestorContainer)return[];if(e=o.getRangeAt(0),3===e.commonAncestorContainer.nodeType){for(i=[],n=e.commonAncestorContainer;n.parentNode&&1===n.parentNode.childNodes.length;)i.push(n.parentNode),n=n.parentNode;return i}return[].filter.call(e.commonAncestorContainer.getElementsByTagName("*"),function(t){return"function"==typeof o.containsNode?o.containsNode(t,!0):!0})},selectNode:function(t,e){var i=e.createRange(),n=e.getSelection();i.selectNodeContents(t),n.removeAllRanges(),n.addRange(i)},moveCursor:function(t,e,i){var n,o,s=i||0;n=t.createRange(),o=t.getSelection(),n.setStart(e,s),n.collapse(!0),o.removeAllRanges(),o.addRange(n)}}}();var r;!function(){r=function(t){this.base=t,this.options=this.base.options,this.events=[],this.customEvents={},this.listeners={}},r.prototype={InputEventOnContenteditableSupported:!e.isIE,attachDOMEvent:function(t,e,i,n){t.addEventListener(e,i,n),this.events.push([t,e,i,n])},detachDOMEvent:function(t,e,i,n){var o,s=this.indexOfListener(t,e,i,n);
-1!==s&&(o=this.events.splice(s,1)[0],o[0].removeEventListener(o[1],o[2],o[3]))},indexOfListener:function(t,e,i,n){var o,s,r;for(o=0,s=this.events.length;s>o;o+=1)if(r=this.events[o],r[0]===t&&r[1]===e&&r[2]===i&&r[3]===n)return o;return-1},detachAllDOMEvents:function(){for(var t=this.events.pop();t;)t[0].removeEventListener(t[1],t[2],t[3]),t=this.events.pop()},attachCustomEvent:function(t,e){this.setupListener(t),this.listeners[t]&&(this.customEvents[t]||(this.customEvents[t]=[]),this.customEvents[t].push(e))},detachCustomEvent:function(t,e){var i=this.indexOfCustomListener(t,e);-1!==i&&this.customEvents[t].splice(i,1)},indexOfCustomListener:function(t,e){return this.customEvents[t]&&this.customEvents[t].length?this.customEvents[t].indexOf(e):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(t,e,i){this.customEvents[t]&&this.customEvents[t].forEach(function(t){t(e,i)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand()},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(t){this.handleDocumentExecCommand(t)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var t=this.options.ownerDocument;if(this.execCommandListener&&t.execCommand.listeners){var e=t.execCommand.listeners.indexOf(this.execCommandListener);-1!==e&&t.execCommand.listeners.splice(e,1),t.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var t=this.options.ownerDocument;if(!t.execCommand.listeners){var e=function(e,i,n){var o=t.execCommand.orig.apply(this,arguments);if(t.execCommand.listeners){var s=Array.prototype.slice.call(arguments);t.execCommand.listeners.forEach(function(t){t({command:e,value:n,args:s,result:o})})}return o};e.orig=t.execCommand,e.listeners=[],t.execCommand=e}},unwrapExecCommand:function(){var t=this.options.ownerDocument;t.execCommand.orig&&(t.execCommand=t.execCommand.orig)},setupListener:function(t){if(!this.listeners[t])switch(t){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0),this.listeners[t]=!0;break;case"blur":this.setupListener("externalInteraction"),this.listeners[t]=!0;break;case"focus":this.setupListener("externalInteraction"),this.listeners[t]=!0;break;case"editableInput":this.contentCache=[],this.base.elements.forEach(function(t){this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML,this.InputEventOnContenteditableSupported&&this.attachDOMEvent(t,"input",this.handleInput.bind(this))}.bind(this)),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand()),this.listeners[t]=!0;break;case"editableClick":this.base.elements.forEach(function(t){this.attachDOMEvent(t,"click",this.handleClick.bind(this))}.bind(this)),this.listeners[t]=!0;break;case"editableBlur":this.base.elements.forEach(function(t){this.attachDOMEvent(t,"blur",this.handleBlur.bind(this))}.bind(this)),this.listeners[t]=!0;break;case"editableKeypress":this.base.elements.forEach(function(t){this.attachDOMEvent(t,"keypress",this.handleKeypress.bind(this))}.bind(this)),this.listeners[t]=!0;break;case"editableKeyup":this.base.elements.forEach(function(t){this.attachDOMEvent(t,"keyup",this.handleKeyup.bind(this))}.bind(this)),this.listeners[t]=!0;break;case"editableKeydown":this.base.elements.forEach(function(t){this.attachDOMEvent(t,"keydown",this.handleKeydown.bind(this))}.bind(this)),this.listeners[t]=!0;break;case"editableKeydownEnter":this.setupListener("editableKeydown"),this.listeners[t]=!0;break;case"editableKeydownTab":this.setupListener("editableKeydown"),this.listeners[t]=!0;break;case"editableKeydownDelete":this.setupListener("editableKeydown"),this.listeners[t]=!0;break;case"editableMouseover":this.base.elements.forEach(function(t){this.attachDOMEvent(t,"mouseover",this.handleMouseover.bind(this))},this),this.listeners[t]=!0;break;case"editableDrag":this.base.elements.forEach(function(t){this.attachDOMEvent(t,"dragover",this.handleDragging.bind(this)),this.attachDOMEvent(t,"dragleave",this.handleDragging.bind(this))},this),this.listeners[t]=!0;break;case"editableDrop":this.base.elements.forEach(function(t){this.attachDOMEvent(t,"drop",this.handleDrop.bind(this))},this),this.listeners[t]=!0;break;case"editablePaste":this.base.elements.forEach(function(t){this.attachDOMEvent(t,"paste",this.handlePaste.bind(this))},this),this.listeners[t]=!0}},focusElement:function(t){t.focus(),this.updateFocus(t,{target:t,type:"focus"})},updateFocus:function(t,i){var n,o=this.base.toolbar?this.base.toolbar.getToolbarElement():null,s=this.base.getExtensionByName("anchor-preview"),r=s&&s.getPreviewElement?s.getPreviewElement():null,a=this.base.getFocusedElement();a&&"click"===i.type&&this.lastMousedownTarget&&(e.isDescendant(a,this.lastMousedownTarget,!0)||e.isDescendant(o,this.lastMousedownTarget,!0)||e.isDescendant(r,this.lastMousedownTarget,!0))&&(n=a),n||this.base.elements.some(function(i){return!n&&e.isDescendant(i,t,!0)&&(n=i),!!n},this);var l=!e.isDescendant(a,t,!0)&&!e.isDescendant(o,t,!0)&&!e.isDescendant(r,t,!0);n!==a&&(a&&l&&(a.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",i,a)),n&&(n.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",i,n))),l&&this.triggerCustomEvent("externalInteraction",i)},updateInput:function(t,e){var i=t.getAttribute("medium-editor-index");t.innerHTML!==this.contentCache[i]&&this.triggerCustomEvent("editableInput",e,t),this.contentCache[i]=t.innerHTML},handleDocumentSelectionChange:function(t){if(t.currentTarget&&t.currentTarget.activeElement){var i,n=t.currentTarget.activeElement;this.base.elements.some(function(t){return e.isDescendant(t,n,!0)?(i=t,!0):!1},this),i&&this.updateInput(i,{target:n,currentTarget:i})}},handleDocumentExecCommand:function(){var t=this.base.getFocusedElement();t&&this.updateInput(t,{target:t,currentTarget:t})},handleBodyClick:function(t){this.updateFocus(t.target,t)},handleBodyFocus:function(t){this.updateFocus(t.target,t)},handleBodyMousedown:function(t){this.lastMousedownTarget=t.target},handleInput:function(t){this.updateInput(t.currentTarget,t)},handleClick:function(t){this.triggerCustomEvent("editableClick",t,t.currentTarget)},handleBlur:function(t){this.triggerCustomEvent("editableBlur",t,t.currentTarget)},handleKeypress:function(t){if(this.triggerCustomEvent("editableKeypress",t,t.currentTarget),this.keypressUpdateInput){var e={target:t.target,currentTarget:t.currentTarget};setTimeout(function(){this.updateInput(e.currentTarget,e)}.bind(this),0)}},handleKeyup:function(t){this.triggerCustomEvent("editableKeyup",t,t.currentTarget)},handleMouseover:function(t){this.triggerCustomEvent("editableMouseover",t,t.currentTarget)},handleDragging:function(t){this.triggerCustomEvent("editableDrag",t,t.currentTarget)},handleDrop:function(t){this.triggerCustomEvent("editableDrop",t,t.currentTarget)},handlePaste:function(t){this.triggerCustomEvent("editablePaste",t,t.currentTarget)},handleKeydown:function(t){switch(this.triggerCustomEvent("editableKeydown",t,t.currentTarget),t.which){case e.keyCode.ENTER:this.triggerCustomEvent("editableKeydownEnter",t,t.currentTarget);break;case e.keyCode.TAB:this.triggerCustomEvent("editableKeydownTab",t,t.currentTarget);break;case e.keyCode.DELETE:case e.keyCode.BACKSPACE:this.triggerCustomEvent("editableKeydownDelete",t,t.currentTarget)}}}}();var a;!function(){a=function(t,i){e.deprecated("MediumEditor.statics.DefaultButton","MediumEditor.extensions.button","v5.0.0"),this.options=t,this.name=t.name,this.init(i)},a.prototype={init:function(t){this.base=t,this.button=this.createButton(),this.base.on(this.button,"click",this.handleClick.bind(this)),this.options.key&&this.base.subscribe("editableKeydown",this.handleKeydown.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.options.action?this.options.action(this.base.options):this.options.action},getAria:function(){return"function"==typeof this.options.aria?this.options.aria(this.base.options):this.options.aria},getTagNames:function(){return"function"==typeof this.options.tagNames?this.options.tagNames(this.base.options):this.options.tagNames},createButton:function(){var t=this.base.options.ownerDocument.createElement("button"),e=this.options.contentDefault,i=this.getAria();return t.classList.add("medium-editor-action"),t.classList.add("medium-editor-action-"+this.name),t.setAttribute("data-action",this.getAction()),i&&(t.setAttribute("title",i),t.setAttribute("aria-label",i)),this.base.options.buttonLabels&&("fontawesome"===this.base.options.buttonLabels&&this.options.contentFA?e=this.options.contentFA:"object"==typeof this.base.options.buttonLabels&&this.base.options.buttonLabels[this.name]&&(e=this.base.options.buttonLabels[this.options.name])),t.innerHTML=e,t},handleKeydown:function(t){var i,n=String.fromCharCode(t.which||t.keyCode).toLowerCase();this.options.key===n&&e.isMetaCtrlKey(t)&&(t.preventDefault(),t.stopPropagation(),i=this.getAction(),i&&this.base.execAction(i))},handleClick:function(t){t.preventDefault(),t.stopPropagation();var e=this.getAction();e&&this.base.execAction(e)},isActive:function(){return this.button.classList.contains(this.base.options.activeButtonClass)},setInactive:function(){this.button.classList.remove(this.base.options.activeButtonClass),delete this.knownState},setActive:function(){this.button.classList.add(this.base.options.activeButtonClass),delete this.knownState},queryCommandState:function(){var t=null;return this.options.useQueryState&&(t=this.base.queryCommandState(this.getAction())),t},isAlreadyApplied:function(t){var e,i,n=!1,o=this.getTagNames();return this.knownState===!1||this.knownState===!0?this.knownState:(o&&o.length>0&&t.tagName&&(n=-1!==o.indexOf(t.tagName.toLowerCase())),!n&&this.options.style&&(e=this.options.style.value.split("|"),i=this.base.options.contentWindow.getComputedStyle(t,null).getPropertyValue(this.options.style.prop),e.forEach(function(t){this.knownState||(n=-1!==i.indexOf(t),(n||"text-decoration"!==this.options.style.prop)&&(this.knownState=n))},this)),n)}}}();var l;!function(){function t(){e.deprecated("MediumEditor.statics.AnchorExtension","MediumEditor.extensions.anchor","v5.0.0"),this.parent=!0,this.options={name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',key:"k"},this.name="anchor",this.hasForm=!0}t.prototype={formSaveLabel:"&#10003;",formCloseLabel:"&times;",handleClick:function(t){t.preventDefault(),t.stopPropagation();var i=s.getSelectedParentElement(e.getSelectionRange(this.base.options.ownerDocument));return i.tagName&&"a"===i.tagName.toLowerCase()?this.base.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(t){var i=String.fromCharCode(t.which||t.keyCode).toLowerCase();this.options.key===i&&e.isMetaCtrlKey(t)&&(t.preventDefault(),t.stopPropagation(),this.handleClick(t))},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var t=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.base.options.anchorInputPlaceholder,'">'];return t.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),t.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.base.options.anchorTarget&&t.push('<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.base.options.anchorInputCheckboxLabel,"</label>"),this.base.options.anchorButton&&t.push('<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>Button</label>"),t.join("")},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(t){var e=this.getInput();this.base.saveSelection(),this.base.hideToolbarDefaultActions(),this.getForm().style.display="block",this.base.setToolbarPosition(),e.value=t||"",e.focus()},deactivate:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},getFormOpts:function(){var t=this.getForm().querySelector(".medium-editor-toolbar-anchor-target"),e=this.getForm().querySelector(".medium-editor-toolbar-anchor-button"),i={url:this.getInput().value};return this.base.options.checkLinkFormat&&(i.url=this.checkLinkFormat(i.url)),i.target=t&&t.checked?"_blank":"_self",e&&e.checked&&(i.buttonClass=this.base.options.anchorButtonClass),i},doFormSave:function(){var t=this.getFormOpts();this.completeFormSave(t)},completeFormSave:function(t){this.base.restoreSelection(),this.base.createLink(t),this.base.checkSelection()},checkLinkFormat:function(t){var e=/^(https?|ftps?|rtmpt?):\/\/|mailto:/;return(e.test(t)?"":"http://")+t},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(t){var e=t.querySelector(".medium-editor-toolbar-close"),i=t.querySelector(".medium-editor-toolbar-save"),n=t.querySelector(".medium-editor-toolbar-input");this.base.on(t,"click",this.handleFormClick.bind(this)),this.base.on(n,"keyup",this.handleTextboxKeyup.bind(this)),this.base.on(e,"click",this.handleCloseClick.bind(this)),this.base.on(i,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var t=this.base.options.ownerDocument,e=t.createElement("div");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-anchor-"+this.base.id,e.innerHTML=this.getTemplate(),this.attachFormEvents(e),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},handleTextboxKeyup:function(t){return t.keyCode===e.keyCode.ENTER?(t.preventDefault(),void this.doFormSave()):void(t.keyCode===e.keyCode.ESCAPE&&(t.preventDefault(),this.doFormCancel()))},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}},l=e.derives(a,t)}();var c;!function(){c=function(){e.deprecated("MediumEditor.statics.AnchorPreview","MediumEditor.extensions.anchorPreview","v5.0.0"),this.parent=!0,this.name="anchor-preview"},c.prototype={previewValueSelector:"a",init:function(){this.anchorPreview=this.createPreview(),this.base.options.elementsContainer.appendChild(this.anchorPreview),this.attachToEditables()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var t=this.base.options.ownerDocument.createElement("div");return t.id="medium-editor-anchor-preview-"+this.base.id,t.className="medium-editor-anchor-preview",t.innerHTML=this.getTemplate(),this.base.on(t,"click",this.handleClick.bind(this)),t},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},deactivate:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(t){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||t.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=t.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=t.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=t,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(){var t,e,i=this.anchorPreview.offsetHeight,n=this.activeAnchor.getBoundingClientRect(),o=(n.left+n.right)/2;t=this.anchorPreview.offsetWidth/2,e=this.base.options.diffLeft-t,this.anchorPreview.style.top=Math.round(i+n.bottom-this.base.options.diffTop+this.base.options.contentWindow.pageYOffset-this.anchorPreview.offsetHeight)+"px",this.anchorPreview.style.left=t>o?e+t+"px":this.base.options.contentWindow.innerWidth-o<t?this.base.options.contentWindow.innerWidth+e-t+"px":e+o+"px"},attachToEditables:function(){this.base.subscribe("editableMouseover",this.handleEditableMouseover.bind(this))},handleClick:function(t){var e=this.base.getExtensionByName("anchor"),i=this.activeAnchor;e&&i&&(t.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){i&&(e.showForm(i.attributes.href.value),i=null)}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.base.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(t){var i=e.getClosestTag(t.target,"a");if(i){if(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML))return!0;if(this.base.toolbar&&this.base.toolbar.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers(),this.anchorToPreview=i,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.base.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(t){t.relatedTarget&&/anchor-preview/.test(t.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var t=(new Date).getTime()-this.lastOver;t>this.base.options.anchorPreviewHideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.base.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.base.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.base.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.base.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.base.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.base.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.base.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.base.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}}}();var h;!function(){function t(){e.deprecated("MediumEditor.statics.FontSizeExtension","MediumEditor.extensions.fontSize","v5.0.0"),this.parent=!0,this.options={name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>'},this.name="fontsize",this.hasForm=!0}t.prototype={handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),!this.isDisplayed()){var e=this.base.options.ownerDocument.queryCommandValue("fontSize")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(t){var e=this.getInput();this.base.saveSelection(),this.base.hideToolbarDefaultActions(),this.getForm().style.display="block",this.base.setToolbarPosition(),e.value=t||"",e.focus()},deactivate:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var t=this.base.options.ownerDocument,e=t.createElement("div"),i=t.createElement("input"),n=t.createElement("a"),o=t.createElement("a");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-fontsize-"+this.base.id,this.base.on(e,"click",this.handleFormClick.bind(this)),i.setAttribute("type","range"),i.setAttribute("min","1"),i.setAttribute("max","7"),i.className="medium-editor-toolbar-input",e.appendChild(i),this.base.on(i,"change",this.handleSliderChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-check"></i>':"&#10003;",e.appendChild(o),this.base.on(o,"click",this.handleSaveClick.bind(this),!0),n.setAttribute("href","#"),n.className="medium-editor-toobar-close",n.innerHTML="fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-times"></i>':"&times;",e.appendChild(n),this.base.on(n,"click",this.handleCloseClick.bind(this)),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){s.getSelectedElements(this.base.options.ownerDocument).forEach(function(t){"FONT"===t.tagName&&t.hasAttribute("size")&&t.removeAttribute("size")})},handleSliderChange:function(){var t=this.getInput().value;"4"===t?this.clearFontSize():this.base.execAction("fontSize",{size:t})},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}},h=e.derives(a,t)}();var u;!function(){u=o.extend({init:function(){this.button=this.createButton(),this.base.on(this.button,"click",this.handleClick.bind(this)),this.key&&this.base.subscribe("editableKeydown",this.handleKeydown.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var t=this.base.options.ownerDocument.createElement("button"),e=this.contentDefault,i=this.getAria();return t.classList.add("medium-editor-action"),t.classList.add("medium-editor-action-"+this.name),t.setAttribute("data-action",this.getAction()),i&&(t.setAttribute("title",i),t.setAttribute("aria-label",i)),this.base.options.buttonLabels&&("fontawesome"===this.base.options.buttonLabels&&this.contentFA?e=this.contentFA:"object"==typeof this.base.options.buttonLabels&&this.base.options.buttonLabels[this.name]&&(e=this.base.options.buttonLabels[this.name])),t.innerHTML=e,t},handleKeydown:function(t){var i,n=String.fromCharCode(t.which||t.keyCode).toLowerCase();this.key===n&&e.isMetaCtrlKey(t)&&(t.preventDefault(),t.stopPropagation(),i=this.getAction(),i&&this.base.execAction(i))},handleClick:function(t){t.preventDefault(),t.stopPropagation();var e=this.getAction();e&&this.base.execAction(e)},isActive:function(){return this.button.classList.contains(this.base.options.activeButtonClass)},setInactive:function(){this.button.classList.remove(this.base.options.activeButtonClass),delete this.knownState},setActive:function(){this.button.classList.add(this.base.options.activeButtonClass),delete this.knownState},queryCommandState:function(){var t=null;return this.useQueryState&&(t=this.base.queryCommandState(this.getAction())),t},isAlreadyApplied:function(t){var e,i,n=!1,o=this.getTagNames();return this.knownState===!1||this.knownState===!0?this.knownState:(o&&o.length>0&&t.tagName&&(n=-1!==o.indexOf(t.tagName.toLowerCase())),!n&&this.style&&(e=this.style.value.split("|"),i=this.base.options.contentWindow.getComputedStyle(t,null).getPropertyValue(this.style.prop),e.forEach(function(t){this.knownState||(n=-1!==i.indexOf(t),(n||"text-decoration"!==this.style.prop)&&(this.knownState=n))},this)),n)}})}();var d;!function(){var t=function(){};d=u.extend({formSaveLabel:"&#10003;",formCloseLabel:"&times;",hasForm:!0,getForm:t,isDisplayed:t,hideForm:t})}();var p;!function(){p=d.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",window:window,document:document,name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',key:"k",handleClick:function(t){t.preventDefault(),t.stopPropagation();var i=s.getSelectedParentElement(e.getSelectionRange(this.document));return i.tagName&&"a"===i.tagName.toLowerCase()?this.base.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(t){var i=String.fromCharCode(t.which||t.keyCode).toLowerCase();this.key===i&&e.isMetaCtrlKey(t)&&this.handleClick(t)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var t=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return t.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),t.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&t.push('<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.targetCheckboxText,"</label>"),this.customClassOption&&t.push('<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>"),t.join("")},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(t){var e=this.getInput();this.base.saveSelection(),this.base.hideToolbarDefaultActions(),this.getForm().style.display="block",this.base.setToolbarPosition(),e.value=t||"",e.focus()},deactivate:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},getFormOpts:function(){var t=this.getForm().querySelector(".medium-editor-toolbar-anchor-target"),e=this.getForm().querySelector(".medium-editor-toolbar-anchor-button"),i={url:this.getInput().value};return this.linkValidation&&(i.url=this.checkLinkFormat(i.url)),i.target=t&&t.checked?"_blank":"_self",e&&e.checked&&(i.buttonClass=this.customClassOption),i},doFormSave:function(){var t=this.getFormOpts();this.completeFormSave(t)},completeFormSave:function(t){this.base.restoreSelection(),this.base.createLink(t),this.base.checkSelection()},checkLinkFormat:function(t){var e=/^(https?|ftps?|rtmpt?):\/\/|mailto:/;return(e.test(t)?"":"http://")+t},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(t){var e=t.querySelector(".medium-editor-toolbar-close"),i=t.querySelector(".medium-editor-toolbar-save"),n=t.querySelector(".medium-editor-toolbar-input");this.base.on(t,"click",this.handleFormClick.bind(this)),this.base.on(n,"keyup",this.handleTextboxKeyup.bind(this)),this.base.on(e,"click",this.handleCloseClick.bind(this)),this.base.on(i,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var t=this.document,e=t.createElement("div");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-anchor-"+this.base.id,e.innerHTML=this.getTemplate(),this.attachFormEvents(e),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},handleTextboxKeyup:function(t){return t.keyCode===e.keyCode.ENTER?(t.preventDefault(),void this.doFormSave()):void(t.keyCode===e.keyCode.ESCAPE&&(t.preventDefault(),this.doFormCancel()))},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}})}();var f;!function(){f=o.extend({name:"anchor-preview",parent:!0,hideDelay:500,previewValueSelector:"a",window:window,document:document,diffLeft:0,diffTop:-10,elementsContainer:!1,init:function(){this.anchorPreview=this.createPreview(),this.elementsContainer||(this.elementsContainer=this.document.body),this.elementsContainer.appendChild(this.anchorPreview),this.attachToEditables()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var t=this.document.createElement("div");return t.id="medium-editor-anchor-preview-"+this.base.id,t.className="medium-editor-anchor-preview",t.innerHTML=this.getTemplate(),this.base.on(t,"click",this.handleClick.bind(this)),t},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},deactivate:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(t){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||t.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=t.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=t.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=t,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(){var t,e,i=this.anchorPreview.offsetHeight,n=this.activeAnchor.getBoundingClientRect(),o=(n.left+n.right)/2;t=this.anchorPreview.offsetWidth/2,e=this.diffLeft-t,this.anchorPreview.style.top=Math.round(i+n.bottom-this.diffTop+this.window.pageYOffset-this.anchorPreview.offsetHeight)+"px",this.anchorPreview.style.left=t>o?e+t+"px":this.window.innerWidth-o<t?this.window.innerWidth+e-t+"px":e+o+"px"},attachToEditables:function(){this.base.subscribe("editableMouseover",this.handleEditableMouseover.bind(this))},handleClick:function(t){var e=this.base.getExtensionByName("anchor"),i=this.activeAnchor;e&&i&&(t.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){i&&(e.showForm(i.attributes.href.value),i=null)}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.base.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(t){var i=e.getClosestTag(t.target,"a");if(i){if(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML))return!0;if(this.base.toolbar&&this.base.toolbar.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers(),this.anchorToPreview=i,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.base.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(t){t.relatedTarget&&/anchor-preview/.test(t.relatedTarget.className)||(this.hovering=!1)
},updatePreview:function(){if(this.hovering)return!0;var t=(new Date).getTime()-this.lastOver;t>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.base.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.base.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.base.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.base.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.base.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.base.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.base.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.base.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}})}();var m,g;g="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?\xab\xbb\u201c\u201d\u2018\u2019])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.(com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj| Ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw))",function(){m=o.extend({parent:!0,init:function(){this.disableEventHandling=!1,this.base.subscribe("editableKeypress",this.onKeypress.bind(this)),this.base.subscribe("editableBlur",this.onBlur.bind(this)),this.base.options.ownerDocument.execCommand("AutoUrlDetect",!1,!1)},onBlur:function(t,e){this.performLinking(e)},onKeypress:function(t){this.disableEventHandling||(t.keyCode===e.keyCode.SPACE||t.keyCode===e.keyCode.ENTER||t.which===e.keyCode.SPACE)&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var e=this.base.exportSelection();this.performLinking(t.target)&&this.base.importSelection(e,!0)}catch(i){window.console&&window.console.error("Failed to perform linking",i),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(t){var e=t.querySelectorAll("p"),i=!1;0===e.length&&(e=[t]);for(var n=0;n<e.length;n++)i=this.performLinkingWithinElement(e[n])||i;return i},splitStartNodeIfNeeded:function(t,e,i){return e!==i?t.splitText(e-i):null},splitEndNodeIfNeeded:function(t,e,i,n){var o,s;o=n+(e||t).nodeValue.length+(e?t.nodeValue.length:0)-1,s=(e||t).nodeValue.length-(o+1-i),o>=i&&n!==o&&0!==s&&(e||t).splitText(s)},performLinkingWithinElement:function(t){for(var e=this.findLinkableText(t),i=!1,n=0;n<e.length;n++)i=this.createLink(this.findOrCreateMatchingTextNodes(t,e[n]),e[n].href)||i;return i},findLinkableText:function(t){for(var e=new RegExp(g,"gi"),i=[" ","	","\n","\r","\xa0","\u2000","\u2001","\u2002","\u2003","\u2028","\u2029"],n=t.textContent,o=null,s=[];null!==(o=e.exec(n));){var r=o.index+o[0].length;0!==o.index&&-1===i.indexOf(n[o.index-1])||r!==n.length&&-1===i.indexOf(n[r])||s.push({href:o[0],start:o.index,end:r})}return s},findOrCreateMatchingTextNodes:function(t,e){for(var i=this.base.options.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),n=[],o=0,s=!1,r=null,a=null;null!==(r=i.nextNode())&&(!s&&e.start<o+r.nodeValue.length&&(s=!0,a=this.splitStartNodeIfNeeded(r,e.start,o)),s&&this.splitEndNodeIfNeeded(r,a,e.end,o),!s||o!==e.end);){if(s&&o>e.end+1)throw new Error("PerformLinking overshot the target!");s&&n.push(a||r),o+=r.nodeValue.length,null!==a&&(o+=a.nodeValue.length,i.nextNode()),a=null}return n},createLink:function(t,i){for(var n=!1,o=0;o<t.length&&n===!1;o++)n=!!e.traverseUp(t[o],function(t){return"a"===t.nodeName.toLowerCase()||t.getAttribute&&"true"===t.getAttribute("data-auto-link")});if(n)return!1;var s=document.createElement("a"),r=document.createElement("span");return e.moveTextRangeIntoElement(t[0],t[t.length-1],r),r.setAttribute("data-auto-link","true"),s.setAttribute("href",e.ensureUrlHasProtocol(i)),r.parentNode.insertBefore(s,r),s.appendChild(r),!0}})}();var v;!function(){v=o.extend({parent:!0,init:function(){this.base.subscribe("editableDrag",this.handleDrag.bind(this)),this.base.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(t){var e="medium-editor-dragover";t.preventDefault(),t.dataTransfer.dropEffect="copy","dragover"===t.type?t.target.classList.add(e):"dragleave"===t.type&&t.target.classList.remove(e)},handleDrop:function(t){var i,n="medium-editor-dragover";t.preventDefault(),t.stopPropagation(),t.dataTransfer.files&&(i=Array.prototype.slice.call(t.dataTransfer.files,0),i.some(function(t){if(t.type.match("image")){var i,n;i=new FileReader,i.readAsDataURL(t),n="medium-img-"+ +new Date,e.insertHTMLCommand(this.base.options.ownerDocument,'<img class="medium-image-loading" id="'+n+'" />'),i.onload=function(){var t=this.base.options.ownerDocument.getElementById(n);t&&(t.removeAttribute("id"),t.removeAttribute("class"),t.src=i.result)}.bind(this)}}.bind(this))),t.target.classList.remove(n)}})}();var y;!function(){y=d.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),!this.isDisplayed()){var e=this.base.options.ownerDocument.queryCommandValue("fontSize")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(t){var e=this.getInput();this.base.saveSelection(),this.base.hideToolbarDefaultActions(),this.getForm().style.display="block",this.base.setToolbarPosition(),e.value=t||"",e.focus()},deactivate:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var t=this.base.options.ownerDocument,e=t.createElement("div"),i=t.createElement("input"),n=t.createElement("a"),o=t.createElement("a");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-fontsize-"+this.base.id,this.base.on(e,"click",this.handleFormClick.bind(this)),i.setAttribute("type","range"),i.setAttribute("min","1"),i.setAttribute("max","7"),i.className="medium-editor-toolbar-input",e.appendChild(i),this.base.on(i,"change",this.handleSliderChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-check"></i>':"&#10003;",e.appendChild(o),this.base.on(o,"click",this.handleSaveClick.bind(this),!0),n.setAttribute("href","#"),n.className="medium-editor-toobar-close",n.innerHTML="fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-times"></i>':"&times;",e.appendChild(n),this.base.on(n,"click",this.handleCloseClick.bind(this)),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){s.getSelectedElements(this.base.options.ownerDocument).forEach(function(t){"FONT"===t.tagName&&t.hasAttribute("size")&&t.removeAttribute("size")})},handleSliderChange:function(){var t=this.getInput().value;"4"===t?this.clearFontSize():this.base.execAction("fontSize",{size:t})},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}})}();var b;!function(){function t(){return[[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|\u201c|\u201d)(((?!&quot;|&rdquo;|&ldquo;|"|\u201c|\u201d).)*)(?:&quot;|&rdquo;|&ldquo;|"|\u201c|\u201d)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""]]}b=o.extend({forcePlainText:!0,cleanPastedHTML:!1,cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],window:window,document:document,targetBlank:!1,disableReturn:!1,parent:!0,init:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.base.subscribe("editablePaste",this.handlePaste.bind(this))},handlePaste:function(t,i){var n,o,s,r,a="",l="text/html",c="text/plain";if(this.window.clipboardData&&void 0===t.clipboardData&&(t.clipboardData=this.window.clipboardData,l="Text",c="Text"),t.clipboardData&&t.clipboardData.getData&&!t.defaultPrevented){if(t.preventDefault(),s=t.clipboardData.getData(l),r=t.clipboardData.getData(c),this.cleanPastedHTML&&s)return this.cleanPaste(s);if(this.disableReturn||i.getAttribute("data-disable-return"))a=e.htmlEntities(r);else if(n=r.split(/[\r\n]+/g),n.length>1)for(o=0;o<n.length;o+=1)""!==n[o]&&(a+="<p>"+e.htmlEntities(n[o])+"</p>");else a=e.htmlEntities(n[0]);e.insertHTMLCommand(this.document,a)}},cleanPaste:function(i){var n,o,r,a=s.getSelectionElement(this.window),l=/<p|<br|<div/.test(i),c=t().concat(this.cleanReplacements||[]);for(n=0;n<c.length;n+=1)i=i.replace(c[n][0],c[n][1]);if(l){o=i.split("<br><br>"),this.pasteHTML("<p>"+o.join("</p><p>")+"</p>");try{this.document.execCommand("insertText",!1,"\n")}catch(h){}for(o=a.querySelectorAll("a,p,div,br"),n=0;n<o.length;n+=1)switch(r=o[n],r.innerHTML=r.innerHTML.replace(/\n/gi," "),r.tagName.toLowerCase()){case"a":this.targetBlank&&e.setTargetBlank(r);break;case"p":case"div":this.filterCommonBlocks(r);break;case"br":this.filterLineBreak(r)}}else this.pasteHTML(i)},pasteHTML:function(t,i){i=e.defaults({},i,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags});var n,o,s,r,a=this.document.createDocumentFragment();for(a.appendChild(this.document.createElement("body")),r=a.querySelector("body"),r.innerHTML=t,this.cleanupSpans(r),n=r.querySelectorAll("*"),s=0;s<n.length;s+=1)o=n[s],e.cleanupAttrs(o,i.cleanAttrs),e.cleanupTags(o,i.cleanTags);e.insertHTMLCommand(this.document,r.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(t){return t&&("p"===t.tagName.toLowerCase()||"div"===t.tagName.toLowerCase())},filterCommonBlocks:function(t){/^\s*$/.test(t.textContent)&&t.parentNode&&t.parentNode.removeChild(t)},filterLineBreak:function(t){this.isCommonBlock(t.previousElementSibling)?this.removeWithParent(t):!this.isCommonBlock(t.parentNode)||t.parentNode.firstChild!==t&&t.parentNode.lastChild!==t?t.parentNode&&1===t.parentNode.childElementCount&&""===t.parentNode.textContent&&this.removeWithParent(t):this.removeWithParent(t)},removeWithParent:function(t){t&&t.parentNode&&(t.parentNode.parentNode&&1===t.parentNode.childElementCount?t.parentNode.parentNode.removeChild(t.parentNode):t.parentNode.removeChild(t))},cleanupSpans:function(t){var i,n,o,s=t.querySelectorAll(".replace-with"),r=function(t){return t&&"#text"!==t.nodeName&&"false"===t.getAttribute("contenteditable")};for(i=0;i<s.length;i+=1)n=s[i],o=this.document.createElement(n.classList.contains("bold")?"b":"i"),o.innerHTML=n.classList.contains("bold")&&n.classList.contains("italic")?"<i>"+n.innerHTML+"</i>":n.innerHTML,n.parentNode.replaceChild(o,n);for(s=t.querySelectorAll("span"),i=0;i<s.length;i+=1){if(n=s[i],e.traverseUp(n,r))return!1;e.unwrap(n,this.document)}}})}();var w;!function(){w=o.extend({name:"placeholder",parent:!0,text:"Type your text",init:function(){this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.base.elements.forEach(function(t){t.getAttribute("data-placeholder")||t.setAttribute("data-placeholder",this.text),this.updatePlaceholder(t)},this)},showPlaceholder:function(t){t&&t.classList.add("medium-editor-placeholder")},hidePlaceholder:function(t){t&&t.classList.remove("medium-editor-placeholder")},updatePlaceholder:function(t){t.querySelector("img, blockquote, ul, ol")||""!==t.textContent.replace(/^\s+|\s+$/g,"")?this.hidePlaceholder(t):this.showPlaceholder(t)},attachEventHandlers:function(){this.base.subscribe("blur",this.handleExternalInteraction.bind(this)),this.base.subscribe("editableBlur",this.handleBlur.bind(this)),this.base.subscribe("editableClick",this.handleHidePlaceholderEvent.bind(this)),this.base.subscribe("editableKeypress",this.handleHidePlaceholderEvent.bind(this)),this.base.subscribe("editablePaste",this.handleHidePlaceholderEvent.bind(this))},handleHidePlaceholderEvent:function(t,e){this.hidePlaceholder(e)},handleBlur:function(t,e){this.updatePlaceholder(e)},handleExternalInteraction:function(){this.initPlaceholders()}})}();var _;!function(){_=function(t){this.base=t,this.options=t.options,this.initThrottledMethods()},_.prototype={createToolbar:function(){var t=this.base.options.ownerDocument.createElement("div");return t.id="medium-editor-toolbar-"+this.base.id,t.className="medium-editor-toolbar",t.className+=this.options.staticToolbar?" static-toolbar":" stalker-toolbar",t.appendChild(this.createToolbarButtons()),this.base.commands.forEach(function(e){e.hasForm&&t.appendChild(e.getForm())}),this.attachEventHandlers(),t},createToolbarButtons:function(){var t,i,n,o,s=this.base.options.ownerDocument.createElement("ul");return s.id="medium-editor-toolbar-actions"+this.base.id,s.className="medium-editor-toolbar-actions clearfix",s.style.display="block",this.base.options.buttons.forEach(function(n){o=this.base.getExtensionByName(n),"function"==typeof o.getButton&&(i=o.getButton(this.base),t=this.base.options.ownerDocument.createElement("li"),e.isElement(i)?t.appendChild(i):t.innerHTML=i,s.appendChild(t))}.bind(this)),n=s.querySelectorAll("button"),n.length>0&&(n[0].classList.add(this.options.firstButtonClass),n[n.length-1].classList.add(this.options.lastButtonClass)),s},deactivate:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=e.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.base.subscribe("blur",this.handleBlur.bind(this)),this.base.subscribe("focus",this.handleFocus.bind(this)),this.base.subscribe("editableClick",this.handleEditableClick.bind(this)),this.base.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.base.on(this.options.ownerDocument.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.options.staticToolbar&&this.options.stickyToolbar&&this.base.on(this.options.contentWindow,"scroll",this.handleWindowScroll.bind(this),!0),this.base.on(this.options.contentWindow,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(t){return t&&t.target&&e.isDescendant(this.getToolbarElement(),t.target)?!1:void this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),"function"==typeof this.options.onShowToolbar&&this.options.onShowToolbar())},hideToolbar:function(){this.isDisplayed()&&(this.base.commands.forEach(function(t){"function"==typeof t.onHide&&t.onHide()}),this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),"function"==typeof this.options.onHideToolbar&&this.options.onHideToolbar())},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.base.commands.forEach(function(t){t.hasForm&&t.isDisplayed()&&t.hideForm()})},multipleBlockElementsSelected:function(){var t=s.getSelectionHtml.call(this).replace(/<[\S]+><\/[\S]+>/gim,""),e=t.match(/<(p|h[1-6]|blockquote)[^>]*>/g);return!!e&&e.length>1},modifySelection:function(){var t=this.options.contentWindow.getSelection(),i=t.getRangeAt(0);if(this.options.standardizeSelectionStart&&i.startContainer.nodeValue&&i.startOffset===i.startContainer.nodeValue.length){var n=e.findAdjacentTextNodeWithContent(s.getSelectionElement(this.options.contentWindow),i.startContainer,this.options.ownerDocument);if(n){for(var o=0;0===n.nodeValue.substr(o,1).trim().length;)o+=1;var r=this.options.ownerDocument.createRange();r.setStart(n,o),r.setEnd(i.endContainer,i.endOffset),t.removeAllRanges(),t.addRange(r),i=r}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.getFocusedElement()||s.selectionInContentEditableFalse(this.options.contentWindow))return void this.hideToolbar();var t=s.getSelectionElement(this.options.contentWindow);if(!t||-1===this.base.elements.indexOf(t)||t.getAttribute("data-disable-toolbar"))return void this.hideToolbar();if(this.options.updateOnEmptySelection&&this.options.staticToolbar)return void this.showAndUpdateToolbar();""===this.options.contentWindow.getSelection().toString().trim()||this.options.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected()?this.hideToolbar():this.showAndUpdateToolbar()}},getFocusedElement:function(){for(var t=0;t<this.base.elements.length;t+=1)if(this.base.elements[t].getAttribute("data-medium-focused"))return this.base.elements[t];return null},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.base.commands.forEach(function(t){"function"==typeof t.isActive&&"function"==typeof t.setInactive&&t.setInactive()}.bind(this)),this.checkActiveButtons()},checkActiveButtons:function(){var t,i=[],n=null,o=e.getSelectionRange(this.options.ownerDocument),r=function(e){"function"==typeof e.checkState?e.checkState(t):"function"==typeof e.isActive&&"function"==typeof e.isAlreadyApplied&&"function"==typeof e.setActive&&!e.isActive()&&e.isAlreadyApplied(t)&&e.setActive()};if(o)for(t=s.getSelectedParentElement(o),this.base.commands.forEach(function(t){return"function"==typeof t.queryCommandState&&(n=t.queryCommandState(),null!==n)?void(n&&"function"==typeof t.setActive&&t.setActive()):void i.push(t)});void 0!==t.tagName&&-1===e.parentElements.indexOf(t.tagName.toLowerCase)&&(i.forEach(r),-1===this.base.elements.indexOf(t));)t=t.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var t,e=this.getFocusedElement(),i=this.options.contentWindow.getSelection();return e?(this.options.staticToolbar?(this.showToolbar(),this.positionStaticToolbar(e)):i.isCollapsed||(this.showToolbar(),this.positionToolbar(i)),t=this.base.getExtensionByName("anchor-preview"),void(t&&"function"==typeof t.hidePreview&&t.hidePreview())):this},positionStaticToolbar:function(t){this.getToolbarElement().style.left="0";var e,i=this.options.ownerDocument.documentElement&&this.options.ownerDocument.documentElement.scrollTop||this.options.ownerDocument.body.scrollTop,n=this.options.contentWindow.innerWidth,o=this.getToolbarElement(),s=t.getBoundingClientRect(),r=s.top+i,a=s.left+s.width/2,l=o.offsetHeight,c=o.offsetWidth,h=c/2;this.options.stickyToolbar?i>r+t.offsetHeight-l?(o.style.top=r+t.offsetHeight-l+"px",o.classList.remove("sticky-toolbar")):i>r-l?(o.classList.add("sticky-toolbar"),o.style.top="0px"):(o.classList.remove("sticky-toolbar"),o.style.top=r-l+"px"):o.style.top=r-l+"px","left"===this.options.toolbarAlign?e=s.left:"center"===this.options.toolbarAlign?e=a-h:"right"===this.options.toolbarAlign&&(e=s.right-c),0>e?e=0:e+c>n&&(e=n-Math.ceil(c)-1),o.style.left=e+"px"},positionToolbar:function(t){this.getToolbarElement().style.left="0";var e=this.options.contentWindow.innerWidth,i=t.getRangeAt(0),n=i.getBoundingClientRect(),o=(n.left+n.right)/2,s=this.getToolbarElement(),r=s.offsetHeight,a=s.offsetWidth,l=a/2,c=50,h=this.options.diffLeft-l;n.top<c?(s.classList.add("medium-toolbar-arrow-over"),s.classList.remove("medium-toolbar-arrow-under"),s.style.top=c+n.bottom-this.options.diffTop+this.options.contentWindow.pageYOffset-r+"px"):(s.classList.add("medium-toolbar-arrow-under"),s.classList.remove("medium-toolbar-arrow-over"),s.style.top=n.top+this.options.diffTop+this.options.contentWindow.pageYOffset-r+"px"),s.style.left=l>o?h+l+"px":l>e-o?e+h-l+"px":h+o+"px"}}}();var x;return function(){x={button:u,form:d,anchor:p,anchorPreview:f,autoLink:m,fontSize:y,imageDragging:v,paste:b,placeholder:w}}(),function(){function d(t,i){if(this.options.disableReturn||i.getAttribute("data-disable-return"))t.preventDefault();else if(this.options.disableDoubleReturn||i.getAttribute("data-disable-double-return")){var n=e.getSelectionStart(this.options.ownerDocument);(n&&""===n.textContent.trim()||n.previousElementSibling&&""===n.previousElementSibling.textContent.trim())&&t.preventDefault()}}function p(t){var i=e.getSelectionStart(this.options.ownerDocument),n=i&&i.tagName.toLowerCase();"pre"===n&&(t.preventDefault(),e.insertHTMLCommand(this.options.ownerDocument,"    ")),e.isListItem(i)&&(t.preventDefault(),t.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function f(t){var i,n=e.getSelectionStart(this.options.ownerDocument),o=n.tagName.toLowerCase(),r=/^(\s+|<br\/?>)?$/i,a=/h\d/i;(t.which===e.keyCode.BACKSPACE||t.which===e.keyCode.ENTER)&&n.previousElementSibling&&a.test(o)&&0===s.getCaretOffsets(n).left?t.which===e.keyCode.BACKSPACE&&r.test(n.previousElementSibling.innerHTML)?(n.previousElementSibling.parentNode.removeChild(n.previousElementSibling),t.preventDefault()):t.which===e.keyCode.ENTER&&(i=this.options.ownerDocument.createElement("p"),i.innerHTML="<br>",n.previousElementSibling.parentNode.insertBefore(i,n),t.preventDefault()):t.which===e.keyCode.DELETE&&n.nextElementSibling&&n.previousElementSibling&&!a.test(o)&&r.test(n.innerHTML)&&a.test(n.nextElementSibling.tagName)?(s.moveCursor(this.options.ownerDocument,n.nextElementSibling),n.previousElementSibling.parentNode.removeChild(n),t.preventDefault()):t.which===e.keyCode.BACKSPACE&&"li"===o&&r.test(n.innerHTML)&&!n.previousElementSibling&&!n.parentElement.previousElementSibling&&n.nextElementSibling&&"li"===n.nextElementSibling.tagName.toLowerCase()&&(i=this.options.ownerDocument.createElement("p"),i.innerHTML="<br>",n.parentElement.parentElement.insertBefore(i,n.parentElement),s.moveCursor(this.options.ownerDocument,i),n.parentElement.removeChild(n),t.preventDefault())}function g(t){var i,n=e.getSelectionStart(this.options.ownerDocument);n&&(n.getAttribute("data-medium-element")&&0===n.children.length&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),t.which!==e.keyCode.ENTER||e.isListItem(n)||(i=n.tagName.toLowerCase(),"a"===i?this.options.ownerDocument.execCommand("unlink",!1,null):t.shiftKey||/h\d/.test(i)||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function b(t){t||(t=[]),"string"==typeof t&&(t=this.options.ownerDocument.querySelectorAll(t)),e.isElement(t)&&(t=[t]);var i=Array.prototype.slice.apply(t);this.elements=[],i.forEach(function(t){this.elements.push("textarea"===t.tagName.toLowerCase()?E.call(this,t):t)},this)}function w(t,e,i){return t.parent&&(t.base=i),"function"==typeof t.init&&t.init(i),t.name||(t.name=e),t}function k(){var t,e=!1;if(this.options.disableAnchorPreview)return!1;if(this.options.anchorPreview===!1)return!1;if(this.options.extensions["anchor-preview"])return!1;if(this.options.disableToolbar)return!1;for(t=0;t<this.elements.length;t+=1)if(!this.elements[t].getAttribute("data-disable-toolbar")){e=!0;break}return e}function C(){return this.options.extensions.placeholder?!1:this.options.disablePlaceholders?!1:this.options.placeholder!==!1}function S(){return this.options.extensions["auto-link"]?!1:this.options.autoLink!==!1}function T(){return this.options.extensions["image-dragging"]?!1:this.options.imageDragging!==!1}function E(t){var e=this.options.ownerDocument.createElement("div"),i=+new Date,n=["data-disable-editing","data-disable-toolbar","data-placeholder","data-disable-return","data-disable-double-return","data-disable-preview","spellcheck"];return e.className=t.className,e.id=i,e.innerHTML=t.value,e.setAttribute("medium-editor-textarea-id",i),n.forEach(function(i){t.hasAttribute(i)&&e.setAttribute(i,t.getAttribute(i))}),t.classList.add("medium-editor-hidden"),t.setAttribute("medium-editor-textarea-id",i),t.parentNode.insertBefore(e,t),e}function $(){this.elements.forEach(function(t,e){this.options.disableEditing||t.getAttribute("data-disable-editing")||(t.setAttribute("contentEditable",!0),t.setAttribute("spellcheck",this.options.spellcheck)),t.setAttribute("data-medium-element",!0),t.setAttribute("role","textbox"),t.setAttribute("aria-multiline",!0),t.setAttribute("medium-editor-index",e),t.hasAttribute("medium-editor-textarea-id")&&this.on(t,"input",function(t){var e=t.target,i=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');i&&(i.value=this.serialize()[e.id].value)}.bind(this))},this)}function A(){if(this.toolbar||this.options.disableToolbar)return!1;var t=this.elements.some(function(t){return!t.getAttribute("data-disable-toolbar")});t&&(this.toolbar=new _(this),this.options.elementsContainer.appendChild(this.toolbar.getToolbarElement()))}function I(){var t;if(this.subscribe("editableKeydownTab",p.bind(this)),this.subscribe("editableKeydownDelete",f.bind(this)),this.subscribe("editableKeydownEnter",f.bind(this)),this.options.disableReturn||this.options.disableDoubleReturn)this.subscribe("editableKeydownEnter",d.bind(this));else for(t=0;t<this.elements.length;t+=1)if(this.elements[t].getAttribute("data-disable-return")||this.elements[t].getAttribute("data-disable-double-return")){this.subscribe("editableKeydownEnter",d.bind(this));break}this.options.disableReturn||this.elements.forEach(function(t){t.getAttribute("data-disable-return")||this.on(t,"keyup",g.bind(this))},this)}function P(i){var n={text:"string"==typeof this.options.placeholder?this.options.placeholder:void 0,window:this.options.contentWindow,document:this.options.ownerDocument};return new t.extensions.placeholder(e.extend({},i,n))}function L(i){var n={hideDelay:this.options.anchorPreviewHideDelay,window:this.options.contentWindow,document:this.options.ownerDocument,diffLeft:this.options.diffLeft,diffTop:this.options.diffTop,elementsContainer:this.options.elementsContainer};return new t.extensions.anchorPreview(e.extend({},i,n))}function D(i){var n={customClassOption:this.options.anchorButton?this.options.anchorButtonClass||"btn":void 0,linkValidation:this.options.checkLinkFormat,placeholderText:this.options.anchorInputPlaceholder,targetCheckbox:this.options.anchorTarget,targetCheckboxText:this.options.anchorInputCheckboxLabel,window:this.options.contentWindow,document:this.options.ownerDocument};return new t.extensions.anchor(e.extend({},i,n))}function j(i){var n={forcePlainText:this.options.forcePlainText,cleanPastedHTML:this.options.cleanPastedHTML,disableReturn:this.options.disableReturn,targetBlank:this.options.targetBlank,window:this.options.contentWindow,document:this.options.ownerDocument};return new t.extensions.paste(e.extend({},i,n))}function M(){var t,e,n=this.options.buttons,o=this.options.extensions;this.commands=[],n.forEach(function(e){o[e]?(t=w(o[e],e,this),this.commands.push(t)):"anchor"===e?(t=w(D.call(this,this.options.anchor),"anchor",this),this.commands.push(t)):"fontsize"===e?(t=w(new y,e,this),this.commands.push(t)):i.hasOwnProperty(e)&&(t=w(new u(i[e]),e,this),this.commands.push(t))},this);for(e in o)o.hasOwnProperty(e)&&-1===n.indexOf(e)&&(t=w(o[e],e,this),this.commands.push(t));if(this.options.extensions.paste||this.commands.push(w(j.call(this,this.options.paste),"paste",this)),k.call(this)&&this.commands.push(w(L.call(this,this.options.anchorPreview),"anchor-preview",this)),S.call(this)&&this.commands.push(w(new m,"auto-link",this)),T.call(this)&&this.commands.push(w(new v,"image-dragging",this)),C.call(this)){var s="string"==typeof this.options.placeholder?{}:this.options.placeholder;this.commands.push(w(P.call(this,s),"placeholder",this))}}function N(t,i){var n=[["forcePlainText","paste.forcePlainText"],["cleanPastedHTML","paste.cleanPastedHTML"],["anchorInputPlaceholder","anchor.placeholderText"],["checkLinkFormat","anchor.linkValidation"],["anchorButton","anchor.customClassOption"],["anchorButtonClass","anchor.customClassOption"],["anchorTarget","anchor.targetCheckbox"],["anchorInputCheckboxLabel","anchor.targetCheckboxText"],["anchorPreviewHideDelay","anchorPreview.hideDelay"],["disableAnchorPreview","anchorPreview: false"],["disablePlaceholders","placeholder: false"]];return i&&(n.forEach(function(t){i.hasOwnProperty(t[0])&&void 0!==i[t[0]]&&e.deprecated(t[0],t[1],"v5.0.0")}),i.hasOwnProperty("placeholder")&&"string"==typeof i.placeholder&&e.deprecated("placeholder","placeholder.text","v5.0.0")),e.defaults({},i,t)}function O(t,i){var n,o=/^append-(.+)$/gi;return n=o.exec(t),n?e.execFormatBlock(this.options.ownerDocument,n[1]):"fontSize"===t?this.options.ownerDocument.execCommand("fontSize",!1,i.size):"createLink"===t?this.createLink(i):"image"===t?this.options.ownerDocument.execCommand("insertImage",!1,this.options.contentWindow.getSelection()):this.options.ownerDocument.execCommand(t,!1,null)}t.statics={ButtonsData:i,DefaultButton:a,AnchorExtension:l,FontSizeExtension:h,Toolbar:_,AnchorPreview:c},t.Extension=o,t.extensions=x,t.util=e,t.selection=s,t.prototype={defaults:n,init:function(t,e){var i=1;if(this.options=N.call(this,this.defaults,e),b.call(this,t),0!==this.elements.length){for(this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body);this.options.elementsContainer.querySelector("#medium-editor-toolbar-"+i);)i+=1;return this.id=i,this.setup()}},setup:function(){this.isActive||(this.events=new r(this),this.isActive=!0,$.call(this),M.call(this),A.call(this),I.call(this))},destroy:function(){this.isActive&&(this.isActive=!1,void 0!==this.toolbar&&(this.toolbar.deactivate(),delete this.toolbar),this.elements.forEach(function(t){if(t.removeAttribute("contentEditable"),t.removeAttribute("spellcheck"),t.removeAttribute("data-medium-element"),t.hasAttribute("medium-editor-textarea-id")){var e=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');
e&&e.classList.remove("medium-editor-hidden"),t.parentNode&&t.parentNode.removeChild(t)}},this),this.elements=[],this.commands.forEach(function(t){"function"==typeof t.deactivate&&t.deactivate()},this),this.events.destroy())},on:function(t,e,i,n){this.events.attachDOMEvent(t,e,i,n)},off:function(t,e,i,n){this.events.detachDOMEvent(t,e,i,n)},subscribe:function(t,e){this.events.attachCustomEvent(t,e)},unsubscribe:function(t,e){this.events.detachCustomEvent(t,e)},delay:function(t){var e=this;return setTimeout(function(){e.isActive&&t()},this.options.delay)},serialize:function(){var t,e,i={};for(t=0;t<this.elements.length;t+=1)e=""!==this.elements[t].id?this.elements[t].id:"element-"+t,i[e]={value:this.elements[t].innerHTML.trim()};return i},getExtensionByName:function(t){var e;return this.commands&&this.commands.length&&this.commands.some(function(i){return i.name===t?(e=i,!0):!1}),e},callExtensions:function(t){if(!(arguments.length<1)){var e,i,n=Array.prototype.slice.call(arguments,1);for(i in this.options.extensions)this.options.extensions.hasOwnProperty(i)&&(e=this.options.extensions[i],void 0!==e[t]&&e[t].apply(e,n));return this}},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){return this.toolbar&&this.toolbar.checkState(),this},queryCommandState:function(t){var e,i=/^full-(.+)$/gi,n=null;e=i.exec(t),e&&(t=e[1]);try{n=this.options.ownerDocument.queryCommandState(t)}catch(o){n=null}return n},execAction:function(t,i){var n,o,s=/^full-(.+)$/gi;return n=s.exec(t),n?(this.saveSelection(),this.selectAllContents(),o=O.call(this,n[1],i),this.restoreSelection()):o=O.call(this,t,i),("insertunorderedlist"===t||"insertorderedlist"===t)&&e.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),o},getSelectedParentElement:function(t){return void 0===t&&(t=this.options.contentWindow.getSelection().getRangeAt(0)),s.getSelectedParentElement(t)},hideToolbarDefaultActions:function(){return this.toolbar&&this.toolbar.hideToolbarDefaultActions(),this},setToolbarPosition:function(){this.toolbar&&this.toolbar.setToolbarPosition()},selectAllContents:function(){var t=s.getSelectionElement(this.options.contentWindow);if(t){for(;1===t.children.length;)t=t.children[0];this.selectElement(t)}},selectElement:function(t){s.selectNode(t,this.options.ownerDocument);var e=s.getSelectionElement(this.options.contentWindow);e&&this.events.focusElement(e)},getFocusedElement:function(){var t;return this.elements.some(function(e){return!t&&e.getAttribute("data-medium-focused")&&(t=e),!!t},this),t},exportSelection:function(){var t,i,n,o=null,s=this.options.contentWindow.getSelection(),r=-1;return s.rangeCount>0&&(t=s.getRangeAt(0),i=t.cloneRange(),this.elements.some(function(i,n){return i===t.startContainer||e.isDescendant(i,t.startContainer)?(r=n,!0):!1}),r>-1&&(i.selectNodeContents(this.elements[r]),i.setEnd(t.startContainer,t.startOffset),n=i.toString().length,o={start:n,end:n+t.toString().length,editableElementIndex:r})),null!==o&&0===o.editableElementIndex&&delete o.editableElementIndex,o},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(t,e){if(t){var i,n,o,r,a=void 0===t.editableElementIndex?0:t.editableElementIndex,l={editableElementIndex:a,start:t.start,end:t.end},c=this.elements[l.editableElementIndex],h=0,u=this.options.ownerDocument.createRange(),d=[c],p=!1,f=!1;for(u.setStart(c,0),u.collapse(!0),i=d.pop();!f&&i;){if(3===i.nodeType)r=h+i.length,!p&&l.start>=h&&l.start<=r&&(u.setStart(i,l.start-h),p=!0),p&&l.end>=h&&l.end<=r&&(u.setEnd(i,l.end-h),f=!0),h=r;else for(n=i.childNodes.length-1;n>=0;)d.push(i.childNodes[n]),n-=1;f||(i=d.pop())}e&&(u=s.importSelectionMoveCursorPastAnchor(l,u)),o=this.options.contentWindow.getSelection(),o.removeAllRanges(),o.addRange(u)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(t){var i,n;if(t.url&&t.url.trim().length>0&&(this.options.ownerDocument.execCommand("createLink",!1,t.url),(this.options.targetBlank||"_blank"===t.target)&&e.setTargetBlank(e.getSelectionStart(this.options.ownerDocument),t.url),t.buttonClass&&e.addClassToAnchors(e.getSelectionStart(this.options.ownerDocument),t.buttonClass)),this.options.targetBlank||"_blank"===t.target||t.buttonClass)for(i=this.options.ownerDocument.createEvent("HTMLEvents"),i.initEvent("input",!0,!0,this.options.contentWindow),n=0;n<this.elements.length;n+=1)this.elements[n].dispatchEvent(i)},activate:function(){e.deprecatedMethod.call(this,"activate","setup",arguments,"v5.0.0")},deactivate:function(){e.deprecatedMethod.call(this,"deactivate","destroy",arguments,"v5.0.0")},cleanPaste:function(t){this.getExtensionByName("paste").cleanPaste(t)},pasteHTML:function(t,e){this.getExtensionByName("paste").pasteHTML(t,e)}}}(),t.version=function(t,e,i){return{major:parseInt(t,10),minor:parseInt(e,10),revision:parseInt(i,10),toString:function(){return[t,e,i].join(".")}}}.apply(this,{version:"4.10.2"}.version.split(".")),t}()),window.Somewhere=window.Somewhere||{},$(function(){$(document).foundation()}),_.templateSettings={evaluate:/\{\[([\s\S]+?)\]\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g},window.spinnerOpts={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#fff",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},window.sparkSpinnerOpts={lines:13,length:5,width:2,radius:6,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"150%"},$.fn.checkbox=function(t){return this.each(function(){var e={onToggle:function(){}},i=$.extend({},e,t);$(this).click(function(){var t=$(this),e=$('input[type="checkbox"]',t);return t.toggleClass("checked"),e.attr("checked",t.hasClass("checked")),i.onToggle.call(this),!1})})};var hasUploadSupport=function(){return window.FormData&&window.File&&window.FileList?!0:!1};$(function(){Somewhere.Modules&&$.each(Somewhere.Modules,function(t,e){"Module"!==t&&$.plugin(t.charAt(0).toLowerCase()+t.substring(1),e)});var t=$("#home-overlay");t.length&&t.overlay().data("overlay").open();var e=$(".flash-message");e.length&&($(".app-header").length&&e.addClass("below-header"),e.click(function(){e.fadeOut(300,function(){$(this).remove()})}),setTimeout(function(){e=$(".flash-message"),$(".app-header").length&&e.addClass("below-header"),e.length&&e.fadeOut(300,function(){$(this).remove()})},2e3)),$("html").addClass(hasUploadSupport()?"upload":"no-upload");var i=function(t,e){this.$spark=t,this.$group=e,this.init()};i.prototype={init:function(){this.$spark.data("spark",this),_.bindAll(this,"open","close","queueClose")},open:function(){var t=this.$spark.find(".spark-comments");t.length&&(this.$spark.addClass("on"),t.stop().slideDown(300,"easeInExpo",function(){}))},close:function(){},queueClose:function(){var t=this,e=this.$spark.find(".spark-comments");e.length&&!this.$spark.data("focused")&&(this.$spark.removeClass("on"),e.delay(50).stop().slideUp(300,"easeOutExpo",function(){t.close()}))}};var n=$(".spark-group");n.each(function(){var t=$(this);t.imagesLoaded(function(){});var e=t.find('[data-behave="comment-toggle"]');e.length&&t.find(".spark-comments").length&&e.click(function(e){e.preventDefault();var n=$(this).closest(".spark"),o=n.data("spark")||new i(n,t);n.hasClass("on")?o.queueClose():o.open()})}),$('[data-behave="info-overlay"]').each(function(){var t=($(this),$($(this).attr("href")).html());$(this).click(function(e){e.preventDefault();var i=HandlebarsTemplates.info_overlay({content:t}),n=$(i);$("body").append(n),n.overlay(),n.data("overlay").open()})}),$("input[readonly]").click(function(){this.select()}),$(".header-action, .roundel, .minitip-wrapper").hoverIntent({timeout:200,over:function(){$(this).addClass("hover")},out:function(){$(this).removeClass("hover")}}),$(".minitip").hoverIntent({timeout:200,over:function(){},out:function(){var t=$(this).parent(".header-action");t.length||(t=$(this).parent(".minitip-wrapper")),t.length||(t=$(this).parent("a")),t.removeClass("hover")}}),$("a[data-service]").click(function(t){t.preventDefault();var e=new Somewhere.Modules.EmbedOverlay({service:$(this).data("service"),params:{url:$(this).attr("href")}});e.$elem.trigger("open")}),$(window).load(function(){}),$(".berlin-check").each(function(){var t=$(this).closest(".berlin-check-wrapper").find(".location-text-input"),e=$(".checkbox",this),i=$('input[type="checkbox"]',e);e.checkbox({onToggle:function(){return t.length?void($(this).hasClass("checked")?t.val($(this).data("check-text")):t.val("").focus()):!1}}),t.length&&e.data("check-text")&&t.keyup(function(){$(this).val()===e.data("check-text")?(e.addClass("checked"),i.attr("checked",!0)):(e.removeClass("checked"),i.attr("checked",!1))})}),$.fn.toggleAJAXButton=function(t){t=$.extend({onSuccess:null,onError:null,onBefore:null,activeClass:"active"},t);var e=function(e){var i=e.data("original_href");e.attr("href",e.data("inverse_href")).data("original_href",e.data("inverse_href")).data("inverse_href",i).toggleClass(t.activeClass)};return this.each(function(){var i=$(this);if(!i.data("remote"))throw new Error("This element requires a Rails data-remote attribute.");i.data("original-href",i.attr("href")),i.on("ajax:beforeSend",function(){e(i),"function"==typeof t.onBefore&&t.onBefore.call(this)}).on("ajax:complete",function(n,o,s){"error"===s?(e(i),"function"==typeof t.onError&&t.onError.call(this)):"function"==typeof t.onSuccess&&t.onSuccess.call(this,JSON.parse(o.responseText))})})},$(".headline .roundel[data-remote]").toggleAJAXButton(),$(".js-spark-toggle").toggleAJAXButton({onBefore:function(){$(this).closest(".spark").toggleClass("active",$(this).hasClass("active"))},onError:function(){$(this).closest(".spark").toggleClass("active",$(this).hasClass("active"))}}),$("#load-more-trigger").click(function(t){t.preventDefault(),$("html,body").animate({scrollTop:0},{duration:$(this).data("speed")||500}),window.location.reload()}),$(".spark-item").each(function(){$(this).imagesLoaded(function(){var t=$(this).find(".media"),e=t.children(".inner");e.width()==t.width()&&e.height()>parseInt(t.css("minHeight"),null)&&t.addClass("full")})}),$(".feature-form").each(function(){var t=$(".field input.text").first();t.closest("fieldset").filter(":first-child").length&&t.focus()});var o=$(".text-count-area");o.length&&o.charCount(),$('[data-behave="tooltip"]').each(function(){var t=$(this),e=t.attr("href"),i=$(e),n=function(){$(document).off("click.blanket"),i.fadeOut(200)},o=function(){$(document).on("click.blanket",n),i.fadeIn(200)};t.click(function(t){t.preventDefault(),i.is(":hidden")?(t.stopPropagation(),o()):n()})});var s=$(".full-screen-area"),r=$(".main-footer");if(s.length){var a=s.height();$(window).bind("reflow",function(){var t=$(window).height(),e=0;r.length&&(e=r.outerHeight(!0)+60),t>a+e?s.css("minHeight",t-e):s.css("minHeight","")}),$(this).trigger("reflow"),$(window).resize(function(){$(this).trigger("reflow")})}$(".add-image").click(function(){$(this).next('input[type="file"][data-behaviour="image-handler"]').trigger("click")}),$('[data-behaviour="image-handler"]').each(function(){$(this).on("change",function(t){var e=$(t.currentTarget),i=t.currentTarget.files,n=e.prev("label");n.length||(n=e.parent("label")),"undefined"!=typeof i&&i.length?n.addClass("populated").find("span.text").html(i[0].name):"undefined"==typeof i&&e.val()?n.addClass("populated").find("span.text").html("Image added"):n.removeClass("populated").find("span.text").html("+ Add an image")})}),$('[data-behaviour="image-upload-zone"]').each(function(){var t=$(this),e=t.find('input[type="file"]');e.on("change",function(i){i.stopPropagation(),e.val()?t.addClass("ready"):t.removeClass("ready")})});var l=$(".place-change-avatar");l.length&&$(this).find('input[type="file"]').on("change",function(t){var e=$(t.currentTarget),i=t.currentTarget.files,n=l.next("small"),o=n.find(".filename");"undefined"!=typeof i&&i.length?(n.addClass("populated"),o.html(i[0].name)):"undefined"==typeof i&&e.val()?(n.addClass("populated"),o.html("Your image")):n.addClass("populated")}),function(){var t=$(".profile-menu");if(t.length){t.blanketToggle({trigger:"#profile-menu-trigger"});var e=t.find("> ul"),i=e.find("> li:first-child");-1!==!navigator.appVersion.indexOf("MSIE")&&i.hover(function(){e.addClass("top-hover")},function(){e.removeClass("top-hover")})}}(),function(){var t=$(".profile-menu-people");if(t.length){t.blanketToggle({trigger:"#profile-menu-people-trigger"});var e=t.find("> ul"),i=e.find("> li:first-child");-1!==!navigator.appVersion.indexOf("MSIE")&&i.hover(function(){e.addClass("top-hover")},function(){e.removeClass("top-hover")})}}(),function(){var t=$(".profile-menu-companies");if(t.length){t.blanketToggle({trigger:"#profile-menu-companies-trigger"});var e=t.find("> ul"),i=e.find("> li:first-child");-1!==!navigator.appVersion.indexOf("MSIE")&&i.hover(function(){e.addClass("top-hover")},function(){e.removeClass("top-hover")})}}(),function(){var t=$(".profile-menu-sparks");if(t.length){t.blanketToggle({trigger:"#profile-menu-sparks-trigger"});var e=t.find("> ul"),i=e.find("> li:first-child");-1!==navigator.appVersion.indexOf("MSIE")&&i.hover(function(){e.addClass("top-hover")},function(){e.removeClass("top-hover")})}}(),function(){var t=$(".profile-menu-qa");if(t.length){t.blanketToggle({trigger:"#profile-menu-qa-trigger"});var e=t.find("> ul"),i=e.find("> li:first-child");-1!==navigator.appVersion.indexOf("MSIE")&&i.hover(function(){e.addClass("top-hover")},function(){e.removeClass("top-hover")})}}(),function(){var t=$(".article-hero .cta.primary");t.length&&$(window).load(function(){setTimeout(function(){t.addClass("hover"),setTimeout(function(){t.removeClass("hover")},500)},500)})}(),$(".field-prefix").click(function(){var t=$(this).next(".text");t.length&&t.focus()}),$(".error-msg").each(function(){$(this).closest(".field").find(".text").addClass("error")});var c=function(){var t=$(this).closest(".field").find(".error-msg");t.length&&(t.fadeOut(300),$(this).removeClass("error"))};$(".field .text").keyup(c).blur(c),$(".tag-filter").tagFilter(),$('[data-behave="click-scroll"]').click(function(t){var e=$($(this).attr("href"));e.length&&(t.preventDefault(),$("html,body").animate({scrollTop:$($(this).attr("href")).offset().top},{duration:$(this).data("speed")||500}))}),$('form:not([data-remote="true"])').submit(function(){if($(this).find('input[type="file"]').length){var t=$('<div id="loading-state"></div>').appendTo("body"),e=_.clone(spinnerOpts);e.color="#000";{new Spinner(e).spin(t[0])}setTimeout(function(){var t=$('<div class="flash-message" id="form-flash-message">It\'s taking a while! Hold on...</div>');$(".app-header").length&&t.addClass("below-header"),t.appendTo("body"),t.click(function(){t.fadeOut(300,function(){$(this).remove()})})},15e3)}}),$(".js-tiles").each(function(){var t=$(this);t.imagesLoaded(function(){})}),$(".js-tabbed").each(function(){var t=$(this),e=t.find(".js-tabbed__tab"),i=t.find(".js-tabbed__pane");e.click(function(t){t.preventDefault();var n=$(this),o=$(n.attr("href")),s=$(n.data("main"));s.length,i.not(o).removeClass("current"),e.not(n).removeClass("current"),o.toggleClass("current"),n.toggleClass("current")})});var h=$(".isotope-filter a");if(h.each(function(){h.length&&h.click(function(t){t.preventDefault();var e=$($(this).data("main"));$(this).closest(".isotope-filter").find("a").removeClass("current"),$(this).addClass("current"),e.isotope({filter:$(this).data("filter")})})}),$("body").hasClass("dashboard-page")){$(".tiles").each(function(){var t=$(this);t.imagesLoaded(function(){})});var u=$(".shape-nav a");u.click(function(t){t.preventDefault(),u.removeClass("current"),$(this).addClass("current")})}var d=$(".place-form");d.each(function(){var t=$(this),e=t.find("button.form-btn"),i=t.find(":input"),n=function(i){return $(i).val()!==$(i).data("val")?(t.off("submit",o),e.removeAttr("disabled"),!0):void 0},o=function(t){i.each(function(){return n()?!0:void 0}),t.preventDefault()};t.on("submit",o),i.each(function(){$(this).data("val",$(this).val())}).blur(function(){n(this)}).change(function(){n(this)})}),$(".js-show-fieldset").click(function(t){t.preventDefault();var e=$(this),i=$(e.attr("href")).clone().removeClass("hidden");e.before(i),i.show()})});var calculateAspectRatioFit=function(t,e,i,n){var o=Math.min(i/t,n/e);return{width:t*o,height:e*o}};